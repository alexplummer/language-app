{"version":3,"sources":["app.js","appData.js","viewCreation.js","queryInteraction.js","termInteraction.js","homeScreen.js","helperFunctions.js","termCreation.js","introInstructions.js","menuInteraction.js"],"names":["tinyTermsApp","appData","fonts","feather","viewCreate","termsToCreate","viewHTML","value","termValue","tinyTerms","pickedList","terms","term","definitionValue","definition","supportValue","support","termEncode","makeSafeClass","revealCounter","viewsCount","storedData","revealGoal","undefined","document","querySelector","innerHTML","action","newHolder","ops","revealGoalTarget","termHolders","querySelectorAll","i","length","style","minHeight","classList","add","countLines","viewedTerms","colour","termWrapper","pickedColour","background","color","symbol","pickedSymbol","revealCountdowns","revealBtn","revealTerm","parentNode","createRevealTimer","addHearts","heartHolder","heartsHTML","hearts","points","localforage","setItem","storedName","setScore","scoreHolder","score","progressBar","learnedTerms","completed","Object","keys","remaining","width","createNewQuery","bonus","randomTerm","queryTerms","correctTerms","incorrectTerms","cycledTerms","dailyQuery","pickRandom","hasOwnProperty","dailyReminder","queryHandler","dailyTerms","indexOf","remove","queryWrapper","queryHolder","querySubmit","resultHolder","parseInt","count","queryComplete","getElementsByTagName","window","addEventListener","e","keyCode","click","preventDefault","queryInput","checkQuery","winCase","loseCase","spelling","input","correct","placeholder","removeChild","revealedBtnHandler","clickListener","contains","countHolder","definitionWrapper","definitionHolder","viewCount","revealGoalCount","gameWon","modal","view","completeBonus","complete","dailyBonus","minutes","counterMins","seconds","counterSecs","remainingMinutes","remainingSeconds","startTime","timerEnded","Date","getTime","startTimer","nowTime","setAttribute","diffSecs","Math","floor","totalSecs","clearInterval","timerUpdate","timeout","checkCount","setInterval","buttonTimer","disabled","displayedMinutes","displayedSeconds","hiddenZero","textToSpeech","termHolder","languages","TTS","speech","SpeechSynthesisUtterance","lang","speechLang","speechSynthesis","speak","text","locale","rate","reason","alertMsg","k","dictionaryLookup","dictionaryBtn","encodeURI","dictFrom","dictTo","toLowerCase","jsonp","then","data","dictionaryResponses","findProp","obj","key","out","proto","prototype","ts","toString","hasOwn","bind","call","tuc","err","console","log","addColour","colourBtn","picker","colours","coloursHolder","j","backgroundColor","getAttribute","colourListener","hideModal","pickSymbol","symbolBtn","symbolHTML","symbols","symbolListener","event","target","srcElement","trigger","modalClose","closeModal","showHome","setTimeout","uploadedLists","getItem","customListChoices","val","listName","name","listURL","sheetURL","homeWrapper","homeHeader","chooseList","categories","navBack","scrollArrow","scrollCheck","lists","categoryHandler","categoryBtn","buildList","showList","showCategoriesAgain","navListeners","thisBtn","categoryType","listChoices","category","clientHeight","scrollHeight","scrollTop","listItem","AllPicked","includes","push","location","reload","removeList","insertPoint","nextSibling","insertBefore","createElement","childNodes","removeItem","zIndex","inputName","inputSheet","uploadList","substring","border","checkURL","customlist","ready","fn","readyState","cl","errorAlert","message","cb","onerror","errorMsg","url","lineNumber","column","errorObj","buildData","columnName","Sheet1","columnNames","elements","termContent","Term","definitionContent","Definition","supportContent","Support","postBuildCallback","checkConnection","networkState","navigator","connection","type","states","Connection","UNKNOWN","ETHERNET","WIFI","CELL_2G","CELL_3G","CELL_4G","CELL","NONE","getComputedStyle","height","getPropertyValue","font_size","line_height","box_sizing","isNaN","padding_top","padding_bottom","border_top","border_bottom","lines","ceil","checkSameDay","todaysDate","getTodaysDate","storedDate","Array","from","dateOpened","arrayCheck","addDay","newDay","todayDate","day","getDate","month","getMonth","str","a","href","host","replace","s","c","charCodeAt","slice","arr1","arr2","JSON","stringify","clickFunction","objectList","pickedTerm","random","item1","item2","toUpperCase","getBigrams","string","ref","v","stringSimilarity","str1","str2","hit_count","len","len1","pairs1","pairs2","union","x","y","relevance","wordAccuracy","appBlur","hidden","onchange","onfocusin","onfocusout","onpageshow","onpagehide","onfocus","onblur","evt","h","evtMap","focus","focusin","pageshow","blur","focusout","pagehide","sortArrayByKey","arr","reverse","sortOrder","sort","b","uri","Promise","resolve","reject","id","round","callbackName","ele","getElementById","src","script","body","documentElement","appendChild","getListOfTerms","listOfTerms","scannedTerms","dataLength","displayedTerms","firstTime","reminderTerm","remindedTerms","getOwnPropertyNames","viewedLength","viewedSorted","m","splice","onboardShow","onBoardText","topTerm","topBtn","tutComplete","onboardStage2","cssText","termOffset","offsetTop","offsetHeight","top","onboardStage3","onboardStage4","timerOveride","removeAttribute","onboardStage5","goal","goalCount","onboardStage6","onboardStage7","onboardStage8","queryWrap","onboardStage9","navMenu","nav","showNav","toggle","hideNav","tinyTermsAllPicked","navHTML","navItems","footerMenu","optionsDisplay","settingsBtn","resetList","resetApp","resetMenu","clear","debug","loadDelay","notLoaded","getLists","skipDefaultCheck","tinyTermsDefault","tutStatus","checkDefault","normalLoad","firstLoad","defaultlist","initialise","fetchData","Tabletop","init","callback","simpleSheet","appBuildHandler","pickedTerms","revealedTermCount","tinyTerms$1"],"mappings":"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","file":"app.js","sourcesContent":["// Imports\r\nimport { ready, cl, clv, buildData, errorAlert, alertMsg, checkSameDay, checkConnection, arrayCheck, getTodaysDate, appBlur } from \"helperFunctions\";\r\nimport { getListOfTerms } from \"termCreation\";\r\nimport { revealedBtnHandler, dictionaryLookup, textToSpeech, addColour, hideModal, pickSymbol } from \"termInteraction\";\r\nimport { viewCreate, addHearts, setScore, progressBar } from \"viewCreation\";\r\nimport { createNewQuery } from \"queryInteraction\";\r\nimport { showHome } from \"homeScreen\";\r\nimport { onboardShow } from \"introInstructions\";\r\nimport { navMenu, footerMenu, optionsDisplay } from \"menuInteraction\";\r\nimport appData from \"appData\";\r\n\r\n// Exports\r\nexport default tinyTerms;\r\n\r\n// App namespace\r\nlet tinyTerms = tinyTerms || {};\r\n\r\n// Global options\r\nlet ops = {\r\n\tdisplayedTerms: 5,\r\n\tcounterMins: 60,\r\n\tcounterSecs: 0,\r\n\trevealGoalTarget: 3,\r\n\twordAccuracy: 0.7,\r\n\taddDay: false,\r\n\tdebug: true,\r\n\tloadDelay: 2500,\r\n\tpoints: {\r\n\t\tcorrect: 50,\r\n\t\tdailyBonus: 10,\r\n\t\thearts: 3\r\n\t}\r\n};\r\n\r\n// Default list choices\r\ntinyTerms.listChoices = {\r\n\t\"Italian Verbs ITA-ENG\": {\r\n\t\tname: \"Italian Verbs ITA-ENG\",\r\n\t\tcategory: \"Language\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1Q1pmDXybg_GDB6bSXknuBET2Nm8L-Roi2Kj01SHm_WI/pubhtml\"\r\n\t},\r\n\t\"Computer Components\": {\r\n\t\tname: \"Computer Components\",\r\n\t\tcategory: \"Technology\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1Ho5Viqg71mIBlbyAIjLIqHEWRr4znDCLZSBtwVTtZk0/edit\"\r\n\t},\r\n\t\"Periodic Elements\": {\r\n\t\tname: \"Periodic Elements\",\r\n\t\tcategory: \"Science\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1sL3kTrZq3Hdb_iBo7hC8x9oGXXownlxmmdmmvALAPlU/edit#gid=0\"\r\n\t},\r\n\t\"Global Capital Cities\": {\r\n\t\tname: \"Global Capital Cities\",\r\n\t\tcategory: \"Culture\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1hU1pJSR2sp4g7C91prXqijBzNVZTJ4Qkip0rY4IuWaQ/pubhtml\"\r\n\t},\r\n\t\"Top 100 words ITA-ENG\": {\r\n\t\tname: \"Top 100 words ITA-ENG\",\r\n\t\tcategory: \"Language\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1gBNQk9jH7X2iRIbcZg3F5kbOTGgl9EvlJ65UkYHV6Mo/pubhtml\"\r\n\t},\r\n\t\"Italian Anatomy ITA-ENG\": {\r\n\t\tname: \"Italian Anatomy ITA-ENG\",\r\n\t\tcategory: \"Language\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1lDCYm0E9y8IBHoS2JrEu6iPe4UJEkfU3dEywURhhqb0/pubhtml\"\r\n\t},\r\n\t\"Bee Anatomy\": {\r\n\t\tname: \"Bee Anatomy\",\r\n\t\tcategory: \"Science\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/12-g6CDVGXIPTn5Va7rY6OC22ZS12p6av46p2LMht61I/pubhtml\"\r\n\t}\r\n};\r\n\r\n// Crash protection\r\nlet notLoaded = true;\r\n\r\nsetTimeout(() => {\r\n\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"loading\");\r\n\r\n\tif (notLoaded === true) {\r\n\t\tlet modal = document.querySelector('.m-modal');\r\n\t\tmodal.classList.remove(\"hidden\");\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"modal-active\");\r\n\r\n\t\tlet view = `<header>\r\n\t\t\t\t\t\t<h2 class=\"\">Uh oh!</h2>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<h3>Sorry something went wrong :(</h3>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<button class=\"home-btn\">Close</button>\r\n\t\t\t\t\t`;\r\n\r\n\t\t// Add view\r\n\t\tmodal.querySelector(\".content\").innerHTML += view;\r\n\t\tmodal.classList.add('onboard');\r\n\r\n\t\tdocument.querySelector(\".home-btn\").addEventListener(\"click\", (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tshowHome()\r\n\t\t});\r\n\t}\r\n}, 10000);\r\n\r\n// Initialise modules on load\r\nready(function () {\r\n\t\"use strict\";\r\n\tgetLists();\r\n});\r\n\r\n// Pick a list\r\nfunction getLists(skipDefaultCheck) {\r\n\tlet tinyTermsDefault;\r\n\r\n\tlocalforage.getItem(\"tinyTerms.tutComplete\", function (err, tutStatus) {\r\n\t\ttinyTerms.tutComplete = tutStatus;\r\n\r\n\t\t// Check for default list, used on very first load\r\n\t\tlocalforage.getItem(\"tinyTermsDefault\", function (err, value) {\r\n\t\t\ttinyTermsDefault = value;\r\n\r\n\t\t\tif (tinyTermsDefault === null) {\r\n\t\t\t\tnotLoaded = false;\r\n\t\t\t\tshowHome();\r\n\t\t\t} else {\r\n\t\t\t\tcheckDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tfunction checkDefault() {\r\n\t\t// Check for existing data of newly picked list\r\n\t\tlocalforage.getItem(\"tinyTerms\" + tinyTermsDefault, function (err, value) {\r\n\t\t\tif (value !== null) {\r\n\t\t\t\ttinyTerms.pickedList = tinyTermsDefault;\r\n\t\t\t\tnormalLoad(tinyTerms.pickedList);\r\n\t\t\t} \r\n\t\t\telse {\r\n\t\t\t\tif (typeof Connection !== \"undefined\") {\r\n\t\t\t\t\tlet connection = checkConnection();\r\n\t\t\t\t\tnotLoaded = false;\r\n\r\n\t\t\t\t\tif (connection === 'Unknown' || connection === '2G' || connection === 'Cell' || connection === 'None') {\r\n\r\n\t\t\t\t\t\talertMsg(\"Please connect to the internet to download list, after it will be available offline.\", () => {\r\n\t\t\t\t\t\t\tdocument.querySelector(\".home-btn\").addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tshowHome()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tfirstLoad();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tfirstLoad();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction normalLoad(defaultlist) {\r\n\t\ttinyTerms.storedName = \"tinyTerms\" + defaultlist;\r\n\r\n\t\tlocalforage.getItem(\"tinyTerms\" + defaultlist, function (err, value) {\r\n\t\t\t// Set session storage to stored\r\n\t\t\ttinyTerms[tinyTerms.pickedList] = value;\r\n\r\n\t\t\t// Update stored ops\r\n\t\t\ttinyTerms[tinyTerms.pickedList].ops = ops;\r\n\t\t\tinitialise();\r\n\t\t});\r\n\t}\r\n}\r\n\r\n// Sets up new list, gets data\r\nconst firstLoad = function firstLoad() {\r\n\r\n\tlocalforage.getItem(\"tinyTermsDefault\", function (err, value) {\r\n\t\t// Set session storage to stored\r\n\t\ttinyTerms.pickedList = value;\r\n\r\n\t\t// Set picked list and create data object for it\r\n\t\ttinyTerms[tinyTerms.pickedList] = {};\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData = {};\r\n\t\ttinyTerms[tinyTerms.pickedList].ops = ops;\r\n\t\ttinyTerms.storedName = \"tinyTerms\" + tinyTerms.pickedList;\r\n\r\n\t\t// Set new list to storage, add as default\r\n\t\tlocalforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n\t\t// Add default lists to uploadedLists, same place as user upload\r\n\t\tlocalforage.getItem(\"tinyTerms.uploadedLists\", function (err, uploadedLists) {\r\n\t\t\tlet sheetURL;\r\n\r\n\t\t\tuploadedLists = uploadedLists || {};\r\n\t\t\t// If list from uploaded lists\r\n\t\t\tif (uploadedLists.hasOwnProperty(tinyTerms.pickedList)) {\r\n\t\t\t\tsheetURL = uploadedLists[tinyTerms.pickedList].sheetURL;\r\n\t\t\t}\r\n\t\t\t// Else from default lists\r\n\t\t\telse {\r\n\t\t\t\tsheetURL = tinyTerms.listChoices[tinyTerms.pickedList].sheetURL;\r\n\t\t\t}\r\n\r\n\t\t\t// Fetch data for list\r\n\t\t\tfetchData(sheetURL, firstTime);\r\n\t\t});\r\n\t});\r\n};\r\n\r\n// Fetches list data\r\nconst fetchData = function fetchData(sheetURL, postBuildCallback) {\r\n\r\n\t// Add a callback method\r\n\ttinyTerms.postBuildCallback = postBuildCallback;\r\n\r\n\t// Error handling for Tabletop\r\n\terrorAlert('Couldn\\'t load the list URL, did you copy it correctly?', () => {\r\n\r\n\t\t// Clear list references callback\r\n\t\tlocalforage.removeItem(tinyTerms.storedName).then(function () {\r\n\t\t\tlocalforage.removeItem(tinyTerms.pickedList);\r\n\t\t});\r\n\t\tnotLoaded = false;\r\n\t});\r\n\r\n\t// Get data from sheets\r\n\tTabletop.init({\r\n\t\tkey: sheetURL,\r\n\t\tcallback: buildData,\r\n\t\tsimpleSheet: false\r\n\t});\r\n};\r\n\r\n// Runs if first time app has run\r\nconst firstTime = function firstTime() {\r\n\r\n\tif (tinyTerms[tinyTerms.pickedList].ops.debug !== true) {\r\n\t\twindow.onerror = \"\";\r\n\t}\r\n\t\r\n\t// Create terms\r\n\tappBuildHandler();\r\n\r\n\t// Show intro onboarding\r\n\tif (tinyTerms.tutComplete === null) {\r\n\t\tonboardShow();\r\n\t}\r\n\r\n\t// Then set first time to false\r\n\ttinyTerms[tinyTerms.pickedList].storedData.firstTime = false;\r\n\r\n\t// Add to storage\r\n\tlocalforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n};\r\n\r\n// Initialises data and app\r\nconst initialise = function initialise() {\r\n\t// Error handling for Tabletop\r\n\terrorAlert('Couldn\\'t load the list, please try again.', () => {\r\n\r\n\t\t// Clear list references callback\r\n\t\tlocalforage.removeItem(tinyTerms.storedName).then(function () {\r\n\t\t\tlocalforage.removeItem(tinyTerms.pickedList);\r\n\t\t});\r\n\t\tnotLoaded = false;\r\n\t});\r\n\t// Check if a new day\r\n\tcheckSameDay();\r\n\r\n\t// Start build\r\n\tappBuildHandler();\r\n};\r\n\r\n// Calls functions to handle app creation and running\r\nconst appBuildHandler = function appBuildHandler() {\r\n\t// Get initial terms\r\n\tlet pickedTerms;\r\n\r\n\t// If same day, used daily terms\r\n\tif (tinyTerms[tinyTerms.pickedList].storedData.newDay === false) {\r\n\t\tpickedTerms = tinyTerms[tinyTerms.pickedList].storedData.dailyTerms;\r\n\t} else {\r\n\t\t// Else get new\r\n\t\tpickedTerms = getListOfTerms();\r\n\r\n\t\t// Clear daily goals\r\n\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.revealedTermCount;\r\n\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns;\r\n\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.dailyReminder;\r\n\r\n\t\t// Reset daily reveal bonus\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.revealGoal = tinyTerms[\r\n\t\t\ttinyTerms.pickedList\r\n\t\t].storedData.revealGoal || {};\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.revealGoal.complete = false;\r\n\r\n\t\t// Create query if revealed terms\r\n\t\tif (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms !== undefined) {\r\n\t\t\tcreateNewQuery();\r\n\t\t}\r\n\r\n\t\t// Create reminded terms default\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.remindedTerms = tinyTerms[\r\n\t\t\ttinyTerms.pickedList\r\n\t\t].storedData.remindedTerms || {};\r\n\t}\r\n\r\n\t// Create initial view\r\n\tviewCreate(pickedTerms);\r\n\tsetScore();\r\n\r\n\t// Create opened date, daily terms, viewed terms\r\n\ttinyTerms[tinyTerms.pickedList].storedData.dateOpened = getTodaysDate();\r\n\ttinyTerms[tinyTerms.pickedList].storedData.dailyTerms = pickedTerms;\r\n\r\n\t// Add to storage\r\n\tlocalforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n\t// Keep query active each day\r\n\ttinyTerms[tinyTerms.pickedList].storedData.queryComplete = tinyTerms[\r\n\t\ttinyTerms.pickedList\r\n\t].storedData.queryComplete || {};\r\n\r\n\t// Load query if it exists already\r\n\tif (\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.dailyQuery !== undefined &&\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.queryComplete !== true\r\n\t) {\r\n\t\tcreateNewQuery();\r\n\t}\r\n\r\n\t// Handles events for revealed terms\r\n\trevealedBtnHandler();\r\n\tdictionaryLookup();\r\n\ttextToSpeech();\r\n\taddColour();\r\n\tpickSymbol();\r\n\thideModal();\r\n\r\n\t// Builds UI elements\r\n\tprogressBar();\r\n\r\n\t// Shows options menu\r\n\tnavMenu();\r\n\tfooterMenu();\r\n\toptionsDisplay();\r\n\r\n\t// Refresh window on blur\r\n\tappBlur();\r\n\r\n\t// App should have loaded by here\r\n\tnotLoaded = false;\r\n\r\n\t// Once loaded\r\n\tsetTimeout(\r\n\t\t() => {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"loading\");\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector(\".m-query\")\r\n\t\t\t\t.classList.add(\"animated\", \"slideInDown\");\r\n\t\t},\r\n\t\ttinyTerms[tinyTerms.pickedList].ops.loadDelay\r\n\t);\r\n\r\n\t// Show onboard if incomplete\r\n\tif (tinyTerms.tutComplete === false) {\r\n\t\tonboardShow();\r\n\t}\r\n\r\n\t// Debug code\r\n\tif (tinyTerms[tinyTerms.pickedList].ops.debug === true) {\r\n\t\tcl(tinyTerms);\r\n\t}\r\n};","// App data\r\n\r\nexport default {\r\n    fonts: {\r\n        feather: [\r\n            \"icon-lines-and-angles_accommodate\",\r\n            \"icon-lines-and-angles_adapt\",\r\n            \"icon-lines-and-angles_add\",\r\n            \"icon-lines-and-angles_adjust\",\r\n            \"icon-lines-and-angles_agitate\",\r\n            \"icon-lines-and-angles_agree\",\r\n            \"icon-lines-and-angles_aid\",\r\n            \"icon-lines-and-angles_alarm\",\r\n            \"icon-lines-and-angles_alert\",\r\n            \"icon-lines-and-angles_amaze\",\r\n            \"icon-lines-and-angles_amplify\",\r\n            \"icon-lines-and-angles_analyze\",\r\n            \"icon-lines-and-angles_announce\",\r\n            \"icon-lines-and-angles_arrest\",\r\n            \"icon-lines-and-angles_ascend\",\r\n            \"icon-lines-and-angles_ask\",\r\n            \"icon-lines-and-angles_assist\",\r\n            \"icon-lines-and-angles_attract\",\r\n            \"icon-lines-and-angles_augment\",\r\n            \"icon-lines-and-angles_bake\",\r\n            \"icon-lines-and-angles_balance\",\r\n            \"icon-lines-and-angles_battle\",\r\n            \"icon-lines-and-angles_be\",\r\n            \"icon-lines-and-angles_believe\",\r\n            \"icon-lines-and-angles_birth\",\r\n            \"icon-lines-and-angles_blaze\",\r\n            \"icon-lines-and-angles_blend\",\r\n            \"icon-lines-and-angles_bloom\",\r\n            \"icon-lines-and-angles_blow\",\r\n            \"icon-lines-and-angles_bookmark\",\r\n            \"icon-lines-and-angles_bootleg\",\r\n            \"icon-lines-and-angles_bounce\",\r\n            \"icon-lines-and-angles_break\",\r\n            \"icon-lines-and-angles_brew\",\r\n            \"icon-lines-and-angles_broadcast\",\r\n            \"icon-lines-and-angles_browse\",\r\n            \"icon-lines-and-angles_build\",\r\n            \"icon-lines-and-angles_burn\",\r\n            \"icon-lines-and-angles_bury\",\r\n            \"icon-lines-and-angles_buy\",\r\n            \"icon-lines-and-angles_caffeinate\",\r\n            \"icon-lines-and-angles_calculate\",\r\n            \"icon-lines-and-angles_calibrate\",\r\n            \"icon-lines-and-angles_carry\",\r\n            \"icon-lines-and-angles_carve\",\r\n            \"icon-lines-and-angles_cast\",\r\n            \"icon-lines-and-angles_catch\",\r\n            \"icon-lines-and-angles_cease\",\r\n            \"icon-lines-and-angles_celebrate\",\r\n            \"icon-lines-and-angles_challenge\",\r\n            \"icon-lines-and-angles_charge\",\r\n            \"icon-lines-and-angles_charm\",\r\n            \"icon-lines-and-angles_chart\",\r\n            \"icon-lines-and-angles_chat\",\r\n            \"icon-lines-and-angles_choose\",\r\n            \"icon-lines-and-angles_chop\",\r\n            \"icon-lines-and-angles_clean\",\r\n            \"icon-lines-and-angles_cleanse\",\r\n            \"icon-lines-and-angles_climb\",\r\n            \"icon-lines-and-angles_drum\",\r\n            \"icon-lines-and-angles_eat\",\r\n            \"icon-lines-and-angles_edit\",\r\n            \"icon-lines-and-angles_enhance\",\r\n            \"icon-lines-and-angles_enlarge\",\r\n            \"icon-lines-and-angles_enter\",\r\n            \"icon-lines-and-angles_equal\",\r\n            \"icon-lines-and-angles_erase\",\r\n            \"icon-lines-and-angles_examine\",\r\n            \"icon-lines-and-angles_experiment\",\r\n            \"icon-lines-and-angles_explore\",\r\n            \"icon-lines-and-angles_extrude\",\r\n            \"icon-lines-and-angles_feed\",\r\n            \"icon-lines-and-angles_fight\",\r\n            \"icon-lines-and-angles_fill\",\r\n            \"icon-lines-and-angles_film\",\r\n            \"icon-lines-and-angles_filter\",\r\n            \"icon-lines-and-angles_find\",\r\n            \"icon-lines-and-angles_finish\",\r\n            \"icon-lines-and-angles_fix\",\r\n            \"icon-lines-and-angles_flag\",\r\n            \"icon-lines-and-angles_float\",\r\n            \"icon-lines-and-angles_flow\",\r\n            \"icon-lines-and-angles_fly\",\r\n            \"icon-lines-and-angles_focus\",\r\n            \"icon-lines-and-angles_fold\",\r\n            \"icon-lines-and-angles_forbid\",\r\n            \"icon-lines-and-angles_forebode\",\r\n            \"icon-lines-and-angles_fork\",\r\n            \"icon-lines-and-angles_format\",\r\n            \"icon-lines-and-angles_game\",\r\n            \"icon-lines-and-angles_give\",\r\n            \"icon-lines-and-angles_glance\",\r\n            \"icon-lines-and-angles_grill\",\r\n            \"icon-lines-and-angles_grow\",\r\n            \"icon-lines-and-angles_guide\",\r\n            \"icon-lines-and-angles_hang\",\r\n            \"icon-lines-and-angles_harvest\",\r\n            \"icon-lines-and-angles_haunt\",\r\n            \"icon-lines-and-angles_heal\",\r\n            \"icon-lines-and-angles_hear\",\r\n            \"icon-lines-and-angles_hide\",\r\n            \"icon-lines-and-angles_hold\",\r\n            \"icon-lines-and-angles_home\",\r\n            \"icon-lines-and-angles_identify\",\r\n            \"icon-lines-and-angles_imagine\",\r\n            \"icon-lines-and-angles_influence\",\r\n            \"icon-lines-and-angles_inject\",\r\n            \"icon-lines-and-angles_invade\",\r\n            \"icon-lines-and-angles_iron\",\r\n            \"icon-lines-and-angles_jam\",\r\n            \"icon-lines-and-angles_join\",\r\n            \"icon-lines-and-angles_judge\",\r\n            \"icon-lines-and-angles_keep\",\r\n            \"icon-lines-and-angles_kick\",\r\n            \"icon-lines-and-angles_pitch\",\r\n            \"icon-lines-and-angles_plan\",\r\n            \"icon-lines-and-angles_plant\",\r\n            \"icon-lines-and-angles_play\",\r\n            \"icon-lines-and-angles_push\",\r\n            \"icon-lines-and-angles_rain\",\r\n            \"icon-lines-and-angles_read\",\r\n            \"icon-lines-and-angles_record\",\r\n            \"icon-lines-and-angles_redo\",\r\n            \"icon-lines-and-angles_reheat\",\r\n            \"icon-lines-and-angles_remind\",\r\n            \"icon-lines-and-angles_repeat\",\r\n            \"icon-lines-and-angles_report\",\r\n            \"icon-lines-and-angles_resurrect\",\r\n            \"icon-lines-and-angles_rewind\",\r\n            \"icon-lines-and-angles_ride\",\r\n            \"icon-lines-and-angles_ring\",\r\n            \"icon-lines-and-angles_rise\",\r\n            \"icon-lines-and-angles_rock\",\r\n            \"icon-lines-and-angles_roll\",\r\n            \"icon-lines-and-angles_rule\",\r\n            \"icon-lines-and-angles_run\",\r\n            \"icon-lines-and-angles_save\",\r\n            \"icon-lines-and-angles_schedule\",\r\n            \"icon-lines-and-angles_screw\",\r\n            \"icon-lines-and-angles_scroll\",\r\n            \"icon-lines-and-angles_search\",\r\n            \"icon-lines-and-angles_see\",\r\n            \"icon-lines-and-angles_select\",\r\n            \"icon-lines-and-angles_sell\",\r\n            \"icon-lines-and-angles_send\",\r\n            \"icon-lines-and-angles_sew\",\r\n            \"icon-lines-and-angles_shade\",\r\n            \"icon-lines-and-angles_shake\",\r\n            \"icon-lines-and-angles_share\",\r\n            \"icon-lines-and-angles_shine\",\r\n            \"icon-lines-and-angles_shop\",\r\n            \"icon-lines-and-angles_shower\",\r\n            \"icon-lines-and-angles_shuffle\",\r\n            \"icon-lines-and-angles_sing\",\r\n            \"icon-lines-and-angles_sit\",\r\n            \"icon-lines-and-angles_skip\",\r\n            \"icon-lines-and-angles_sleep\",\r\n            \"icon-lines-and-angles_slice\",\r\n            \"icon-lines-and-angles_slide\",\r\n            \"icon-lines-and-angles_smell\",\r\n            \"icon-lines-and-angles_smuggle\",\r\n            \"icon-lines-and-angles_snow\",\r\n            \"icon-lines-and-angles_solve\",\r\n            \"icon-lines-and-angles_sound\",\r\n            \"icon-lines-and-angles_sparkle\",\r\n            \"icon-lines-and-angles_speak\",\r\n            \"icon-lines-and-angles_spin\",\r\n            \"icon-lines-and-angles_spy\",\r\n            \"icon-lines-and-angles_stack\",\r\n            \"icon-lines-and-angles_stamp\",\r\n            \"icon-lines-and-angles_steam\",\r\n            \"icon-lines-and-angles_stomp\",\r\n            \"icon-lines-and-angles_stop\",\r\n            \"icon-lines-and-angles_strum\",\r\n            \"icon-lines-and-angles_study\",\r\n            \"icon-lines-and-angles_submerge\",\r\n            \"icon-lines-and-angles_succeed\",\r\n            \"icon-lines-and-angles_sweep\",\r\n            \"icon-lines-and-angles_swim\",\r\n            \"icon-lines-and-angles_sync\",\r\n            \"icon-lines-and-angles_tag\",\r\n            \"icon-lines-and-angles_target\",\r\n            \"icon-lines-and-angles_teach\",\r\n            \"icon-lines-and-angles_think\",\r\n            \"icon-lines-and-angles_thunder\",\r\n            \"icon-lines-and-angles_tie\",\r\n            \"icon-lines-and-angles_tower\",\r\n            \"icon-lines-and-angles_transport\",\r\n            \"icon-lines-and-angles_trash\",\r\n            \"icon-lines-and-angles_travel\",\r\n            \"icon-lines-and-angles_trend\",\r\n            \"icon-lines-and-angles_turn\",\r\n            \"icon-lines-and-angles_type\",\r\n            \"icon-lines-and-angles_undo\",\r\n            \"icon-lines-and-angles_unlock\",\r\n            \"icon-lines-and-angles_upload\",\r\n            \"icon-lines-and-angles_use\",\r\n            \"icon-lines-and-angles_wait\",\r\n            \"icon-lines-and-angles_wash\",\r\n            \"icon-lines-and-angles_watch\",\r\n            \"icon-lines-and-angles_wear\",\r\n            \"icon-lines-and-angles_weigh\",\r\n            \"icon-lines-and-angles_win\",\r\n            \"icon-lines-and-angles_work\",\r\n            \"icon-lines-and-angles_worship\",\r\n            \"icon-lines-and-angles_write\",\r\n            \"icon-lines-and-angles_yell\",\r\n            \"icon-lines-and-angles_clip\",\r\n            \"icon-lines-and-angles_close\",\r\n            \"icon-lines-and-angles_code\",\r\n            \"icon-lines-and-angles_collect\",\r\n            \"icon-lines-and-angles_commit\",\r\n            \"icon-lines-and-angles_connect\",\r\n            \"icon-lines-and-angles_contact\",\r\n            \"icon-lines-and-angles_contain\",\r\n            \"icon-lines-and-angles_control\",\r\n            \"icon-lines-and-angles_cook\",\r\n            \"icon-lines-and-angles_cool\",\r\n            \"icon-lines-and-angles_copy\",\r\n            \"icon-lines-and-angles_crave\",\r\n            \"icon-lines-and-angles_create\",\r\n            \"icon-lines-and-angles_creep\",\r\n            \"icon-lines-and-angles_crop\",\r\n            \"icon-lines-and-angles_cry\",\r\n            \"icon-lines-and-angles_curdle\",\r\n            \"icon-lines-and-angles_cut\",\r\n            \"icon-lines-and-angles_dance\",\r\n            \"icon-lines-and-angles_dazzle\",\r\n            \"icon-lines-and-angles_decide\",\r\n            \"icon-lines-and-angles_defend\",\r\n            \"icon-lines-and-angles_deliver\",\r\n            \"icon-lines-and-angles_design\",\r\n            \"icon-lines-and-angles_destroy\",\r\n            \"icon-lines-and-angles_develop\",\r\n            \"icon-lines-and-angles_die\",\r\n            \"icon-lines-and-angles_disappear\",\r\n            \"icon-lines-and-angles_discard\",\r\n            \"icon-lines-and-angles_discover\",\r\n            \"icon-lines-and-angles_disguise\",\r\n            \"icon-lines-and-angles_divide\",\r\n            \"icon-lines-and-angles_download\",\r\n            \"icon-lines-and-angles_draw\",\r\n            \"icon-lines-and-angles_drill\",\r\n            \"icon-lines-and-angles_drink\",\r\n            \"icon-lines-and-angles_drive\",\r\n            \"icon-lines-and-angles_drop\",\r\n            \"icon-lines-and-angles_kiss\",\r\n            \"icon-lines-and-angles_launch\",\r\n            \"icon-lines-and-angles_lick\",\r\n            \"icon-lines-and-angles_lift\",\r\n            \"icon-lines-and-angles_light\",\r\n            \"icon-lines-and-angles_like\",\r\n            \"icon-lines-and-angles_link\",\r\n            \"icon-lines-and-angles_live\",\r\n            \"icon-lines-and-angles_load\",\r\n            \"icon-lines-and-angles_locate\",\r\n            \"icon-lines-and-angles_lock\",\r\n            \"icon-lines-and-angles_madho\",\r\n            \"icon-lines-and-angles_manufacture\",\r\n            \"icon-lines-and-angles_mark\",\r\n            \"icon-lines-and-angles_measure\",\r\n            \"icon-lines-and-angles_medicate\",\r\n            \"icon-lines-and-angles_melt\",\r\n            \"icon-lines-and-angles_merge\",\r\n            \"icon-lines-and-angles_mill\",\r\n            \"icon-lines-and-angles_move\",\r\n            \"icon-lines-and-angles_multiply\",\r\n            \"icon-lines-and-angles_mute\",\r\n            \"icon-lines-and-angles_navigate\",\r\n            \"icon-lines-and-angles_open\",\r\n            \"icon-lines-and-angles_pack\",\r\n            \"icon-lines-and-angles_paint\",\r\n            \"icon-lines-and-angles_park\",\r\n            \"icon-lines-and-angles_paste\",\r\n            \"icon-lines-and-angles_pause\",\r\n            \"icon-lines-and-angles_pay\",\r\n            \"icon-lines-and-angles_perform\",\r\n            \"icon-lines-and-angles_photograph\",\r\n            \"icon-lines-and-angles_pick\",\r\n            \"icon-lines-and-angles_pin\",\r\n            \"icon-lines-and-angles_plot\",\r\n            \"icon-lines-and-angles_point\",\r\n            \"icon-lines-and-angles_poison\",\r\n            \"icon-lines-and-angles_present\",\r\n            \"icon-lines-and-angles_press\",\r\n            \"icon-lines-and-angles_primp\",\r\n            \"icon-lines-and-angles_print\",\r\n            \"icon-lines-and-angles_pucker\"\r\n            ]\r\n    }\r\n}\r\n","\r\n// Imports\r\nimport { cl, clv, makeSafeClass, countLines } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { createRevealTimer } from 'termInteraction';\r\n\r\n// Exports\r\nexport { viewCreate, addHearts, setScore, progressBar };\r\n\r\n// Create app view\r\nconst viewCreate = function viewCreate(termsToCreate) {\r\n\r\n    let viewHTML = \"\";\r\n\r\n    // Create HTML for terms\r\n    for (let value of termsToCreate) {\r\n\r\n        // Get terms and definitions from data\r\n        let termValue = tinyTerms[tinyTerms.pickedList].terms[value].term;\r\n        let definitionValue = tinyTerms[tinyTerms.pickedList].terms[value].definition;\r\n        let supportValue = tinyTerms[tinyTerms.pickedList].terms[value].support;\r\n        let termEncode = makeSafeClass(termValue);\r\n        let revealCounter;\r\n        let viewsCount;\r\n\r\n        // Check storage for revealed count\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealGoal = tinyTerms[tinyTerms.pickedList].storedData.revealGoal || {};\r\n\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.revealGoal[termValue] === undefined) {\r\n            viewsCount = 0;\r\n        }\r\n        else {\r\n            viewsCount = (tinyTerms[tinyTerms.pickedList].storedData.revealGoal[termValue]) || 0;\r\n        }\r\n\r\n        document.querySelector('h1').innerHTML = tinyTerms.pickedList;\r\n        document.querySelector('.list-action').innerHTML = tinyTerms[tinyTerms.pickedList].action + '<span class=\"query-holder\"></span>';\r\n\r\n        // Create terms HTML\r\n        let newHolder =\r\n            `<div class=\"m-term-wrapper ${termEncode}\">\r\n                <p class=\"term-holder\">${termValue}</p>\r\n                <div class=\"theme-holder\"><p class=\"symbol-holder\"></p></div>\r\n                <div class=\"right\">\r\n                    <p class=\"term-views\"><span>Goal:</span> <span class=\"count\">${viewsCount}</span> / ${tinyTerms[tinyTerms.pickedList].ops.revealGoalTarget}</p>\r\n                    <button class=\"reveal\">Reveal</button>\r\n                </div>\r\n                <div class=\"definition-wrapper hidden\">\r\n                    <p class=\"definition-holder\">${definitionValue}</p>\r\n                    <div class=\"helpers\">\r\n                        <a href=\"#\" class=\"lookup\"></a>\r\n                        <a href=\"#\" class=\"colour\"></a>\r\n                        <a href=\"#\" class=\"symbol\"></a>\r\n                    </div>\r\n                    <div class=\"support-wrapper\">${supportValue}</div>\r\n                </div>\r\n            </div>`;\r\n\r\n        viewHTML += newHolder;\r\n    }\r\n    // Add to view\r\n    document.querySelector('.terms-wrapper').innerHTML = viewHTML;\r\n\r\n    // Style terms based on number of lines\r\n    let termHolders = document.querySelectorAll('.term-holder');\r\n\r\n    for (let i = 0; i < termHolders.length; i++) {\r\n        termHolders[i].style.minHeight = '0px';\r\n        termHolders[i].classList.add('lines-'+countLines(termHolders[i]));\r\n        termHolders[i].style.minHeight = '86px';\r\n    }\r\n\r\n    // Add theme to previously created terms\r\n    for (let value of termsToCreate) {\r\n        let termValue = tinyTerms[tinyTerms.pickedList].terms[value].term;\r\n        let termEncode = makeSafeClass(termValue);\r\n\r\n        // Check storage for assigned colour\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue] !== undefined && tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].colour !== undefined) {\r\n            let termWrapper = document.querySelector('.' + termEncode + '');\r\n            let pickedColour = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].colour;\r\n            // Add colour to object\r\n            termWrapper.querySelector('.theme-holder').style.background = pickedColour;\r\n            termWrapper.querySelector('.theme-holder').classList.add('bg-active');\r\n            termWrapper.querySelector('.term-holder').style.color = \"#fff\";\r\n        }\r\n        // Check storage for assigned symbol\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue] !== undefined && tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].symbol !== undefined) {\r\n            let termWrapper = document.querySelector('.' + termEncode + '');\r\n            let pickedSymbol = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].symbol;\r\n            // Add symbol to object\r\n            termWrapper.querySelector('.symbol-holder').classList = ('symbol-holder');\r\n            termWrapper.querySelector('.symbol-holder').classList.add(pickedSymbol);\r\n        }\r\n    }\r\n\r\n    // Add countdown timers to term buttons\r\n    for (let value of termsToCreate) {\r\n\r\n        // Check if timer data exists\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns !== undefined) {\r\n\r\n            // Add countdown timers to buttons\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[value] !== undefined) {\r\n\r\n                let revealBtn = document.querySelectorAll('.reveal');\r\n\r\n                // Find button node that matches term in DOM\r\n                for (let i = 0; i < revealBtn.length; i++) {\r\n                    let revealTerm = revealBtn[i].parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n                    if (revealTerm === value) {\r\n                        createRevealTimer(revealBtn[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Add hearts to page\r\nconst addHearts = function addHearts() {\r\n    let heartHolder = document.querySelector('.hearts');\r\n    let heartsHTML = \"\";\r\n\r\n    // If no hearts data exists\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.hearts === undefined) {\r\n        tinyTerms[tinyTerms.pickedList].storedData.hearts = tinyTerms[tinyTerms.pickedList].ops.points.hearts;\r\n    }\r\n    for (let i = 0; i < tinyTerms[tinyTerms.pickedList].storedData.hearts; i++) {\r\n        heartsHTML += '<p></p>';\r\n    }\r\n    // Add to view\r\n    heartHolder.innerHTML = heartsHTML;\r\n\r\n    // Add to storage\r\n    localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n}\r\n\r\n// Sets the score\r\nconst setScore = function setScore() {\r\n\r\n    let scoreHolder = document.querySelector('.score-holder');\r\n\r\n    // Set score if it doesn't exist\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.score === undefined) {\r\n        tinyTerms[tinyTerms.pickedList].storedData.score = 0;\r\n    }\r\n\r\n    let score = tinyTerms[tinyTerms.pickedList].storedData.score;\r\n\r\n    // Add to view\r\n    scoreHolder.innerHTML = score;\r\n}\r\n\r\n// Add progress bar\r\nconst progressBar = function progressBar() {\r\n    // Create correct terms default\r\n    tinyTerms[tinyTerms.pickedList].storedData.learnedTerms = tinyTerms[tinyTerms.pickedList].storedData.learnedTerms || {};\r\n    let completed = Object.keys(tinyTerms[tinyTerms.pickedList].storedData.learnedTerms).length;\r\n    let remaining = Object.keys(tinyTerms[tinyTerms.pickedList].terms).length;\r\n\r\n    // Add to DOM\r\n    document.querySelector('.m-progress-bar').querySelector('.completed').innerHTML = completed;\r\n    document.querySelector('.m-progress-bar').querySelector('.remaining').innerHTML = ' / ' + remaining;\r\n    document.querySelector('.m-progress-bar').querySelector('.progress-bg').style.width = ((completed / remaining) * 100) + \"%\";\r\n}\r\n","\r\n// Imports\r\nimport { cl, clv, pickRandom, checkQuery, makeSafeClass } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { addHearts } from 'viewCreation';\r\n\r\n// Exports\r\nexport { createNewQuery };\r\n\r\n// Sets up query\r\nconst createNewQuery = function createNewQuery(bonus) {\r\n\r\n    // Pick a term for query\r\n    let randomTerm;\r\n    let i = 0;\r\n\r\n    // If no stored data for reveal countdowns\r\n    tinyTerms[tinyTerms.pickedList].storedData.queryTerms = tinyTerms[tinyTerms.pickedList].storedData.queryTerms || {};\r\n\r\n    // Set correctTerms storage if not exists\r\n    tinyTerms[tinyTerms.pickedList].storedData.correctTerms = tinyTerms[tinyTerms.pickedList].storedData.correctTerms || {};\r\n\r\n    // Set incorrectTerms storage if not exists\r\n    tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms = tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms || {};\r\n\r\n    let cycledTerms = [];\r\n    // Choose term from viewed terms\r\n    while (i < Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length) {\r\n\r\n        // If no daily term\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.dailyQuery === undefined) {\r\n            // Pick a random term\r\n            randomTerm = pickRandom(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms);\r\n        }\r\n        else {\r\n            randomTerm = tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n        }\r\n        // Make sure not answered correctly before\r\n        if (!tinyTerms[tinyTerms.pickedList].storedData.correctTerms.hasOwnProperty(randomTerm)) {\r\n\r\n            // If query not from daily reminder term\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder !== undefined) {\r\n                if (!tinyTerms[tinyTerms.pickedList].storedData.dailyReminder.hasOwnProperty(randomTerm)) {\r\n                    queryHandler();\r\n                    break;\r\n                }\r\n            }\r\n            // If query not from daily terms\r\n            else if (!tinyTerms[tinyTerms.pickedList].storedData.dailyTerms.hasOwnProperty(randomTerm)) {\r\n                queryHandler();\r\n                break;\r\n            }\r\n        }\r\n        if (!cycledTerms.indexOf(randomTerm)) {\r\n            i++\r\n        }\r\n        // Else look for another\r\n        if (i === Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length) {\r\n            document.querySelector('.result-holder').innerHTML = \"Reveal more terms to get a query\";\r\n            document.querySelector('.result-holder').classList.remove('hidden');\r\n        }\r\n    }\r\n\r\n    // Build the query\r\n    function queryHandler() {\r\n        let queryWrapper = document.querySelector('.query-wrapper');\r\n        let queryHolder = document.querySelector('.query-holder');\r\n        let querySubmit = document.querySelector('.query-submit');\r\n        let resultHolder = document.querySelector('.result-holder');\r\n        let scoreHolder = document.querySelector('.score-holder');\r\n        let heartHolder = document.querySelector('.hearts');\r\n        let score = parseInt(scoreHolder.innerHTML);\r\n        let definition = tinyTerms[tinyTerms.pickedList].terms[randomTerm].definition;\r\n        let count = 0;\r\n\r\n        // Save to storage\r\n        tinyTerms[tinyTerms.pickedList].storedData.dailyQuery = randomTerm;\r\n        tinyTerms[tinyTerms.pickedList].storedData.queryComplete = false;\r\n\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        let termEncode = makeSafeClass(randomTerm);\r\n\r\n        // Hide daily term definition if same\r\n        if (document.querySelector('.' + termEncode + '') !== null) {\r\n            document.querySelector('.' + termEncode + '').querySelector('.definition-wrapper').classList.add('hidden');\r\n        }\r\n\r\n        // Add hearts\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.hearts;\r\n        addHearts();\r\n\r\n        // Show the query wrapper\r\n        queryWrapper.classList.remove('hidden');\r\n\r\n        // Change title if bonus\r\n        if (bonus) {\r\n            queryWrapper.getElementsByTagName('h2')[0].innerHTML = \"Bonus Test\";\r\n        }\r\n\r\n        // Set value of query\r\n        queryHolder.innerHTML = randomTerm;\r\n\r\n        window.addEventListener(\"keypress\", function (e) {\r\n            if (e.keyCode === 13) {\r\n                querySubmit.click();\r\n            }\r\n        });\r\n\r\n        // Query outcomes\r\n        querySubmit.addEventListener(\"click\", (e) => {\r\n            e.preventDefault();\r\n            let queryInput = document.querySelector('.query-input').value;\r\n\r\n            if (checkQuery(queryInput, definition) === true) {\r\n                winCase();\r\n            }\r\n            else if (checkQuery(queryInput, definition) === \"mispelled\") {\r\n                winCase(\"mispelled\", queryInput);\r\n            }\r\n            else if (queryInput === \"\") {\r\n                resultHolder.innerHTML = \"Enter a definition.\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            else {\r\n                loseCase();\r\n            }\r\n        });\r\n\r\n        // If definition is right\r\n        function winCase(spelling, input) {\r\n            // Hide the query input\r\n            document.querySelector('.query-form').classList.add('hidden');\r\n            heartHolder.classList.add('hidden');\r\n            // If mispelled\r\n            if (spelling === \"mispelled\") {\r\n                // Display win message\r\n                resultHolder.innerHTML = \"Well done but check your spelling (\" + input + \"), the definition is <strong>\\\"\" + definition + \"\\\"</strong>\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            else {\r\n                // Display win message\r\n                resultHolder.innerHTML = \"Well done, the definition is <strong>\\\"\" + definition + \"\\\"</strong>\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            // Add to score\r\n            score += tinyTerms[tinyTerms.pickedList].ops.points.correct;\r\n            // Update view\r\n            scoreHolder.innerHTML = score;\r\n            // Add to stored data\r\n            tinyTerms[tinyTerms.pickedList].storedData.score = score;\r\n            tinyTerms[tinyTerms.pickedList].storedData.correctTerms[randomTerm] = definition;\r\n            tinyTerms[tinyTerms.pickedList].storedData.queryComplete = true;\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n            // Save to storage\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n        }\r\n        // If definition is wrong\r\n        function loseCase() {\r\n            let queryInput = document.querySelector('.query-input');\r\n            // Update view\r\n            resultHolder.innerHTML = \"Try again.\";\r\n            resultHolder.classList.remove('hidden');\r\n            // Add placeholder\r\n            queryInput.placeholder = queryInput.value;\r\n            // Remove guess\r\n            queryInput.value = \"\";\r\n            // Lose a heart\r\n            heartHolder.removeChild(heartHolder.getElementsByTagName('p')[0]);\r\n            tinyTerms[tinyTerms.pickedList].storedData.hearts -= 1;\r\n            // If all hearts lost\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.hearts === 0) {\r\n                // Hide query \r\n                document.querySelector('.query-form').classList.add('hidden');\r\n                heartHolder.classList.add('hidden');\r\n                // Update DOM\r\n                queryInput.value = \"\";\r\n                queryInput.placeholder = \"Enter the definition\";\r\n                // Update view\r\n                resultHolder.innerHTML = \"Sorry, you are out of attempts!\";\r\n                resultHolder.classList.remove('hidden');\r\n                // Add to storedDatta \r\n                tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms[randomTerm] = definition;\r\n                tinyTerms[tinyTerms.pickedList].storedData.queryComplete = true;\r\n                delete tinyTerms[tinyTerms.pickedList].storedData.hearts;\r\n            }\r\n            // Save to storage\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n        }\r\n    }\r\n}","\r\n// Imports\r\nimport { cl, clv, clickListener, alertMsg, jsonp, findKeys, makeSafeClass } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { createNewQuery } from 'queryInteraction';\r\nimport { setScore, addHearts, progressBar } from 'viewCreation';\r\n\r\n// Exports\r\nexport { revealedBtnHandler, createRevealTimer, dictionaryLookup, textToSpeech, addColour, hideModal, pickSymbol };\r\n\r\n// Handles functions when reveal button clicked\r\nconst revealedBtnHandler = function revealedBtnHandler() {\r\n\r\n    let revealBtn = document.querySelectorAll('.reveal');\r\n\r\n    clickListener(revealBtn, (i) => {\r\n\r\n        // Disabled button prevention\r\n        if (revealBtn[i].classList.contains('disabled')) {\r\n            return false;\r\n        }\r\n\r\n        let term = [revealBtn[i].parentNode.parentNode.querySelector('.term-holder').innerHTML];\r\n\r\n        // Updates the revealed view counter\r\n        let countHolder = revealBtn[i].parentNode.querySelector('.count');\r\n        let definitionWrapper = revealBtn[i].parentNode.parentNode.querySelector('.definition-wrapper');\r\n        let definitionHolder = revealBtn[i].parentNode.parentNode.querySelector('.definition-holder');\r\n        let count = parseInt(countHolder.innerHTML);\r\n\r\n        // Show definition\r\n        definitionWrapper.classList.remove('hidden');\r\n\r\n        // Animations\r\n        definitionWrapper.classList.add('slideInUp','animated');\r\n        revealBtn[i].parentNode.classList.add('rubberBand','animated');\r\n\r\n        // Set storedData\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term] = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term] || {};\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount || 0;\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount += 1;\r\n        \r\n        // Daily reveal bonus\r\n        let revealGoalCount;\r\n\r\n        // If no existing term bonus\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.revealGoal[term] === undefined) {\r\n            revealGoalCount = 1;\r\n        }\r\n\r\n        // Add one to daily bonus\r\n        else {\r\n            revealGoalCount = tinyTerms[tinyTerms.pickedList].storedData.revealGoal[term];\r\n            revealGoalCount += 1;\r\n        }\r\n\r\n        // Update DOM\r\n        countHolder.innerHTML = revealGoalCount;\r\n\r\n        // If bonus is met\r\n        if (revealGoalCount === tinyTerms[tinyTerms.pickedList].ops.revealGoalTarget) {\r\n\r\n            // Add term to learned terms list\r\n            tinyTerms[tinyTerms.pickedList].storedData.learnedTerms = tinyTerms[tinyTerms.pickedList].storedData.learnedTerms || {};\r\n            tinyTerms[tinyTerms.pickedList].storedData.learnedTerms[term] = true;\r\n\r\n            // Check if whole term list answered correctly\r\n            if (Object.keys(tinyTerms[tinyTerms.pickedList].storedData.learnedTerms).length === Object.keys(tinyTerms[tinyTerms.pickedList].terms).length) {\r\n                tinyTerms[tinyTerms.pickedList].storedData.gameWon = true;\r\n                gameWon();\r\n            }\r\n\r\n            // If game won\r\n            function gameWon() {\r\n                let modal = document.querySelector('.m-modal');\r\n\r\n                // Bring up modal\r\n                modal.classList.remove('hidden');\r\n                document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n                let view = `<header>\r\n                                <h2 class=\"\">Whoop whoop!!</h2>\r\n                            </header>\r\n                            <p>Well done you completed the whole list! You get a bonus 10 points for each term learned.</p>\r\n                            <p>You can keep learning this list, reset it in the options to start from scratch or move on to\r\n                            learn something new entirely.</p>\r\n                            <p><strong>Great job!</strong></p>`;\r\n\r\n                // Add view\r\n                modal.querySelector('.content').innerHTML += view;\r\n\r\n                // Award bonus points\r\n                let completeBonus = Object.keys(tinyTerms[tinyTerms.pickedList].terms).length * 10;\r\n                tinyTerms[tinyTerms.pickedList].storedData.score += completeBonus;\r\n                setScore();\r\n            }\r\n\r\n            // Update progress bar\r\n            progressBar();\r\n\r\n            // If daily bonus not already triggered\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.revealGoal.complete === false) {\r\n\r\n                // Keep query active \r\n                tinyTerms[tinyTerms.pickedList].storedData.queryComplete = false;\r\n                \r\n                // Create a new query\r\n                createNewQuery(true);\r\n            }\r\n            // Set only once a day\r\n            tinyTerms[tinyTerms.pickedList].storedData.revealGoal.complete = true;\r\n            tinyTerms[tinyTerms.pickedList].storedData.score += tinyTerms[tinyTerms.pickedList].ops.points.dailyBonus;\r\n            setScore();\r\n        }\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealGoal[term] = revealGoalCount;\r\n\r\n        // Save to storage\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        // Starts a timer \r\n        createRevealTimer(revealBtn[i]);\r\n    });\r\n}\r\n\r\n// Adds a timer to the reveal button\r\nconst createRevealTimer = function createRevealTimer(revealBtn) {\r\n\r\n    // If no stored data for reveal countdowns\r\n    tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns || {};\r\n\r\n    let term = [revealBtn.parentNode.parentNode.querySelector('.term-holder').innerHTML];\r\n    let minutes = tinyTerms[tinyTerms.pickedList].ops.counterMins;\r\n    let seconds = tinyTerms[tinyTerms.pickedList].ops.counterSecs;\r\n    let remainingMinutes;\r\n    let remainingSeconds;\r\n    let startTime;\r\n    let timerEnded;\r\n\r\n    // New timer\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term] === undefined) {\r\n\r\n        // Get a new time\r\n        startTime = new Date().getTime();\r\n\r\n        // Set storedData\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term] = {\r\n            \"startTime\": startTime,\r\n            \"timerEnded\": false\r\n        };\r\n\r\n        // Start timer\r\n        startTimer();\r\n    }\r\n    // Existing timer\r\n    else {\r\n        // Start timer\r\n        startTimer();\r\n    }\r\n\r\n    function startTimer() {\r\n        let nowTime = new Date().getTime();\r\n        \r\n        // Disable button\r\n        revealBtn.classList.add('disabled');\r\n        revealBtn.setAttribute(\"disabled\", true);\r\n\r\n        // Get terms start time for countdown\r\n        startTime = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].startTime;\r\n        timerEnded = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerEnded;\r\n\r\n        // Get difference in seconds\r\n        let diffSecs = Math.floor((nowTime - startTime) / 1000);\r\n        // Get total in seconds\r\n        let totalSecs = (tinyTerms[tinyTerms.pickedList].ops.counterMins * 60) + seconds;\r\n\r\n        // NowTime overtaken startTime\r\n        if (diffSecs >= totalSecs) {\r\n            timerEnded = true;\r\n            // Stop interval\r\n            clearInterval(tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerUpdate);\r\n            // Clear storage for term timer\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term];\r\n        }\r\n        // Timer stopped, return to normal\r\n        if (timerEnded === true) {\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            return false;\r\n        }\r\n        // Set remaining time \r\n        remainingSeconds = totalSecs - diffSecs;\r\n    }\r\n\r\n    // Set start time to storage\r\n    localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n    let timeout;\r\n    let checkCount = 0;\r\n\r\n    // If timer is active   \r\n    if (timerEnded === false) {\r\n\r\n        // Start timer interval\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerUpdate = setInterval(() => {\r\n            // Resync timer in some devices when off screen\r\n            checkCount += 1;\r\n            if (checkCount % 5 === 0) {\r\n                startTimer();\r\n            }\r\n            // Call UI timer build\r\n            buttonTimer();\r\n        }, 1000)\r\n    }\r\n    else {\r\n        revealBtn.innerHTML = (\"Reveal\");\r\n        revealBtn.classList.remove('disabled');\r\n        revealBtn.disabled = false;\r\n    }\r\n\r\n    // Builds the timer\r\n    function buttonTimer() {\r\n        let displayedMinutes = Math.floor(remainingSeconds / 60);\r\n        let displayedSeconds = remainingSeconds % 60;\r\n        let hiddenZero = '';\r\n\r\n        // Timer end\r\n        if (remainingSeconds <= 0) {\r\n            revealBtn.innerHTML = (\"Reveal\");\r\n            revealBtn.classList.remove('disabled');\r\n            revealBtn.disabled = false;\r\n            return false;\r\n        }\r\n\r\n        // Handle issues like zero index\r\n        if (displayedSeconds < 10 && displayedSeconds >= 0) {\r\n            hiddenZero = '0';\r\n        }\r\n        if (remainingSeconds === 60) {\r\n            displayedSeconds = '00';\r\n        }\r\n        // Update DOM\r\n        revealBtn.innerHTML = (displayedMinutes + ':' + hiddenZero + displayedSeconds);\r\n\r\n        // Decrease timer\r\n        remainingSeconds -= 1;\r\n    }\r\n};\r\n\r\n// Allows for text to speech\r\nconst textToSpeech = function textToSpeech() {\r\n    let termHolder = document.querySelectorAll('.term-holder');\r\n\r\n    clickListener(termHolder, (i) => {\r\n\r\n        let languages = {\r\n            'German':'de-DE',\r\n            'English':'en-GB',\r\n            'Spanish':'es-ES',\r\n            'French':'fr-FR',\r\n            'Italian':'it-IT',\r\n            'Portuguese':'pt-BR'\r\n        }\r\n\r\n        if (typeof TTS === \"undefined\") {\r\n            let speech = new SpeechSynthesisUtterance(termHolder[i].innerHTML);\r\n            speech.lang = languages[tinyTerms[tinyTerms.pickedList].speechLang];\r\n\r\n            window.speechSynthesis.speak(speech);\r\n        }\r\n        else {\r\n            TTS\r\n            .speak({\r\n                text: termHolder[i].innerHTML,\r\n                locale: languages[tinyTerms[tinyTerms.pickedList].speechLang],\r\n                rate: 1\r\n            }, function () {\r\n            }, function (reason) {\r\n                alertMsg(reason);\r\n            });\r\n        }\r\n    });\r\n    if (tinyTerms[tinyTerms.pickedList].speechLang === \"None\") {\r\n        for (let k = 0; k < termHolder.length; k++){\r\n            termHolder[k].classList.add('no-speak');\r\n        }\r\n    }\r\n}\r\n\r\n// Retrieves dictionary references\r\nconst dictionaryLookup = function dictionaryLookup() {\r\n\r\n    let dictionaryBtn = document.querySelectorAll('.lookup');\r\n    let modal = document.querySelector('.m-modal');\r\n\r\n    clickListener(dictionaryBtn, (i) => {\r\n        let term = dictionaryBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"dictionary\">Dictionary definitions</h2>\r\n                    </header>\r\n                    <p>${term}:</p>\r\n                    <ul class=\"definitions\">\r\n                    </ul>`;\r\n\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        // Make JSONP call to Glosbe API\r\n        let definitionHolder = modal.querySelector('.definitions');\r\n        let dictionaryLookup = encodeURI('https://glosbe.com/gapi/translate?from='+tinyTerms[tinyTerms.pickedList]\r\n        .dictFrom+'&dest='+tinyTerms[tinyTerms.pickedList]\r\n        .dictTo+'&format=json&pretty=true&phrase=' + term.toLowerCase() + '');\r\n\r\n        // Make request to Glosbe\r\n        jsonp(dictionaryLookup)\r\n        .then(function (data) {\r\n            let dictionaryResponses = \"\";\r\n\r\n            try {\r\n                // Search through data for \"meanings\"\r\n                findProp(data, \"text\");\r\n\r\n                function findProp(obj, key, out) {\r\n                    let i;\r\n                    let proto = Object.prototype;\r\n                    let ts = proto.toString;\r\n                    let hasOwn = proto.hasOwnProperty.bind(obj);\r\n\r\n                    for (i in obj) {\r\n                        if (hasOwn(i)) {\r\n                            if (i === key) {\r\n                                dictionaryResponses += '<li>' + obj[i] + '</li>';\r\n                            } else if ('[object Array]' === ts.call(obj[i]) || '[object Object]' === ts.call(obj[i])) {\r\n                                findProp(obj[i], key, out);\r\n                            }\r\n                        }\r\n                    }\r\n                    return out;\r\n                }\r\n                if (data.tuc === undefined || data.tuc.length === 0) {\r\n                    dictionaryResponses = \"(Sorry, no dictionary results found)\"\r\n                }\r\n                // Add to DOM\r\n                definitionHolder.innerHTML = dictionaryResponses;\r\n            }\r\n            catch (err) {\r\n                console.log(err);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// Adds colours to term holders\r\nconst addColour = function addColour() {\r\n\r\n    let modal = document.querySelector('.m-modal');\r\n    let colourBtn = document.querySelectorAll('.colour');\r\n    let picker;\r\n    let colours;\r\n\r\n    clickListener(colourBtn, (i) => {\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let termHolder = colourBtn[i].parentNode.parentNode.parentNode;\r\n        let term = colourBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"colour\">Colour picker</h2>\r\n                    </header>\r\n                    <p>Click below to add a colour for <br>\"<span class=\"colour-term\">${term}</span>\":</p>\r\n                    <ul class=\"colour-wrap\">\r\n                        <li><a href=\"#\" data-colour=\"#F44336\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#E91E63\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#9C27B0\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#3F51B5\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#2196F3\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#009688\"></a></li>\r\n                        <br>\r\n                        <li><a href=\"#\" data-colour=\"#4CAF50\"></a></li>\r\n                        <li><a href=\"#\" data-colour=\"#CDDC39\"></a></li>\r\n                        <li><a href=\"#\" data-colour=\"#FFC107\"></a></li>\r\n                        <li><a href=\"#\" data-colour=\"#FF5722\"></a></li>\r\n                        <li><a href=\"#\" data-colour=\"#212121\"></a></li>\r\n                        <li><a href=\"#\" class=\"no-colour\" data-colour=\"#fff\"></a></li>\r\n                    </ul>`;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        let coloursHolder = modal.querySelector('.colour-wrap');\r\n        // Add colour vars\r\n        colours = coloursHolder.getElementsByTagName('a');\r\n\r\n        for (let j = 0; j < colours.length; j++) {\r\n            colours[j].style.backgroundColor = colours[j].getAttribute('data-colour');\r\n        }\r\n        colourListener();\r\n    });\r\n\r\n    // Add colour function\r\n    function colourListener() {\r\n        let term = document.querySelector('.colour-term').innerHTML;\r\n        let termEncode = makeSafeClass(term);\r\n        let termWrapper = document.querySelector('.' + termEncode + '');\r\n\r\n        // Pick a colour\r\n        clickListener(colours, (i) => {\r\n            let pickedColour = colours[i].getAttribute('data-colour');\r\n            // Add colour to object\r\n            termWrapper.querySelector('.theme-holder').style.background = pickedColour;\r\n            termWrapper.querySelector('.theme-holder').classList.add('bg-active');\r\n            termWrapper.querySelector('.term-holder').style.color = \"#fff\";\r\n            // Set storage\r\n            tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].colour = pickedColour;\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            // Hide modal\r\n            hideModal(true);\r\n        });\r\n        document.querySelector('.no-colour').addEventListener('click',(e)=> {\r\n            termWrapper.querySelector('.term-holder').style.color = \"#3F4747\";\r\n            // Set storage\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].colour;\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n        });\r\n    }\r\n}\r\n\r\n// Symbol picker\r\nconst pickSymbol = function pickSymbol() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let symbolBtn = document.querySelectorAll('.symbol');\r\n    let symbolHTML = \"<tr>\";\r\n    let symbols = appData.fonts;\r\n    let k = 0;\r\n\r\n    for (let i = 0; i < appData.fonts.feather.length; i++) {\r\n\r\n        if (k % 5 === 0 && k != 0) {\r\n            symbolHTML += '</tr><tr>';\r\n        }\r\n        symbolHTML += '<td><p class='+appData.fonts.feather[i]+'></p></td>';\r\n        k++;\r\n\r\n        if (i === (appData.fonts.feather.length - 1)) {\r\n            symbolHTML += \"</tr>\"\r\n        }\r\n    }\r\n\r\n    /* OLD UNICODE SYMOBLS\r\n    let symbolRanges = [[0x2600,0x26FF]]; //,[0x1200, 0x135A],[0xA000, 0xA48C]\r\n    for (let j = 0; j < symbolRanges.length; j++) {\r\n\r\n        for (let i = symbolRanges[j][0]; i < symbolRanges[j][1]; i++) {\r\n\r\n            if (k % 5 === 0 && k != 0) {\r\n                symbolHTML += '</tr><tr>';\r\n            }\r\n\r\n            let symbol = String.fromCodePoint(i);\r\n            symbolHTML += '<td><p>' + symbol + '&#xFE0E;</p></td>';\r\n            k++;\r\n\r\n            if (i === (symbolRanges[j][1] - 1)) {\r\n                symbolHTML += \"</tr>\"\r\n            }\r\n        }\r\n    }\r\n    */\r\n\r\n    clickListener(symbolBtn, (i) => {\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let termHolder = symbolBtn[i].parentNode.parentNode.parentNode;\r\n        let term = symbolBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"symbol\">Glyph picker</h2>\r\n                    </header>\r\n                    <p>Click below to add a glyph for <br>\"<span class=\"symbol-term\">${term}</span>\":</p>\r\n                    <div class=\"symbol-wrap\">\r\n                        <a href=\"#\" class=\"symbol-clear icon-right-open\">Reset</a>\r\n                        <table>${symbolHTML}</table>\r\n                    </div>`;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        symbolListener();\r\n    });\r\n    // Check for clicked symbol\r\n    function symbolListener() {\r\n        let term = document.querySelector('.symbol-term').innerHTML;\r\n        let termEncode = makeSafeClass(term);\r\n        let termWrapper = document.querySelector('.' + termEncode + '');\r\n        let pickedSymbol = \"\";\r\n\r\n        modal.getElementsByTagName('table')[0].addEventListener('click', function(e) {\r\n            e = e || window.event;\r\n            let target = e.target || e.srcElement;\r\n            pickedSymbol = target.getAttribute(\"class\");   \r\n            // Add symbol to object\r\n            termWrapper.querySelector('.symbol-holder').classList = ('symbol-holder');\r\n            termWrapper.querySelector('.symbol-holder').classList.add(pickedSymbol);\r\n            // Set storage\r\n            tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].symbol = pickedSymbol;\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            // Hide modal\r\n            hideModal(true);\r\n        }, false);\r\n\r\n        document.querySelector('.symbol-clear').addEventListener('click',(e)=>{\r\n            // Set storage\r\n            termWrapper.querySelector('.symbol-holder').classList = ('symbol-holder');\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].symbol;\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            hideModal(true);\r\n        });\r\n    }\r\n}\r\n\r\n// Hide modal\r\nconst hideModal = function hideModal(trigger) {\r\n    let modal = document.querySelector('.m-modal');\r\n    let modalClose = modal.querySelector('.close');\r\n\r\n    modalClose.addEventListener(\"click\", (e) => {\r\n        e.preventDefault();\r\n        closeModal();\r\n    });\r\n    // Programatically close modal\r\n    if (trigger) {\r\n        closeModal();\r\n    }\r\n    // Hide modal\r\n    function closeModal() {\r\n        document.getElementsByTagName('body')[0].classList.remove('modal-active');\r\n        modal.classList.add('hidden');\r\n        modal.querySelector('.content').innerHTML = \"\";\r\n    }\r\n}\r\n","\r\n// Imports\r\nimport { cl, clv, clickListener, checkURL, makeSafeClass } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\nimport { hideModal } from 'termInteraction';\r\n\r\n// Exports\r\nexport { showHome };\r\n\r\n// Show home screen\r\nconst showHome = function showHome() {\r\n\r\n\t// Once loaded\r\n\tsetTimeout(() => {\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"loading\");\r\n\t\tdocument\r\n\t\t\t.querySelector(\".m-query\")\r\n\t\t\t.classList.add(\"animated\", \"slideInDown\");\r\n\t},\r\n\t\t2500\r\n\t);\r\n\r\n\ttinyTerms.uploadedLists = tinyTerms.uploadedLists || {};\r\n\r\n\tlocalforage.getItem('tinyTerms.uploadedLists', function (err, uploadedLists) {\r\n\r\n\t\ttinyTerms.customListChoices = tinyTerms.customListChoices || {};\r\n\r\n\t\t// Get uploaded lists\r\n\t\tfor (let val in uploadedLists) {\r\n\t\t\tlet listName = uploadedLists[val].name;\r\n\t\t\tlet listURL = uploadedLists[val].sheetURL;\r\n\r\n\t\t\ttinyTerms.customListChoices[listName] = {\r\n\t\t\t\tname: listName,\r\n\t\t\t\tsheetURL: listURL\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Show home screen\r\n\t\tlet homeWrapper = document.querySelector('.m-menu');\r\n\t\thomeWrapper.classList.remove('hidden');\r\n\t\tdocument.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\t\tdocument.getElementsByTagName('body')[0].classList.add('home');\r\n\r\n\t\tlet homeHeader = document.querySelector('.home-bg').getElementsByTagName('h2')[0];\r\n\t\tlet chooseList = homeWrapper.querySelector('.choose-list');\r\n\t\tlet categories = chooseList.getElementsByTagName('nav')[0].innerHTML;\r\n\t\tlet navBack = document.querySelector('.nav-back');\r\n\t\tlet scrollArrow = document.querySelector('.scroll-arrow');\r\n\t\tlet scrollCheck;\r\n\t\tlet lists;\r\n\r\n\t\tcategoryHandler();\r\n\r\n\t\t// Sets initial listeners on categories\r\n\t\tfunction categoryHandler() {\r\n\t\t\tlet categoryBtn = document.querySelectorAll('.category');\r\n\r\n\t\t\tfor (let i = 0; i < categoryBtn.length; i++) {\r\n\t\t\t\tcategoryBtn[i].addEventListener('click', (e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Build coresponding list\r\n\t\t\t\t\tbuildList(categoryBtn[i]);\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t// Show the list\r\n\t\t\t\t\t\tshowList();\r\n\t\t\t\t\t\t// Listener to go back to categories\r\n\t\t\t\t\t\tnavBack.addEventListener('click', (e) => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tshowCategoriesAgain();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// Set listeners for nav\r\n\t\t\t\t\t\tnavListeners();\r\n\t\t\t\t\t}, 500);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfunction buildList(thisBtn) {\r\n\t\t\tchooseList.classList.add('animated', 'slideOutLeft');\r\n\t\t\thomeHeader.classList.add('animated', 'fadeOutUp');\r\n\t\t\tlet categoryType = thisBtn.innerHTML;\r\n\t\t\tlists = \"\";\r\n\t\t\tfor (let val in tinyTerms.listChoices) {\r\n\r\n\t\t\t\tif (tinyTerms.listChoices[val].category === categoryType) {\r\n\t\t\t\t\tlists += '<a href=\"#\">' + tinyTerms.listChoices[val].name + '</a>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let val in tinyTerms.customListChoices) {\r\n\r\n\t\t\t\tif (tinyTerms.listChoices[val].category === categoryType) {\r\n\t\t\t\t\tlists += '<div class=\"' + makeSafeClass(tinyTerms.customListChoices[val].name) + '\"><span class=\"custom-list\"></span><a href=\"#\">' + tinyTerms.customListChoices[val].name + '</a></div>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction showList() {\r\n\t\t\thomeHeader.innerHTML = \"Choose a list:\";\r\n\t\t\thomeHeader.classList.remove('fadeOutUp');\r\n\t\t\thomeHeader.classList.add('fadeInDown');\r\n\t\t\tnavBack.classList.remove('hidden');\r\n\t\t\tchooseList.getElementsByTagName('nav')[0].innerHTML = lists;\r\n\t\t\tchooseList.classList.remove('slideOutLeft');\r\n\t\t\tchooseList.classList.add('slideInRight');\r\n\r\n\t\t\tif (chooseList.getElementsByTagName('a').length > 3) {\r\n\t\t\t\tchooseList.classList.add('slideInRight', 'scroll');\r\n\r\n\t\t\t\tscrollCheck = setInterval(() => {\r\n\t\t\t\t\tif (chooseList.clientHeight === (chooseList.scrollHeight - chooseList.scrollTop)) {\r\n\t\t\t\t\t\tscrollArrow.classList.add('hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tscrollArrow.classList.remove('hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction showCategoriesAgain() {\r\n\t\t\thomeHeader.classList.add('fadeOutUp');\r\n\t\t\thomeHeader.classList.remove('fadeInDown');\r\n\t\t\tchooseList.classList.remove('slideInRight');\r\n\t\t\tchooseList.classList.add('slideOutRight');\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thomeHeader.innerHTML = \"Choose a category:\";\r\n\t\t\t\thomeHeader.classList.remove('fadeOutUp');\r\n\t\t\t\thomeHeader.classList.add('fadeInDown');\r\n\t\t\t\tnavBack.classList.add('hidden');\r\n\t\t\t\tchooseList.getElementsByTagName('nav')[0].innerHTML = categories;\r\n\t\t\t\tchooseList.classList.add('slideInLeft');\r\n\t\t\t\tchooseList.classList.remove('slideOutRight', 'scroll');\r\n\t\t\t\tcategoryHandler();\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t});\r\n\r\n\tfunction navListeners() {\r\n\t\t// Add listener to nav\r\n\t\tlet listItem = document.querySelector('.choose-list').querySelectorAll('a');\r\n\r\n\t\tfor (var i = 0; i < listItem.length; i++) {\r\n\t\t\tlistItem[i].addEventListener('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\ttinyTerms.pickedList = this.innerHTML;\r\n\t\t\t\tlocalforage.getItem('tinyTermsAllPicked', function (err, value) {\r\n\t\t\t\t\ttinyTerms.AllPicked = value || [];\r\n\r\n\t\t\t\t\tif (tinyTerms.AllPicked.includes(tinyTerms.pickedList) === false) {\r\n\t\t\t\t\t\ttinyTerms.AllPicked.push(tinyTerms.pickedList);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlocalforage.setItem('tinyTermsAllPicked', tinyTerms.AllPicked, () => {\r\n\t\t\t\t\t\tlocalforage.setItem('tinyTermsDefault', tinyTerms.pickedList, () => {\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Add listener to remove list\r\n\t\tlet removeList = document.querySelectorAll('.custom-list');\r\n\t\tfor (let i = 0; i < removeList.length; i++) {\r\n\r\n\t\t\tremoveList[i].addEventListener('click', (e) => {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tlet insertPoint = removeList[i].nextSibling;\r\n\t\t\t\tdocument.querySelector('.create-list').classList.add('hidden');\r\n\t\t\t\tremoveList[i].classList.add('hidden');\r\n\t\t\t\tremoveList[i].parentNode.insertBefore(document.createElement(\"div\"), insertPoint.nextSibling);\r\n\t\t\t\tinsertPoint.nextSibling.innerHTML = '<p>Are you sure you want to delete your list? (Can\\'t undo)</p><button class=\"delete-cancel\">Cancel</button><button class=\"delete-confirm\">Confim</button>';\r\n\r\n\t\t\t\tdocument.querySelector('.delete-confirm').addEventListener('click', () => {\r\n\t\t\t\t\tlet listName = removeList[i].parentNode.childNodes[1].innerHTML;\r\n\r\n\t\t\t\t\tdelete tinyTerms.uploadedLists[listName];\r\n\r\n\t\t\t\t\t// Delete list from nav\r\n\t\t\t\t\tlocalforage.setItem('tinyTerms.uploadedLists', tinyTerms.uploadedLists, () => {\r\n\t\t\t\t\t\tremoveList[i].parentNode.removeChild(insertPoint.nextSibling);\r\n\t\t\t\t\t\tremoveList[i].parentNode.parentNode.removeChild(document.querySelector('.' + makeSafeClass(listName)));\r\n\r\n\t\t\t\t\t\t// Delete list references\r\n\t\t\t\t\t\tlocalforage.removeItem(tinyTerms.storedName).then(function () {\r\n\t\t\t\t\t\t\tlocalforage.removeItem(tinyTerms[tinyTerms.pickedList]).then(function () {\r\n\t\t\t\t\t\t\t\tlocalforage.removeItem(\"tinyTermsDefault\");\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tdocument.querySelector('.delete-cancel').addEventListener('click', () => {\r\n\t\t\t\t\tremoveList[i].parentNode.removeChild(insertPoint.nextSibling);\r\n\t\t\t\t\tremoveList[i].classList.remove('hidden');\r\n\t\t\t\t\tdocument.querySelector('.create-list').classList.remove('hidden');\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// Upload list button\r\n\tdocument.querySelector('.upload-info').addEventListener('click', (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tlet modal = document.querySelector('.m-modal');\r\n\r\n\t\t// Bring up modal\r\n\t\tmodal.classList.remove('hidden');\r\n\t\tmodal.style.zIndex = \"101\";\r\n\t\tmodal.querySelector('.close').addEventListener('click', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\thideModal(true);\r\n\t\t});\r\n\r\n\t\tlet view = `<header>\r\n                        <h2 class=\"\">Upload a list</h2>\r\n                    </header>\r\n                    <p>Create your very own list of Tiny Terms! For more info please visit:</p>\r\n                    <a target=\"_blank\" href=\"http://www.tiny-terms.com\">http://www.tiny-terms.com</a>\r\n                    \r\n                    <div class=\"list-uploader\">\r\n                        <label>List Name (max 25 characters)</label>\r\n                        <input class=\"upload-name\" type=\"text\" placeholder=\"Enter list name\">\r\n                        <label>List URL</label>\r\n                        <input class=\"upload-sheet\" type=\"text\" placeholder=\"Paste list URL\">\r\n                        <button class=\"upload-list\">Upload</button>\r\n                    </div>`;\r\n\r\n\t\t// Add view\r\n\t\tmodal.querySelector('.content').innerHTML += view;\r\n\r\n\t\twindow.addEventListener(\"keypress\", function (e) {\r\n\t\t\tlet inputName = document.querySelector('.upload-name').value;\r\n\t\t\tlet inputSheet = document.querySelector('.upload-sheet').value;\r\n\r\n\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\tuploadList(inputName, inputSheet);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.querySelector('.upload-list').addEventListener('click', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tlet inputName = document.querySelector('.upload-name').value;\r\n\t\t\tlet inputSheet = document.querySelector('.upload-sheet').value;\r\n\r\n\t\t\tuploadList(inputName, inputSheet);\r\n\t\t});\r\n\t});\r\n\tfunction uploadList(inputName, inputSheet) {\r\n\t\tinputName = inputName.substring(0, 25);\r\n\r\n\t\tif (inputName.length === 0) {\r\n\t\t\tdocument.querySelector('.upload-name').style.border = \"1px solid #ff0000\";\r\n\t\t\tdocument.querySelector('.upload-name').placeholder = \"Please enter a name\";\r\n\t\t}\r\n\t\tif (inputName.length > 0 && inputSheet.length > 0) {\r\n\r\n\t\t\t// Check valid URL\r\n\t\t\tif (checkURL(inputSheet) === true) {\r\n\t\t\t\tlocalforage.getItem('tinyTerms.uploadedLists', function (err, uploadedLists) {\r\n\t\t\t\t\ttinyTerms.uploadedLists[inputName] = {\r\n\t\t\t\t\t\tname: inputName,\r\n\t\t\t\t\t\tcategory: 'custom',\r\n\t\t\t\t\t\tsheetURL: inputSheet\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlocalforage.setItem('tinyTerms.uploadedLists', tinyTerms.uploadedLists, () => {\r\n\t\t\t\t\t\thideModal(true);\r\n\t\t\t\t\t\tlet customlist = '<div class=\"' + makeSafeClass(inputName) + '\"><span class=\"custom-list\"></span><a href=\"#\">' + inputName + '</a></div>';\r\n\t\t\t\t\t\tlet homeWrapper = document.querySelector('.m-menu');\r\n\t\t\t\t\t\thomeWrapper.querySelector('.choose-list').getElementsByTagName('nav')[0].innerHTML += customlist;\r\n\t\t\t\t\t\tnavListeners();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdocument.querySelector('.upload-sheet').style.border = \"1px solid #ff0000\";\r\n\t\t\t\tdocument.querySelector('.upload-sheet').value = \"\";\r\n\t\t\t\tdocument.querySelector('.upload-sheet').placeholder = \"Please enter a valid Sheets URL\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","// Imports\nimport tinyTerms from \"app\";\nimport { showHome } from \"homeScreen\";\n\n// Exports\nexport {\n\tready,\n\tcl,\n\tclv,\n\tbuildData,\n\tcheckSameDay,\n\tarrayCheck,\n\tcheckConnection,\n\tmakeSafeClass,\n\tgetTodaysDate,\n\tcheckURL,\n\terrorAlert,\n\talertMsg,\n\tpickRandom,\n\tclickListener,\n\tcountLines,\n\tgetTimeComplete,\n\tcheckQuery,\n\tsortArrayByKey,\n\tappBlur,\n\tjsonp,\n\tfindKeys,\n\tupdateDataCount,\n\tgetCSS\n};\n\n// JS ready\nfunction ready(fn) {\n\tif (document.readyState != \"loading\") {\n\t\tfn();\n\t}\n\telse {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", fn);\n\t}\n}\n\n// Console log -> cl\nfunction cl(log) {\n\tconsole.log(log);\n}\n\n// Console log plus value\nfunction clv(term, log) {\n\tconsole.log(term + \"= \" + log);\n}\n\n// Alert errors\nconst errorAlert = function errorAlert(message, cb) {\n\n\twindow.onerror = (errorMsg, url, lineNumber, column, errorObj) => {\n\t\tlet modal = document.querySelector('.m-modal');\n\t\tmodal.classList.remove(\"hidden\");\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"modal-active\");\n\n\t\tlet view = `<header>\n                        <h2 class=\"\">Uh oh!</h2>\n                    </header>\n                    <br>\n                    <h3>${message}</h3>\n                    <p><strong>Here's the exact problem:</strong></p>\n                    <p>'Error: ${errorMsg}</p> \n                    <p>Script: ${url}</p> \n                    <p>Line: ${lineNumber}</p>\n                    <p>Column: ${column}</p> \n                    <p>StackTrace: ${errorObj}</p>\n\n                    <button class=\"home-btn\">Close</button>\n                    `;\n\n\t\t// Add view\n\t\tmodal.querySelector(\".content\").innerHTML += view;\n\t\tmodal.classList.add('onboard');\n\t\tcb();\n\t\tdocument.querySelector(\".home-btn\").addEventListener(\"click\", (e) => {\n\t\t\te.preventDefault();\n\t\t\tshowHome()\n\t\t});\n\t\treturn false;\n\t};\n}\n\n// Alert errors\nconst alertMsg = function alertMsg(message, cb) {\n\n\tlet modal = document.querySelector('.m-modal');\n\tmodal.classList.remove(\"hidden\");\n\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"modal-active\");\n\n\tlet view = `<header>\n\t\t\t\t\t<h2 class=\"\">Something's not right</h2>\n\t\t\t\t</header>\n\t\t\t\t<p>${message}</p>\n\n\t\t\t\t<button class=\"home-btn\">Close</button>\n\t\t\t\t`;\n\n\t// Add view\n\tmodal.querySelector(\".content\").innerHTML += view;\n\tmodal.classList.add('onboard');\n\tcb();\n\treturn false;\n}\n\n// Gets data from Google Sheets\nconst buildData = function buildData(data) {\n\tlet columnName = data.Sheet1.columnNames[1];\n\n\ttinyTerms[tinyTerms.pickedList].speechLang = columnName;\n\ttinyTerms[tinyTerms.pickedList].dictFrom = data.Sheet1.elements[0][columnName];\n\ttinyTerms[tinyTerms.pickedList].dictTo = data.Sheet1.elements[1][columnName];\n\ttinyTerms[tinyTerms.pickedList].action = data.Sheet1.elements[2][columnName];\n\ttinyTerms[tinyTerms.pickedList].terms = tinyTerms[tinyTerms.pickedList].terms || {};\n\n\tfor (let i = 0; i < data.Sheet1.elements.length; i++) {\n\t\tlet termContent = data.Sheet1.elements[i].Term;\n\t\tlet definitionContent = data.Sheet1.elements[i].Definition;\n\t\tlet supportContent = data.Sheet1.elements[i].Support;\n\n\t\ttinyTerms[tinyTerms.pickedList].terms[termContent] = {};\n\t\ttinyTerms[tinyTerms.pickedList].terms[termContent].term = termContent;\n\t\ttinyTerms[tinyTerms.pickedList].terms[termContent].definition = definitionContent;\n\t\ttinyTerms[tinyTerms.pickedList].terms[termContent].support = supportContent;\n\t}\n\ttinyTerms.postBuildCallback();\n};\n\n// Check for network connection\nconst checkConnection = function checkConnection() {\n\n\tlet networkState = navigator.connection.type;\n\tlet states = {};\n\n\tstates[Connection.UNKNOWN] = 'Unknown';\n\tstates[Connection.ETHERNET] = 'Ethernet';\n\tstates[Connection.WIFI] = 'WiFi';\n\tstates[Connection.CELL_2G] = '2G';\n\tstates[Connection.CELL_3G] = '3G';\n\tstates[Connection.CELL_4G] = '4G';\n\tstates[Connection.CELL] = 'Cell';\n\tstates[Connection.NONE] = 'None';\n\n\treturn states[networkState];\n}\n\n// Count number of lines of text\nconst countLines = function countLines(target) {\n\tlet style = window.getComputedStyle(target, null);\n\tlet height = parseInt(style.getPropertyValue(\"height\"));\n\tlet font_size = parseInt(style.getPropertyValue(\"font-size\"));\n\tlet line_height = parseInt(style.getPropertyValue(\"line-height\"));\n\tlet box_sizing = style.getPropertyValue(\"box-sizing\");\n\n\tif (isNaN(line_height)) line_height = font_size * 1.2;\n\n\tif (box_sizing == 'border-box') {\n\t\tlet padding_top = parseInt(style.getPropertyValue(\"padding-top\"));\n\t\tlet padding_bottom = parseInt(style.getPropertyValue(\"padding-bottom\"));\n\t\tlet border_top = parseInt(style.getPropertyValue(\"border-top-width\"));\n\t\tlet border_bottom = parseInt(style.getPropertyValue(\"border-bottom-width\"));\n\t\theight = height - padding_top - padding_bottom - border_top - border_bottom\n\t}\n\tlet lines = Math.ceil(height / line_height);\n\treturn lines;\n}\n\n// Checks if the same or new day\nfunction checkSameDay() {\n\tlet todaysDate = getTodaysDate();\n\tlet storedDate = [];\n\n\t// Get date last stored\n\tstoredDate = Array.from(\n\t\ttinyTerms[tinyTerms.pickedList].storedData.dateOpened\n\t);\n\n\t// Check if same day\n\tif (arrayCheck(todaysDate, storedDate) === true) {\n\t\tif (tinyTerms[tinyTerms.pickedList].ops.addDay === true) {\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.newDay = true;\n\t\t}\n\t\telse {\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.newDay = false;\n\t\t}\n\t}\n\telse {\n\t\t// Otherwise a new day\n\t\ttinyTerms[tinyTerms.pickedList].storedData.newDay = true;\n\t}\n}\n\n// Creates array of day and month\nfunction getTodaysDate() {\n\t// Get current day + month\n\tlet todayDate = [];\n\tlet day = new Date().getDate();\n\tlet month = new Date().getMonth();\n\n\ttodayDate.push([day, month]);\n\n\treturn todayDate;\n}\n\n// Creates array of day, month, hour, minute, second\nfunction getTimeComplete() {\n\t// Get complete date time value\n\tlet timeComplete = [];\n\tlet day = new Date().getDate();\n\tlet month = new Date().getMonth();\n\tlet hour = new Date().getHours();\n\tlet minute = new Date().getMinutes();\n\tlet second = new Date().getSeconds();\n\n\ttimeComplete.push([day, month, hour, minute, second]);\n\n\treturn timeComplete;\n}\n\n// Validate URL\nconst checkURL = function checkURL(str) {\n\tlet a = document.createElement(\"a\");\n\ta.href = str;\n\treturn a.host && a.host != window.location.host;\n};\n\n// Makes a safe class name\nconst makeSafeClass = function makeSafeClass(name) {\n\treturn name.replace(/[^a-z0-9]/g, function (s) {\n\t\tlet c = s.charCodeAt(0);\n\t\tif (c == 32) return \"-\";\n\t\tif (c >= 65 && c <= 90) return \"_\" + s.toLowerCase();\n\t\treturn \"__\" + (\"000\" + c.toString(16)).slice(-4);\n\t});\n};\n\n// Check if arrays are the same\nfunction arrayCheck(arr1, arr2) {\n\t// If same return true\n\tif (JSON.stringify(arr1) == JSON.stringify(arr2)) {\n\t\treturn true;\n\t}\n\t// Else false\n\treturn false;\n}\n\n// Adds click functionality to selectors\nfunction clickListener(elements, clickFunction) {\n\tfor (let i = 0; i < elements.length; i++) {\n\t\telements[i].addEventListener(\"click\", e => {\n\t\t\te.preventDefault();\n\t\t\tclickFunction(i);\n\t\t});\n\t}\n}\n\n// Get a random term\nfunction pickRandom(objectList) {\n\tlet keys = Object.keys(objectList);\n\tlet pickedTerm = keys[keys.length * Math.random() << 0];\n\treturn pickedTerm;\n}\n\n// Check if two words the same\nfunction checkQuery(item1, item2) {\n\tif (item1 === item2) return true;\n\tif (item1.toUpperCase() === item2.toUpperCase()) return true;\n\n\t// Perform fuzzy comparison\n\tlet getBigrams = function (string) {\n\t\tlet i, j, ref, s, v;\n\t\ts = string.toLowerCase();\n\t\tv = new Array(s.length - 1);\n\t\tfor ((i = (j = 0)), (ref = v.length); j <= ref; i = (j += 1)) {\n\t\t\tv[i] = s.slice(i, i + 2);\n\t\t}\n\t\treturn v;\n\t};\n\tlet stringSimilarity = function (str1, str2) {\n\t\tlet hit_count, j, k, len, len1, pairs1, pairs2, union, x, y;\n\t\tif (str1.length > 0 && str2.length > 0) {\n\t\t\tpairs1 = getBigrams(str1);\n\t\t\tpairs2 = getBigrams(str2);\n\t\t\tunion = pairs1.length + pairs2.length;\n\t\t\thit_count = 0;\n\t\t\tfor ((j = 0), (len = pairs1.length); j < len; j++) {\n\t\t\t\tx = pairs1[j];\n\t\t\t\tfor ((k = 0), (len1 = pairs2.length); k < len1; k++) {\n\t\t\t\t\ty = pairs2[k];\n\t\t\t\t\tif (x === y) {\n\t\t\t\t\t\thit_count++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hit_count > 0) {\n\t\t\t\treturn 2.0 * hit_count / union;\n\t\t\t}\n\t\t}\n\t\treturn 0.0;\n\t};\n\tlet relevance = stringSimilarity(item1, item2);\n\tif (relevance > tinyTerms[tinyTerms.pickedList].ops.wordAccuracy)\n\t\treturn \"mispelled\";\n\n\t// Else false\n\treturn false;\n}\n\n// When user navigates away from page\nconst appBlur = function appBlur() {\n\tlet hidden = \"hidden\";\n\n\t// Standards:\n\tif (hidden in document)\n\t\tdocument.addEventListener(\"visibilitychange\", onchange);\n\telse if ((hidden = \"mozHidden\") in document)\n\t\tdocument.addEventListener(\"mozvisibilitychange\", onchange);\n\telse if ((hidden = \"webkitHidden\") in document)\n\t\tdocument.addEventListener(\"webkitvisibilitychange\", onchange);\n\telse if ((hidden = \"msHidden\") in document)\n\t\tdocument.addEventListener(\"msvisibilitychange\", onchange);\n\telse if (\"onfocusin\" in document)\n\t\t// IE 9 and lower:\n\t\tdocument.onfocusin = (document.onfocusout = onchange);\n\telse\n\t\t// All others:\n\t\twindow.onpageshow = (window.onpagehide = (window.onfocus = (window.onblur = onchange)));\n\n\tfunction onchange(evt) {\n\t\tlet v = \"visible\",\n\t\t\th = \"hidden\",\n\t\t\tevtMap = {\n\t\t\t\tfocus: v,\n\t\t\t\tfocusin: v,\n\t\t\t\tpageshow: v,\n\t\t\t\tblur: h,\n\t\t\t\tfocusout: h,\n\t\t\t\tpagehide: h\n\t\t\t};\n\n\t\tevt = evt || window.event;\n\t\tif (evt.type in evtMap) {\n\t\t\t//cl(evtMap[evt.type]);\n\t\t}\n\t\telse {\n\t\t\tlocation.reload();\n\t\t}\n\t}\n\n\t// set the initial state (but only if browser supports the Page Visibility API)\n\tif (document[hidden] !== undefined)\n\t\tonchange({\n\t\t\ttype: document[hidden] ? \"blur\" : \"focus\"\n\t\t});\n};\n\n// Order array based on nested key\nconst sortArrayByKey = function sortArrayByKey(arr, key, reverse) {\n\tlet sortOrder = 1;\n\tif (reverse) {\n\t\tsortOrder = -1;\n\t}\n\treturn arr.sort(function (a, b) {\n\t\tlet x = a[1][key];\n\t\tlet y = b[1][key];\n\t\treturn sortOrder * (x < y ? -1 : x > y ? 1 : 0);\n\t});\n};\n\n// Creates JSONP requests\nconst jsonp = function jsonp(uri) {\n\treturn new Promise(function (resolve, reject) {\n\t\tlet id = \"_\" + Math.round(10000 * Math.random());\n\t\tlet callbackName = \"jsonp_callback_\" + id;\n\t\twindow[callbackName] = function (data) {\n\t\t\tdelete window[callbackName];\n\t\t\tlet ele = document.getElementById(id);\n\t\t\tele.parentNode.removeChild(ele);\n\t\t\tresolve(data);\n\t\t};\n\n\t\tlet src = uri + \"&callback=\" + callbackName;\n\t\tlet script = document.createElement(\"script\");\n\t\tscript.src = src;\n\t\tscript.id = id;\n\t\tscript.addEventListener(\"error\", reject);\n\t\t(document.getElementsByTagName(\"head\")[0] ||\n\t\t\tdocument.body ||\n\t\t\tdocument.documentElement)\n\t\t\t.appendChild(script);\n\t});\n};\n\n// Find all keys in object ! Potentially cyclicle !\nconst findKeys = function findKeys(obj, key) {\n\tlet val = obj[key];\n\tlet keysList = [];\n\n\tfor (val in obj) {\n\t\tif (obj[val] === key) {\n\t\t\tkeysList.push(obj[val]);\n\t\t}\n\t}\n\treturn keysList;\n};\n\n// Handles count of a type of data\nconst updateDataCount = function updateDataCount(\n\tobjectParent,\n\tnewProps,\n\tbaseValue\n) {\n\t// If no viewed data, create new\n\tif (!objectParent.hasOwnProperty(newProps)) {\n\t\tfor (let value of newProps) {\n\t\t\tobjectParent[value] = baseValue;\n\t\t}\n\t}\n\telse {\n\t\t// If viewed data exists\n\t\t// Update count\n\t\tfor (let value of newProps) {\n\t\t\tif (objectParent.hasOwnProperty(value)) {\n\t\t\t\tobjectParent[value] += 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobjectParent[value] = baseValue;\n\t\t\t}\n\t\t}\n\t}\n\t// Pass back final object\n\treturn objectParent;\n};\n\n// Returns a CSS property for an elements\nconst getCSS = function getCSS(style, selector) {\n\tfor (let i = 0; i < document.styleSheets.length; i++) {\n\t\tlet mysheet = document.styleSheets[i];\n\t\tlet myrules = mysheet.cssRules ? mysheet.cssRules : mysheet.rules;\n\t\tfor (let j = 0; j < myrules.length; j++) {\n\t\t\tif (\n\t\t\t\tmyrules[j].selectorText &&\n\t\t\t\tmyrules[j].selectorText.toLowerCase() === selector\n\t\t\t) {\n\t\t\t\treturn myrules[j].style[style];\n\t\t\t}\n\t\t}\n\t}\n};","\r\n// Imports\r\nimport { cl, clv, pickRandom, sortArrayByKey } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\n\r\n// Exports\r\nexport { getListOfTerms };\r\n\r\n// Creates a list of terms\r\nconst getListOfTerms = function getListOfTerms() {\r\n\tlet i = 0;\r\n\tlet j = 0;\r\n\tlet listOfTerms = [];\r\n\tlet scannedTerms = [];\r\n\tconst dataLength = Object.keys(tinyTerms[tinyTerms.pickedList].terms).length;\r\n\r\n\t// Prevent overflow\r\n\tif (tinyTerms[tinyTerms.pickedList].ops.displayedTerms > dataLength) {\r\n\t\ttinyTerms[tinyTerms.pickedList].ops.displayedTerms = dataLength;\r\n\t}\r\n\r\n\t// First time app opened\r\n\tif (tinyTerms[tinyTerms.pickedList].storedData.firstTime === undefined) {\r\n\r\n\t\twhile (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n\t\t\tlet pickedTerm = pickRandom(tinyTerms[tinyTerms.pickedList].terms);\r\n\r\n\t\t\t// Ensure term hasn't been already scanned\r\n\t\t\tif (!listOfTerms.includes(pickedTerm)) {\r\n\t\t\t\tlistOfTerms.push(pickedTerm);\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// App opened before\r\n\telse {\r\n\r\n\t\t// Add reminder for previous incorrect term\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.incorrectTerms = tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms || {};\r\n\r\n\t\tif (Object.keys(tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms).length > 0) {\r\n\r\n\t\t\tlet reminderTerm;\r\n\r\n\t\t\t// Add reminded terms list\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.remindedTerms = tinyTerms[tinyTerms.pickedList].storedData.remindedTerms || {};\r\n\r\n\t\t\t// Keep reminded term the same\r\n\t\t\tif (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder === undefined) {\r\n\t\t\t\ttinyTerms[tinyTerms.pickedList].storedData.dailyReminder = {};\r\n\t\t\t\treminderTerm = pickRandom(tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms);\r\n\t\t\t\ttinyTerms[tinyTerms.pickedList].storedData.dailyReminder[reminderTerm] = tinyTerms[tinyTerms.pickedList].terms[reminderTerm].definition;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treminderTerm = tinyTerms[tinyTerms.pickedList].storedData.dailyReminder;\r\n\t\t\t\treminderTerm = Object.getOwnPropertyNames(reminderTerm);\r\n\t\t\t}\r\n\r\n\t\t\t// Add to terms\r\n\t\t\tlistOfTerms.push(reminderTerm);\r\n\r\n\t\t\t// Remove from incorrect terms\r\n\t\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms[reminderTerm];\r\n\r\n\t\t\t// Add to list of reminded terms\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.remindedTerms[reminderTerm] = tinyTerms[tinyTerms.pickedList].terms[reminderTerm].definition;\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\t// Choose terms to  display\r\n\t\twhile (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n\t\t\tlet viewedLength = Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length;\r\n\r\n\t\t\t// If all terms viewed \r\n\t\t\tif ((viewedLength + i) === dataLength) {\r\n\t\t\t\tlet viewedSorted = [];\r\n\r\n\t\t\t\t// Convert viewed terms to array\r\n\t\t\t\tfor (let term in tinyTerms[tinyTerms.pickedList].storedData.viewedTerms) {\r\n\t\t\t\t\tviewedSorted.push([term, tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term]]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If reminder term picked remove from selection\r\n\t\t\t\tif (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder !== undefined) {\r\n\r\n\t\t\t\t\tfor (let m = viewedSorted.length - 1; m >= 0; m--) {\r\n\r\n\t\t\t\t\t\tif (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder.hasOwnProperty(viewedSorted[m][0])) {\r\n\t\t\t\t\t\t\tviewedSorted.splice(m, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Sort array by view count\r\n\t\t\t\tviewedSorted = sortArrayByKey(viewedSorted, 'viewCount');\r\n\r\n\t\t\t\t// Finish off iterator with lowest viewed terms\r\n\t\t\t\twhile (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n\t\t\t\t\tlistOfTerms.push(viewedSorted[i][0]);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n                \r\n\t\t\t\t// Overflow protection\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\t// Still unviewed terms in data\r\n\t\t\telse {\r\n\t\t\t\tlet pickedTerm = pickRandom(tinyTerms[tinyTerms.pickedList].terms);\r\n\r\n\t\t\t\t// Ensure term hasn't been already scanned\r\n\t\t\t\tif (!scannedTerms.includes(pickedTerm)) {\r\n\t\t\t\t\tscannedTerms.push(pickedTerm);\r\n\r\n\t\t\t\t\t// Ensure term not viewed before\r\n\t\t\t\t\tif (!tinyTerms[tinyTerms.pickedList].storedData.viewedTerms.hasOwnProperty(pickedTerm)) {\r\n\t\t\t\t\t\tlistOfTerms.push(pickedTerm);\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Overflow protection\r\n\t\t\tif (j > 10000) {\r\n\t\t\t\ti = tinyTerms[tinyTerms.pickedList].ops.displayedTerms;\r\n\t\t\t}\r\n\t\t\tj++;\r\n\t\t}\r\n\t}\r\n\t// Return final list of terms\r\n\treturn listOfTerms;\r\n}","\r\n// Imports\r\nimport { cl, clv, clickListener } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\nimport { hideModal } from 'termInteraction';\r\nimport { createNewQuery } from 'queryInteraction';\r\n\r\n// Exports\r\nexport { onboardShow };\r\n\r\n// Show home screen\r\nconst onboardShow = function onboardShow() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let onBoardText = document.querySelector('.m-onboarding');\r\n    let topTerm = document.querySelectorAll('.m-term-wrapper')[0];\r\n    let definitionHolder = topTerm.querySelector('.definition-holder');\r\n\tlet topBtn = topTerm.getElementsByTagName('button')[0];\r\n\r\n    tinyTerms.tutComplete = false;\r\n    localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n\r\n    // Onboard - Stage 1\r\n    modal.classList.remove('hidden');\r\n    document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n    let view = `<header>\r\n                    <h2 class=\"icon-child\">Welcome to Tiny Terms!</h2>\r\n                </header>\r\n                <p>Looks like this is your first time here, so let's go over some basics before you get started.</p>\r\n                <button class=\"onboard-1\">Let's go!</button>\r\n                <a href=\"#\" class=\"close-tut\">Skip the tutorial</a>\r\n                `;\r\n    modal.querySelector('.content').innerHTML = view;\r\n    modal.classList.add('onboard');\r\n    document.querySelector('.close-tut').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        hideModal(true);\r\n        modal.classList.remove('onboard');\r\n        tinyTerms.tutComplete = true;\r\n        localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n    });\r\n\r\n    document.querySelector('.onboard-1').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        onboardStage2();\r\n    });\r\n    function onboardStage2() {\r\n        hideModal(true);\r\n        topTerm.style.zIndex = \"100\";\r\n        topTerm.querySelector('.term-holder').classList.add('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.definition-wrapper').classList.add('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n        topBtn.setAttribute('disabled', 'true');\r\n        document.querySelector('.m-modal').style.cssText = \"display: none !important\";\r\n        onBoardText.classList.remove('hidden');\r\n\r\n        let view = `<p>This is one of the terms you will be learning, you get 5 each day.</p>\r\n                    <button class=\"onboard-2\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        let termOffset = topTerm.offsetTop + topTerm.offsetHeight;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        document.querySelector('.onboard-2').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage3();\r\n        });\r\n    }\r\n    function onboardStage3() {\r\n        topTerm.querySelector('.term-holder').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.term-views').classList.add('animated', 'pulse', 'infinite');\r\n        let view = `<p>On the right is the goal meter, fill this and the term is marked as complete.</p>\r\n                    <button class=\"onboard-3\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        onBoardText.classList.add('onboard-right');\r\n\r\n        document.querySelector('.onboard-3').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage4();\r\n        });\r\n    }\r\n    function onboardStage4() {\r\n        topTerm.querySelector('.term-views').classList.remove('animated', 'pulse', 'infinite');\r\n        topBtn.classList.add('animated', 'pulse', 'infinite');\r\n        \r\n\t\tlet timerOveride = setInterval(()=>{\r\n\t\t\ttopBtn.classList.remove('disabled');\r\n        \ttopBtn.removeAttribute('disabled');\r\n\t\t},100);\r\n\r\n        let view = `<p style=\"border:0; margin: 10px 0; padding: 0\">Press the reveal button to continue!</p>\r\n                    `;\r\n        onBoardText.innerHTML = view;\r\n\r\n        topBtn.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n\t\t\tclearInterval(timerOveride);\r\n            onboardStage5();\r\n        });\r\n    }\r\n    function onboardStage5() {\r\n        topBtn.classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.definition-wrapper').classList.remove('hidden');\r\n        topTerm.querySelector('.definition-holder').classList.add('animated', 'pulse', 'infinite');\r\n        topBtn.classList.add('disabled');\r\n\r\n\t\t// Prevent cheating\r\n\t\tlet goal = topTerm.querySelector('.count');\r\n\t\tlet goalCount = parseInt(goal.innerHTML);\r\n\r\n\t\tif (goalCount > 1) {\r\n\t\t\tgoalCount -= 1;\r\n\t\t\tgoal.innerHTML = goalCount;\r\n\t\t\tlet term = topTerm.querySelector('.term-holder').innerHTML;\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount = goalCount;\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.revealGoal[term] = goal.innerHTML = goalCount;\r\n\t\t\t // Save to storage\r\n        \tlocalforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\t\t}\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + definitionHolder.offsetHeight + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>This is the definition you need to learn, helpful information is displayed underneath.</p>\r\n                    <button class=\"onboard-5\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        onBoardText.classList.remove('onboard-right');\r\n\r\n        document.querySelector('.onboard-5').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage6();\r\n        });\r\n    }\r\n    function onboardStage6() {\r\n        topTerm.querySelector('.definition-holder').classList.remove('animated', 'pulse', 'infinite');\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>Tiny Terms uses spaced repetition, check back in an hour to add to the goal.</p>\r\n                    <button class=\"onboard-6\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        onBoardText.classList.add('onboard-right');\r\n\r\n        document.querySelector('.onboard-6').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage7();\r\n        });\r\n    }\r\n    function onboardStage7() {\r\n        topTerm.querySelector('.colour').classList.add('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.symbol').classList.add('animated', 'pulse', 'infinite');\r\n        document.querySelector('.query-holder').setAttribute('disabled', 'true');\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + definitionHolder.offsetHeight + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>You can add a colour and symbol to the term, the visual association will help you rememeber.</p>\r\n                    <button class=\"onboard-7\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        document.querySelector('.onboard-7').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage8();\r\n        });\r\n    }\r\n    function onboardStage8() {\r\n        topTerm.querySelector('.colour').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.symbol').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.style.zIndex = \"50\";\r\n        let queryWrap = document.querySelector('.m-query');\r\n        document.querySelector('.query-submit').setAttribute('disabled', 'true');\r\n        document.querySelector('.m-modal').style.cssText = \"\";\r\n        hideModal(true);\r\n\r\n        createNewQuery(true);\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        let termOffset = queryWrap.offsetTop + queryWrap.offsetHeight;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n        queryWrap.style.zIndex = \"100\";\r\n\r\n        let view = `<p>Each day you get a mini test to see how well you have rememebered, you can also unlock an extra test by completing at least one goal meter in a day.</p>\r\n                    <button class=\"onboard-8\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        document.querySelector('.onboard-8').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage9();\r\n        });\r\n    }\r\n    function onboardStage9() {\r\n        modal.classList.remove('hidden');\r\n        onBoardText.innerHTML = \"\";\r\n        onBoardText.classList.add('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n        let queryWrap = document.querySelector('.m-query');\r\n        document.querySelector('.query-holder').removeAttribute('disabled');\r\n        document.querySelector('.query-submit').removeAttribute('disabled');\r\n        \r\n\r\n        queryWrap.style.zIndex = \"50\";\r\n        queryWrap.classList.add('hidden');\r\n        topTerm.querySelector('.definition-wrapper').classList.remove('hidden');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"\">That's about it</h2>\r\n                    </header>\r\n                    <p>Fill the progress bar by completing the goal meters to finish the list! You get points for answering tests correctly and completing goal meters, use them to unlock cool stuff. <br><br>Good luck!</p>\r\n                    <button class=\"close-tut\">Close the tutorial</button>\r\n                    `;\r\n        modal.querySelector('.content').innerHTML = view;\r\n        modal.classList.add('onboard');\r\n        document.querySelector('.close-tut').addEventListener(\"click\", (e) => {\r\n            e.preventDefault();\r\n            hideModal(true);\r\n            tinyTerms.tutComplete = true;\r\n            localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n            modal.classList.remove('onboard');\r\n        });\r\n    }\r\n}","\r\n// Imports\r\nimport { cl, clv } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\nimport { showHome } from \"homeScreen\";\r\nimport { hideModal } from 'termInteraction';\r\n\r\n// Exports\r\nexport { navMenu, footerMenu, optionsDisplay };\r\n\r\n// Nav menu functions\r\nconst navMenu = function navMenu() {\r\n    let nav = document.querySelector('.m-nav').querySelectorAll('nav')[0];\r\n\r\n    showNav();\r\n\r\n    function showNav() {\r\n        document.getElementsByTagName('h1')[0].addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            document.querySelector('.m-nav').classList.toggle('hidden');\r\n            document.getElementsByTagName('body')[0].classList.toggle('nav-on');\r\n\r\n            setTimeout(()=>{hideNav()},100);\r\n        });\r\n    }\r\n\r\n    function hideNav() {\r\n        nav.querySelector('.close').addEventListener('click',(e)=>{\r\n            e.preventDefault();\r\n            hideNav();\r\n        });\r\n        document.querySelector('.nav-on').querySelector('.container').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            document.querySelector('.m-nav').classList.toggle('hidden');\r\n            document.getElementsByTagName('body')[0].classList.toggle('nav-on');\r\n\r\n            setTimeout(()=>{showNav()},100);\r\n        });\r\n    }\r\n\r\n    localforage.getItem(\"tinyTermsAllPicked\", function (err, tinyTermsAllPicked) {\r\n        tinyTerms.AllPicked = tinyTermsAllPicked || [];\r\n        let navHTML = nav.innerHTML;\r\n\r\n        for (let i = 0; i < tinyTerms.AllPicked.length; i++) {\r\n            navHTML += '<a href=\"#\">' + tinyTerms.AllPicked[i] + '</a>';\r\n        }\r\n        nav.innerHTML = navHTML;\r\n\r\n        let navItems = nav.querySelectorAll('a');\r\n        let i = 1;\r\n\r\n        do {\r\n            navItems[i].addEventListener('click', function (e) {\r\n\r\n                e.preventDefault();\r\n                tinyTerms.pickedList = this.innerHTML;\r\n\r\n                localforage.setItem('tinyTermsDefault', tinyTerms.pickedList, () => {\r\n                    location.reload();\r\n                });\r\n            });\r\n            i++\r\n        }\r\n        while (i < navItems.length);\r\n\r\n        document.querySelector('.view-all').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            showHome();\r\n        });\r\n    });\r\n}\r\n\r\n// Footer menu functions\r\nconst footerMenu = function footerMenu() {\r\n    let modal = document.querySelector('.m-modal');\r\n\r\n    document.querySelector('.refresh').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        location.reload();\r\n    });\r\n\r\n    document.querySelector('.store').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"icon-gift\">Store</h2>\r\n                    </header>\r\n                    <div class=\"options\">\r\n                        <p>Unlocks: (coming soon)</p>\r\n                        <a href=\"#\" class=\"icon-right-open points-neon-colours\">1000: Unlock neon colours</a>\r\n                        <a href=\"#\" class=\"icon-right-open points-life-glyphs\">5000: Unlock solid symbols</a>\r\n                        <a href=\"#\" class=\"icon-right-open points-metal-colours\">10000: Unlock metal colours</a>\r\n                    </div>\r\n                    `;\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n    });\r\n\r\n    document.querySelector('.stats').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"icon-chart-bar\">Progress</h2>\r\n                    </header>\r\n                    <div class=\"options\">\r\n                        <p>Unlocks: (coming soon)</p>\r\n                        <a href=\"#\" class=\"icon-right-open points-neon-colours\">1000: Unlock neon colours</a>\r\n                        <a href=\"#\" class=\"icon-right-open points-life-glyphs\">5000: Unlock solid symbols</a>\r\n                        <a href=\"#\" class=\"icon-right-open points-metal-colours\">10000: Unlock metal colours</a>\r\n                    </div>\r\n                    `;\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n    });\r\n}\r\n\r\n// Options menu\r\nconst optionsDisplay = function optionsDisplay() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let settingsBtn = document.querySelector('.settings');\r\n\r\n    settingsBtn.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"icon-cog-outline\">Options</h2>\r\n                    </header>\r\n                    <div class=\"options\">\r\n                        <p>Help</p>\r\n                        <a href=\"#\" class=\"icon-right-open show-tut\">Show the tutorial again</a>\r\n                        <a href=\"#\" class=\"icon-right-open\">Email a question</a>\r\n                        <p>More Options</p>\r\n                        <a href=\"#\" class=\"icon-right-open reset-list\">Reset list progress</a>\r\n                        <a href=\"#\" class=\"icon-right-open reset\">Reset the app</a>\r\n                        <p class=\"low-header\">Credits</p>\r\n                        <p><small>All design and development by Alex Plummer.</small><br>\r\n                        <small>Icons courtesy of <a href=\"http://www.toicon.com/authors/1\">Shannon E Thomas</a> at <a href=\"http://www.toicon.com\">toicon.com</a></small></p>\r\n                    </div>\r\n                    `;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        let resetList = document.querySelector('.reset-list');\r\n        let resetApp = document.querySelector('.reset');\r\n\r\n        document.querySelector('.show-tut').addEventListener('click', (e) => { e.preventDefault(); onboardShow() });\r\n\r\n        function resetMenu() {\r\n            if (document.querySelector('.delete-confirm') !== null) {\r\n                resetList.innerHTML = \"Reset list progress\";\r\n                resetApp.innerHTML = \"Reset the app\";\r\n                document.querySelector('.delete-confirm').parentNode.removeChild(document.querySelector('.delete-cancel'));\r\n                document.querySelector('.delete-confirm').parentNode.removeChild(document.querySelector('.delete-confirm'));\r\n            }\r\n        }\r\n        resetList.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            resetMenu();\r\n            resetList.innerHTML = \"Are you sure you want to delete progress for this list? (Can't undo)\";\r\n            resetList.parentNode.insertBefore(document.createElement(\"div\"), resetList.nextSibling);\r\n            resetList.nextSibling.innerHTML = '<button class=\"delete-cancel\">Cancel</button><button class=\"delete-confirm\">Confim</button>';\r\n\r\n            document.querySelector('.delete-confirm').addEventListener('click', () => {\r\n                delete tinyTerms[tinyTerms.pickedList];\r\n                localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n                location.reload();\r\n            });\r\n            document.querySelector('.delete-cancel').addEventListener('click', () => {\r\n                hideModal(true);\r\n            });\r\n        });\r\n        document.querySelector('.reset').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            resetMenu();\r\n            resetApp.innerHTML = \"Are you sure you want to delete all progress for the app? (Can't undo)\";\r\n            resetApp.parentNode.insertBefore(document.createElement(\"div\"), resetApp.nextSibling);\r\n            resetApp.nextSibling.innerHTML = '<button class=\"delete-cancel\">Cancel</button><button class=\"delete-confirm\">Confim</button>';\r\n\r\n            document.querySelector('.delete-confirm').addEventListener('click', () => {\r\n                localforage.clear().then(() => {\r\n                    location.reload();\r\n                });\r\n            });\r\n            document.querySelector('.delete-cancel').addEventListener('click', () => {\r\n                hideModal(true);\r\n            });\r\n        });\r\n    });\r\n}"]}