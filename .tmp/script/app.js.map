{"version":3,"sources":["app.js","appData.js","viewCreation.js","queryInteraction.js","termInteraction.js","homeScreen.js","helperFunctions.js","termCreation.js","introInstructions.js"],"names":["tinyTermsApp","appData","fonts","feather","viewCreate","termsToCreate","viewHTML","value","termValue","tinyTerms","pickedList","terms","term","definitionValue","definition","supportValue","support","termEncode","makeSafeClass","revealCounter","viewsCount","storedData","revealGoal","undefined","document","querySelector","innerHTML","action","newHolder","ops","revealGoalTarget","viewedTerms","colour","termWrapper","pickedColour","style","background","classList","add","color","symbol","pickedSymbol","revealCountdowns","revealBtn","querySelectorAll","i","length","revealTerm","parentNode","createRevealTimer","addHearts","heartHolder","heartsHTML","hearts","points","localforage","setItem","storedName","setScore","scoreHolder","score","progressBar","learnedTerms","completed","Object","keys","remaining","width","createNewQuery","bonus","randomTerm","queryTerms","correctTerms","incorrectTerms","cycledTerms","dailyQuery","pickRandom","hasOwnProperty","dailyReminder","queryHandler","dailyTerms","indexOf","remove","queryWrapper","queryHolder","querySubmit","resultHolder","parseInt","count","queryComplete","getElementsByTagName","window","addEventListener","e","keyCode","click","preventDefault","queryInput","checkQuery","winCase","loseCase","spelling","input","correct","placeholder","removeChild","revealedBtnHandler","clickListener","contains","countHolder","definitionWrapper","definitionHolder","viewCount","revealGoalCount","gameWon","modal","view","completeBonus","complete","dailyBonus","minutes","counterMins","seconds","counterSecs","remainingMinutes","remainingSeconds","startTime","timerEnded","Date","getTime","startTimer","nowTime","setAttribute","diffSecs","Math","floor","totalSecs","clearInterval","timerUpdate","timeout","checkCount","setInterval","buttonTimer","disabled","displayedMinutes","displayedSeconds","hiddenZero","textToSpeech","termHolder","TTS","speech","SpeechSynthesisUtterance","lang","speechLang","speechSynthesis","speak","text","locale","rate","alert","reason","k","dictionaryLookup","dictionaryBtn","encodeURI","dictFrom","dictTo","toLowerCase","jsonp","then","data","dictionaryResponses","findProp","obj","key","out","proto","prototype","ts","toString","hasOwn","bind","call","tuc","err","console","log","addColour","colourBtn","picker","colours","coloursHolder","colourListener","getAttribute","hideModal","pickSymbol","symbolBtn","symbolHTML","symbols","symbolListener","event","target","srcElement","trigger","modalClose","closeModal","showHome","setTimeout","uploadedLists","getItem","customListChoices","val","listName","name","listURL","sheetURL","homeWrapper","categoryBtn","categoryType","lists","listChoices","category","navListeners","listItem","location","reload","removeList","insertPoint","nextSibling","insertBefore","createElement","childNodes","removeItem","zIndex","inputName","inputSheet","uploadList","substring","checkURL","customlist","cl","ready","fn","readyState","errorAlert","message","cb","onerror","errorMsg","url","lineNumber","column","errorObj","alertMsg","buildData","columnName","Sheet1","columnNames","elements","termContent","Term","definitionContent","Definition","supportContent","Support","postBuildCallback","checkConnection","networkState","navigator","connection","type","states","Connection","UNKNOWN","ETHERNET","WIFI","CELL_2G","CELL_3G","CELL_4G","CELL","NONE","checkSameDay","todaysDate","getTodaysDate","storedDate","Array","from","dateOpened","arrayCheck","addDay","newDay","todayDate","day","getDate","month","getMonth","push","str","a","href","host","replace","s","c","charCodeAt","slice","arr1","arr2","JSON","stringify","clickFunction","objectList","pickedTerm","random","item1","item2","toUpperCase","getBigrams","string","j","ref","v","stringSimilarity","str1","str2","hit_count","len","len1","pairs1","pairs2","union","x","y","relevance","wordAccuracy","appBlur","hidden","onchange","onfocusin","onfocusout","onpageshow","onpagehide","onfocus","onblur","evt","h","evtMap","focus","focusin","pageshow","blur","focusout","pagehide","sortArrayByKey","arr","reverse","sortOrder","sort","b","uri","Promise","resolve","reject","id","round","callbackName","ele","getElementById","src","script","body","documentElement","appendChild","getListOfTerms","listOfTerms","scannedTerms","dataLength","displayedTerms","firstTime","includes","reminderTerm","remindedTerms","getOwnPropertyNames","viewedLength","viewedSorted","m","splice","onboardShow","onBoardText","topTerm","topBtn","tutComplete","onboardStage2","cssText","termOffset","offsetTop","offsetHeight","top","onboardStage3","onboardStage4","timerOveride","removeAttribute","onboardStage5","goal","goalCount","onboardStage6","onboardStage7","onboardStage8","queryWrap","onboardStage9","optionsDisplay","settingsBtn","resetList","resetApp","resetMenu","clear","debug","loadDelay","notLoaded","getLists","skipDefaultCheck","tinyTermsDefault","tutStatus","checkDefault","normalLoad","firstLoad","defaultlist","initialise","fetchData","Tabletop","init","callback","simpleSheet","appBuildHandler","pickedTerms","revealedTermCount","menuTrigger","tinyTerms$1"],"mappings":"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","file":"app.js","sourcesContent":["// Imports\r\nimport { ready, cl, clv, buildData, errorAlert, alertMsg, checkSameDay, checkConnection, arrayCheck, getTodaysDate, appBlur } from \"helperFunctions\";\r\nimport { getListOfTerms } from \"termCreation\";\r\nimport { revealedBtnHandler, dictionaryLookup, textToSpeech, addColour, hideModal, pickSymbol } from \"termInteraction\";\r\nimport { viewCreate, addHearts, setScore, progressBar } from \"viewCreation\";\r\nimport { createNewQuery } from \"queryInteraction\";\r\nimport { showHome } from \"homeScreen\";\r\nimport { onboardShow, optionsDisplay } from \"introInstructions\";\r\nimport appData from \"appData\";\r\n\r\n// Exports\r\nexport default tinyTerms;\r\n\r\n// App namespace\r\nlet tinyTerms = tinyTerms || {};\r\n\r\n// Global options\r\nlet ops = {\r\n\tdisplayedTerms: 5,\r\n\tcounterMins: 60,\r\n\tcounterSecs: 0,\r\n\trevealGoalTarget: 5,\r\n\twordAccuracy: 0.7,\r\n\taddDay: false,\r\n\tdebug: true,\r\n\tloadDelay: 2500,\r\n\tpoints: {\r\n\t\tcorrect: 50,\r\n\t\tdailyBonus: 10,\r\n\t\thearts: 3\r\n\t}\r\n};\r\n\r\n// Default list choices\r\ntinyTerms.listChoices = {\r\n\t\"Italian Verbs ITA-ENG\": {\r\n\t\tname: \"Italian Verbs ITA-ENG\",\r\n\t\tcategory: \"Language\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1Q1pmDXybg_GDB6bSXknuBET2Nm8L-Roi2Kj01SHm_WI/pubhtml\"\r\n\t},\r\n\t\"Computer Components\": {\r\n\t\tname: \"Computer Components\",\r\n\t\tcategory: \"Technology\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1Ho5Viqg71mIBlbyAIjLIqHEWRr4znDCLZSBtwVTtZk0/edit\"\r\n\t},\r\n\t\"Periodic Elements\": {\r\n\t\tname: \"Periodic Elements\",\r\n\t\tcategory: \"Science\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1sL3kTrZq3Hdb_iBo7hC8x9oGXXownlxmmdmmvALAPlU/edit#gid=0\"\r\n\t},\r\n\t\"Global Capital Cities\": {\r\n\t\tname: \"Global Capital Cities\",\r\n\t\tcategory: \"Culture\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1hU1pJSR2sp4g7C91prXqijBzNVZTJ4Qkip0rY4IuWaQ/pubhtml\"\r\n\t},\r\n\t\"Top 100 words ITA-ENG\": {\r\n\t\tname: \"Top 100 words ITA-ENG\",\r\n\t\tcategory: \"Language\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1gBNQk9jH7X2iRIbcZg3F5kbOTGgl9EvlJ65UkYHV6Mo/pubhtml\"\r\n\t},\r\n\t\"Italian Anatomy ITA-ENG\": {\r\n\t\tname: \"Italian Anatomy ITA-ENG\",\r\n\t\tcategory: \"Language\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/1lDCYm0E9y8IBHoS2JrEu6iPe4UJEkfU3dEywURhhqb0/pubhtml\"\r\n\t},\r\n\t\"Bee Anatomy\": {\r\n\t\tname: \"Bee Anatomy\",\r\n\t\tcategory: \"Science\",\r\n\t\tsheetURL: \"https://docs.google.com/spreadsheets/d/12-g6CDVGXIPTn5Va7rY6OC22ZS12p6av46p2LMht61I/pubhtml\"\r\n\t}\r\n};\r\n\r\n// Crash protection\r\nlet notLoaded = true;\r\n\r\nsetTimeout(() => {\r\n\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"loading\");\r\n\r\n\tif (notLoaded === true) {\r\n\t\tlet modal = document.querySelector('.m-modal');\r\n\t\tmodal.classList.remove(\"hidden\");\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"modal-active\");\r\n\r\n\t\tlet view = `<header>\r\n\t\t\t\t\t\t<h2 class=\"\">Uh oh!</h2>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<h3>Sorry something went wrong :(</h3>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<button class=\"home-btn\">Close</button>\r\n\t\t\t\t\t`;\r\n\r\n\t\t// Add view\r\n\t\tmodal.querySelector(\".content\").innerHTML += view;\r\n\t\tmodal.classList.add('onboard');\r\n\r\n\t\tdocument.querySelector(\".home-btn\").addEventListener(\"click\", (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tshowHome()\r\n\t\t});\r\n\t}\r\n}, 20000);\r\n\r\n// Initialise modules on load\r\nready(function () {\r\n\t\"use strict\";\r\n\tgetLists();\r\n});\r\n\r\n// Pick a list\r\nfunction getLists(skipDefaultCheck) {\r\n\tlet tinyTermsDefault;\r\n\r\n\tlocalforage.getItem(\"tinyTerms.tutComplete\", function (err, tutStatus) {\r\n\t\ttinyTerms.tutComplete = tutStatus;\r\n\r\n\t\t// Check for default list, used on very first load\r\n\t\tlocalforage.getItem(\"tinyTermsDefault\", function (err, value) {\r\n\t\t\ttinyTermsDefault = value;\r\n\r\n\t\t\tif (tinyTermsDefault === null) {\r\n\t\t\t\tnotLoaded = false;\r\n\t\t\t\tshowHome();\r\n\t\t\t} else {\r\n\t\t\t\tcheckDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tfunction checkDefault() {\r\n\t\t// Check for existing data of newly picked list\r\n\t\tlocalforage.getItem(\"tinyTerms\" + tinyTermsDefault, function (err, value) {\r\n\t\t\tif (value !== null) {\r\n\t\t\t\ttinyTerms.pickedList = tinyTermsDefault;\r\n\t\t\t\tnormalLoad(tinyTerms.pickedList);\r\n\t\t\t} \r\n\t\t\telse {\r\n\t\t\t\tif (navigator.connection !== undefined) {\r\n\t\t\t\t\tlet connection = checkConnection();\r\n\t\t\t\t\tnotLoaded = false;\r\n\r\n\t\t\t\t\tif (connection === 'Unknown' || connection === '2G' || connection === 'Cell' || connection === 'None') {\r\n\r\n\t\t\t\t\t\talertMsg(\"Please connect to the internet to download list, after it will be available offline.\", () => {\r\n\t\t\t\t\t\t\tdocument.querySelector(\".home-btn\").addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tshowHome()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tfirstLoad();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tfirstLoad();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction normalLoad(defaultlist) {\r\n\t\ttinyTerms.storedName = \"tinyTerms\" + defaultlist;\r\n\r\n\t\tlocalforage.getItem(\"tinyTerms\" + defaultlist, function (err, value) {\r\n\t\t\t// Set session storage to stored\r\n\t\t\ttinyTerms[tinyTerms.pickedList] = value;\r\n\r\n\t\t\t// Update stored ops\r\n\t\t\ttinyTerms[tinyTerms.pickedList].ops = ops;\r\n\t\t\tinitialise();\r\n\t\t});\r\n\t}\r\n}\r\n\r\n// Sets up new list, gets data\r\nconst firstLoad = function firstLoad() {\r\n\r\n\tlocalforage.getItem(\"tinyTermsDefault\", function (err, value) {\r\n\t\t// Set session storage to stored\r\n\t\ttinyTerms.pickedList = value;\r\n\r\n\t\t// Set picked list and create data object for it\r\n\t\ttinyTerms[tinyTerms.pickedList] = {};\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData = {};\r\n\t\ttinyTerms[tinyTerms.pickedList].ops = ops;\r\n\t\ttinyTerms.storedName = \"tinyTerms\" + tinyTerms.pickedList;\r\n\r\n\t\t// Set new list to storage, add as default\r\n\t\tlocalforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n\t\t// Add default lists to uploadedLists, same place as user upload\r\n\t\tlocalforage.getItem(\"tinyTerms.uploadedLists\", function (err, uploadedLists) {\r\n\t\t\tlet sheetURL;\r\n\r\n\t\t\tuploadedLists = uploadedLists || {};\r\n\t\t\t// If list from uploaded lists\r\n\t\t\tif (uploadedLists.hasOwnProperty(tinyTerms.pickedList)) {\r\n\t\t\t\tsheetURL = uploadedLists[tinyTerms.pickedList].sheetURL;\r\n\t\t\t}\r\n\t\t\t// Else from default lists\r\n\t\t\telse {\r\n\t\t\t\tsheetURL = tinyTerms.listChoices[tinyTerms.pickedList].sheetURL;\r\n\t\t\t}\r\n\r\n\t\t\t// Fetch data for list\r\n\t\t\tfetchData(sheetURL, firstTime);\r\n\t\t});\r\n\t});\r\n};\r\n\r\n// Fetches list data\r\nconst fetchData = function fetchData(sheetURL, postBuildCallback) {\r\n\r\n\t// Add a callback method\r\n\ttinyTerms.postBuildCallback = postBuildCallback;\r\n\r\n\t// Error handling for Tabletop\r\n\terrorAlert('Couldn\\'t load the list URL, did you copy it correctly?', () => {\r\n\r\n\t\t// Clear list references callback\r\n\t\tlocalforage.removeItem(tinyTerms.storedName).then(function () {\r\n\t\t\tlocalforage.removeItem(tinyTerms.pickedList);\r\n\t\t});\r\n\t\tnotLoaded = false;\r\n\t});\r\n\r\n\t// Get data from sheets\r\n\tTabletop.init({\r\n\t\tkey: sheetURL,\r\n\t\tcallback: buildData,\r\n\t\tsimpleSheet: false\r\n\t});\r\n};\r\n\r\n// Runs if first time app has run\r\nconst firstTime = function firstTime() {\r\n\r\n\twindow.onerror = \"\";\r\n\t// Create terms\r\n\tappBuildHandler();\r\n\r\n\t// Show intro onboarding\r\n\tif (tinyTerms.tutComplete === null) {\r\n\t\tonboardShow();\r\n\t}\r\n\r\n\t// Then set first time to false\r\n\ttinyTerms[tinyTerms.pickedList].storedData.firstTime = false;\r\n\r\n\t// Add to storage\r\n\tlocalforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n};\r\n\r\n// Initialises data and app\r\nconst initialise = function initialise() {\r\n\t// Error handling for Tabletop\r\n\terrorAlert('Couldn\\'t load the list, please try again.', () => {\r\n\r\n\t\t// Clear list references callback\r\n\t\tlocalforage.removeItem(tinyTerms.storedName).then(function () {\r\n\t\t\tlocalforage.removeItem(tinyTerms.pickedList);\r\n\t\t});\r\n\t\tnotLoaded = false;\r\n\t});\r\n\t// Check if a new day\r\n\tcheckSameDay();\r\n\r\n\t// Start build\r\n\tappBuildHandler();\r\n};\r\n\r\n// Calls functions to handle app creation and running\r\nconst appBuildHandler = function appBuildHandler() {\r\n\t// Get initial terms\r\n\tlet pickedTerms;\r\n\r\n\t// If same day, used daily terms\r\n\tif (tinyTerms[tinyTerms.pickedList].storedData.newDay === false) {\r\n\t\tpickedTerms = tinyTerms[tinyTerms.pickedList].storedData.dailyTerms;\r\n\t} else {\r\n\t\t// Else get new\r\n\t\tpickedTerms = getListOfTerms();\r\n\r\n\t\t// Clear daily goals\r\n\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.revealedTermCount;\r\n\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns;\r\n\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.dailyReminder;\r\n\r\n\t\t// Reset daily reveal bonus\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.revealGoal = tinyTerms[\r\n\t\t\ttinyTerms.pickedList\r\n\t\t].storedData.revealGoal || {};\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.revealGoal.complete = false;\r\n\r\n\t\t// Create query if revealed terms\r\n\t\tif (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms !== undefined) {\r\n\t\t\tcreateNewQuery();\r\n\t\t}\r\n\r\n\t\t// Create reminded terms default\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.remindedTerms = tinyTerms[\r\n\t\t\ttinyTerms.pickedList\r\n\t\t].storedData.remindedTerms || {};\r\n\t}\r\n\r\n\t// Create initial view\r\n\tviewCreate(pickedTerms);\r\n\tsetScore();\r\n\r\n\t// Create opened date, daily terms, viewed terms\r\n\ttinyTerms[tinyTerms.pickedList].storedData.dateOpened = getTodaysDate();\r\n\ttinyTerms[tinyTerms.pickedList].storedData.dailyTerms = pickedTerms;\r\n\r\n\t// Add to storage\r\n\tlocalforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n\t// Keep query active each day\r\n\ttinyTerms[tinyTerms.pickedList].storedData.queryComplete = tinyTerms[\r\n\t\ttinyTerms.pickedList\r\n\t].storedData.queryComplete || {};\r\n\r\n\t// Load query if it exists already\r\n\tif (\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.dailyQuery !== undefined &&\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.queryComplete !== true\r\n\t) {\r\n\t\tcreateNewQuery();\r\n\t}\r\n\r\n\t// Handles events for revealed terms\r\n\trevealedBtnHandler();\r\n\tdictionaryLookup();\r\n\ttextToSpeech();\r\n\taddColour();\r\n\tpickSymbol();\r\n\thideModal();\r\n\tprogressBar();\r\n\r\n\t// Shows options menu\r\n\toptionsDisplay();\r\n\r\n\t// Refresh window on blur\r\n\tappBlur();\r\n\r\n\t// App should have loaded by here\r\n\tnotLoaded = false;\r\n\r\n\t// Once loaded\r\n\tsetTimeout(\r\n\t\t() => {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"loading\");\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector(\".m-query\")\r\n\t\t\t\t.classList.add(\"animated\", \"slideInDown\");\r\n\t\t},\r\n\t\ttinyTerms[tinyTerms.pickedList].ops.loadDelay\r\n\t);\r\n\r\n\t// Set menu button listener\r\n\tlet menuTrigger = document.getElementsByTagName(\"h1\");\r\n\r\n\tmenuTrigger[0].addEventListener(\"click\", e => {\r\n\t\te.preventDefault();\r\n\t\tshowHome();\r\n\t});\r\n\r\n\t// Show onboard if incomplete\r\n\tif (tinyTerms.tutComplete === false) {\r\n\t\tonboardShow();\r\n\t}\r\n\r\n\t// Debug code\r\n\tif (tinyTerms[tinyTerms.pickedList].ops.debug === true) {\r\n\t\tcl(tinyTerms);\r\n\t}\r\n};","// App data\r\n\r\nexport default {\r\n    fonts: {\r\n        feather: [\r\n            \"icon-lines-and-angles_accommodate\",\r\n            \"icon-lines-and-angles_adapt\",\r\n            \"icon-lines-and-angles_add\",\r\n            \"icon-lines-and-angles_adjust\",\r\n            \"icon-lines-and-angles_agitate\",\r\n            \"icon-lines-and-angles_agree\",\r\n            \"icon-lines-and-angles_aid\",\r\n            \"icon-lines-and-angles_alarm\",\r\n            \"icon-lines-and-angles_alert\",\r\n            \"icon-lines-and-angles_amaze\",\r\n            \"icon-lines-and-angles_amplify\",\r\n            \"icon-lines-and-angles_analyze\",\r\n            \"icon-lines-and-angles_announce\",\r\n            \"icon-lines-and-angles_arrest\",\r\n            \"icon-lines-and-angles_ascend\",\r\n            \"icon-lines-and-angles_ask\",\r\n            \"icon-lines-and-angles_assist\",\r\n            \"icon-lines-and-angles_attract\",\r\n            \"icon-lines-and-angles_augment\",\r\n            \"icon-lines-and-angles_bake\",\r\n            \"icon-lines-and-angles_balance\",\r\n            \"icon-lines-and-angles_battle\",\r\n            \"icon-lines-and-angles_be\",\r\n            \"icon-lines-and-angles_believe\",\r\n            \"icon-lines-and-angles_birth\",\r\n            \"icon-lines-and-angles_blaze\",\r\n            \"icon-lines-and-angles_blend\",\r\n            \"icon-lines-and-angles_bloom\",\r\n            \"icon-lines-and-angles_blow\",\r\n            \"icon-lines-and-angles_bookmark\",\r\n            \"icon-lines-and-angles_bootleg\",\r\n            \"icon-lines-and-angles_bounce\",\r\n            \"icon-lines-and-angles_break\",\r\n            \"icon-lines-and-angles_brew\",\r\n            \"icon-lines-and-angles_broadcast\",\r\n            \"icon-lines-and-angles_browse\",\r\n            \"icon-lines-and-angles_build\",\r\n            \"icon-lines-and-angles_burn\",\r\n            \"icon-lines-and-angles_bury\",\r\n            \"icon-lines-and-angles_buy\",\r\n            \"icon-lines-and-angles_caffeinate\",\r\n            \"icon-lines-and-angles_calculate\",\r\n            \"icon-lines-and-angles_calibrate\",\r\n            \"icon-lines-and-angles_carry\",\r\n            \"icon-lines-and-angles_carve\",\r\n            \"icon-lines-and-angles_cast\",\r\n            \"icon-lines-and-angles_catch\",\r\n            \"icon-lines-and-angles_cease\",\r\n            \"icon-lines-and-angles_celebrate\",\r\n            \"icon-lines-and-angles_challenge\",\r\n            \"icon-lines-and-angles_charge\",\r\n            \"icon-lines-and-angles_charm\",\r\n            \"icon-lines-and-angles_chart\",\r\n            \"icon-lines-and-angles_chat\",\r\n            \"icon-lines-and-angles_choose\",\r\n            \"icon-lines-and-angles_chop\",\r\n            \"icon-lines-and-angles_clean\",\r\n            \"icon-lines-and-angles_cleanse\",\r\n            \"icon-lines-and-angles_climb\",\r\n            \"icon-lines-and-angles_drum\",\r\n            \"icon-lines-and-angles_eat\",\r\n            \"icon-lines-and-angles_edit\",\r\n            \"icon-lines-and-angles_enhance\",\r\n            \"icon-lines-and-angles_enlarge\",\r\n            \"icon-lines-and-angles_enter\",\r\n            \"icon-lines-and-angles_equal\",\r\n            \"icon-lines-and-angles_erase\",\r\n            \"icon-lines-and-angles_examine\",\r\n            \"icon-lines-and-angles_experiment\",\r\n            \"icon-lines-and-angles_explore\",\r\n            \"icon-lines-and-angles_extrude\",\r\n            \"icon-lines-and-angles_feed\",\r\n            \"icon-lines-and-angles_fight\",\r\n            \"icon-lines-and-angles_fill\",\r\n            \"icon-lines-and-angles_film\",\r\n            \"icon-lines-and-angles_filter\",\r\n            \"icon-lines-and-angles_find\",\r\n            \"icon-lines-and-angles_finish\",\r\n            \"icon-lines-and-angles_fix\",\r\n            \"icon-lines-and-angles_flag\",\r\n            \"icon-lines-and-angles_float\",\r\n            \"icon-lines-and-angles_flow\",\r\n            \"icon-lines-and-angles_fly\",\r\n            \"icon-lines-and-angles_focus\",\r\n            \"icon-lines-and-angles_fold\",\r\n            \"icon-lines-and-angles_forbid\",\r\n            \"icon-lines-and-angles_forebode\",\r\n            \"icon-lines-and-angles_fork\",\r\n            \"icon-lines-and-angles_format\",\r\n            \"icon-lines-and-angles_game\",\r\n            \"icon-lines-and-angles_give\",\r\n            \"icon-lines-and-angles_glance\",\r\n            \"icon-lines-and-angles_grill\",\r\n            \"icon-lines-and-angles_grow\",\r\n            \"icon-lines-and-angles_guide\",\r\n            \"icon-lines-and-angles_hang\",\r\n            \"icon-lines-and-angles_harvest\",\r\n            \"icon-lines-and-angles_haunt\",\r\n            \"icon-lines-and-angles_heal\",\r\n            \"icon-lines-and-angles_hear\",\r\n            \"icon-lines-and-angles_hide\",\r\n            \"icon-lines-and-angles_hold\",\r\n            \"icon-lines-and-angles_home\",\r\n            \"icon-lines-and-angles_identify\",\r\n            \"icon-lines-and-angles_imagine\",\r\n            \"icon-lines-and-angles_influence\",\r\n            \"icon-lines-and-angles_inject\",\r\n            \"icon-lines-and-angles_invade\",\r\n            \"icon-lines-and-angles_iron\",\r\n            \"icon-lines-and-angles_jam\",\r\n            \"icon-lines-and-angles_join\",\r\n            \"icon-lines-and-angles_judge\",\r\n            \"icon-lines-and-angles_keep\",\r\n            \"icon-lines-and-angles_kick\",\r\n            \"icon-lines-and-angles_pitch\",\r\n            \"icon-lines-and-angles_plan\",\r\n            \"icon-lines-and-angles_plant\",\r\n            \"icon-lines-and-angles_play\",\r\n            \"icon-lines-and-angles_push\",\r\n            \"icon-lines-and-angles_rain\",\r\n            \"icon-lines-and-angles_read\",\r\n            \"icon-lines-and-angles_record\",\r\n            \"icon-lines-and-angles_redo\",\r\n            \"icon-lines-and-angles_reheat\",\r\n            \"icon-lines-and-angles_remind\",\r\n            \"icon-lines-and-angles_repeat\",\r\n            \"icon-lines-and-angles_report\",\r\n            \"icon-lines-and-angles_resurrect\",\r\n            \"icon-lines-and-angles_rewind\",\r\n            \"icon-lines-and-angles_ride\",\r\n            \"icon-lines-and-angles_ring\",\r\n            \"icon-lines-and-angles_rise\",\r\n            \"icon-lines-and-angles_rock\",\r\n            \"icon-lines-and-angles_roll\",\r\n            \"icon-lines-and-angles_rule\",\r\n            \"icon-lines-and-angles_run\",\r\n            \"icon-lines-and-angles_save\",\r\n            \"icon-lines-and-angles_schedule\",\r\n            \"icon-lines-and-angles_screw\",\r\n            \"icon-lines-and-angles_scroll\",\r\n            \"icon-lines-and-angles_search\",\r\n            \"icon-lines-and-angles_see\",\r\n            \"icon-lines-and-angles_select\",\r\n            \"icon-lines-and-angles_sell\",\r\n            \"icon-lines-and-angles_send\",\r\n            \"icon-lines-and-angles_sew\",\r\n            \"icon-lines-and-angles_shade\",\r\n            \"icon-lines-and-angles_shake\",\r\n            \"icon-lines-and-angles_share\",\r\n            \"icon-lines-and-angles_shine\",\r\n            \"icon-lines-and-angles_shop\",\r\n            \"icon-lines-and-angles_shower\",\r\n            \"icon-lines-and-angles_shuffle\",\r\n            \"icon-lines-and-angles_sing\",\r\n            \"icon-lines-and-angles_sit\",\r\n            \"icon-lines-and-angles_skip\",\r\n            \"icon-lines-and-angles_sleep\",\r\n            \"icon-lines-and-angles_slice\",\r\n            \"icon-lines-and-angles_slide\",\r\n            \"icon-lines-and-angles_smell\",\r\n            \"icon-lines-and-angles_smuggle\",\r\n            \"icon-lines-and-angles_snow\",\r\n            \"icon-lines-and-angles_solve\",\r\n            \"icon-lines-and-angles_sound\",\r\n            \"icon-lines-and-angles_sparkle\",\r\n            \"icon-lines-and-angles_speak\",\r\n            \"icon-lines-and-angles_spin\",\r\n            \"icon-lines-and-angles_spy\",\r\n            \"icon-lines-and-angles_stack\",\r\n            \"icon-lines-and-angles_stamp\",\r\n            \"icon-lines-and-angles_steam\",\r\n            \"icon-lines-and-angles_stomp\",\r\n            \"icon-lines-and-angles_stop\",\r\n            \"icon-lines-and-angles_strum\",\r\n            \"icon-lines-and-angles_study\",\r\n            \"icon-lines-and-angles_submerge\",\r\n            \"icon-lines-and-angles_succeed\",\r\n            \"icon-lines-and-angles_sweep\",\r\n            \"icon-lines-and-angles_swim\",\r\n            \"icon-lines-and-angles_sync\",\r\n            \"icon-lines-and-angles_tag\",\r\n            \"icon-lines-and-angles_target\",\r\n            \"icon-lines-and-angles_teach\",\r\n            \"icon-lines-and-angles_think\",\r\n            \"icon-lines-and-angles_thunder\",\r\n            \"icon-lines-and-angles_tie\",\r\n            \"icon-lines-and-angles_tower\",\r\n            \"icon-lines-and-angles_transport\",\r\n            \"icon-lines-and-angles_trash\",\r\n            \"icon-lines-and-angles_travel\",\r\n            \"icon-lines-and-angles_trend\",\r\n            \"icon-lines-and-angles_turn\",\r\n            \"icon-lines-and-angles_type\",\r\n            \"icon-lines-and-angles_undo\",\r\n            \"icon-lines-and-angles_unlock\",\r\n            \"icon-lines-and-angles_upload\",\r\n            \"icon-lines-and-angles_use\",\r\n            \"icon-lines-and-angles_wait\",\r\n            \"icon-lines-and-angles_wash\",\r\n            \"icon-lines-and-angles_watch\",\r\n            \"icon-lines-and-angles_wear\",\r\n            \"icon-lines-and-angles_weigh\",\r\n            \"icon-lines-and-angles_win\",\r\n            \"icon-lines-and-angles_work\",\r\n            \"icon-lines-and-angles_worship\",\r\n            \"icon-lines-and-angles_write\",\r\n            \"icon-lines-and-angles_yell\",\r\n            \"icon-lines-and-angles_clip\",\r\n            \"icon-lines-and-angles_close\",\r\n            \"icon-lines-and-angles_code\",\r\n            \"icon-lines-and-angles_collect\",\r\n            \"icon-lines-and-angles_commit\",\r\n            \"icon-lines-and-angles_connect\",\r\n            \"icon-lines-and-angles_contact\",\r\n            \"icon-lines-and-angles_contain\",\r\n            \"icon-lines-and-angles_control\",\r\n            \"icon-lines-and-angles_cook\",\r\n            \"icon-lines-and-angles_cool\",\r\n            \"icon-lines-and-angles_copy\",\r\n            \"icon-lines-and-angles_crave\",\r\n            \"icon-lines-and-angles_create\",\r\n            \"icon-lines-and-angles_creep\",\r\n            \"icon-lines-and-angles_crop\",\r\n            \"icon-lines-and-angles_cry\",\r\n            \"icon-lines-and-angles_curdle\",\r\n            \"icon-lines-and-angles_cut\",\r\n            \"icon-lines-and-angles_dance\",\r\n            \"icon-lines-and-angles_dazzle\",\r\n            \"icon-lines-and-angles_decide\",\r\n            \"icon-lines-and-angles_defend\",\r\n            \"icon-lines-and-angles_deliver\",\r\n            \"icon-lines-and-angles_design\",\r\n            \"icon-lines-and-angles_destroy\",\r\n            \"icon-lines-and-angles_develop\",\r\n            \"icon-lines-and-angles_die\",\r\n            \"icon-lines-and-angles_disappear\",\r\n            \"icon-lines-and-angles_discard\",\r\n            \"icon-lines-and-angles_discover\",\r\n            \"icon-lines-and-angles_disguise\",\r\n            \"icon-lines-and-angles_divide\",\r\n            \"icon-lines-and-angles_download\",\r\n            \"icon-lines-and-angles_draw\",\r\n            \"icon-lines-and-angles_drill\",\r\n            \"icon-lines-and-angles_drink\",\r\n            \"icon-lines-and-angles_drive\",\r\n            \"icon-lines-and-angles_drop\",\r\n            \"icon-lines-and-angles_kiss\",\r\n            \"icon-lines-and-angles_launch\",\r\n            \"icon-lines-and-angles_lick\",\r\n            \"icon-lines-and-angles_lift\",\r\n            \"icon-lines-and-angles_light\",\r\n            \"icon-lines-and-angles_like\",\r\n            \"icon-lines-and-angles_link\",\r\n            \"icon-lines-and-angles_live\",\r\n            \"icon-lines-and-angles_load\",\r\n            \"icon-lines-and-angles_locate\",\r\n            \"icon-lines-and-angles_lock\",\r\n            \"icon-lines-and-angles_madho\",\r\n            \"icon-lines-and-angles_manufacture\",\r\n            \"icon-lines-and-angles_mark\",\r\n            \"icon-lines-and-angles_measure\",\r\n            \"icon-lines-and-angles_medicate\",\r\n            \"icon-lines-and-angles_melt\",\r\n            \"icon-lines-and-angles_merge\",\r\n            \"icon-lines-and-angles_mill\",\r\n            \"icon-lines-and-angles_move\",\r\n            \"icon-lines-and-angles_multiply\",\r\n            \"icon-lines-and-angles_mute\",\r\n            \"icon-lines-and-angles_navigate\",\r\n            \"icon-lines-and-angles_open\",\r\n            \"icon-lines-and-angles_pack\",\r\n            \"icon-lines-and-angles_paint\",\r\n            \"icon-lines-and-angles_park\",\r\n            \"icon-lines-and-angles_paste\",\r\n            \"icon-lines-and-angles_pause\",\r\n            \"icon-lines-and-angles_pay\",\r\n            \"icon-lines-and-angles_perform\",\r\n            \"icon-lines-and-angles_photograph\",\r\n            \"icon-lines-and-angles_pick\",\r\n            \"icon-lines-and-angles_pin\",\r\n            \"icon-lines-and-angles_plot\",\r\n            \"icon-lines-and-angles_point\",\r\n            \"icon-lines-and-angles_poison\",\r\n            \"icon-lines-and-angles_present\",\r\n            \"icon-lines-and-angles_press\",\r\n            \"icon-lines-and-angles_primp\",\r\n            \"icon-lines-and-angles_print\",\r\n            \"icon-lines-and-angles_pucker\"\r\n            ]\r\n    }\r\n}\r\n","\r\n// Imports\r\nimport { cl, clv, makeSafeClass } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { createRevealTimer } from 'termInteraction';\r\n\r\n// Exports\r\nexport { viewCreate, addHearts, setScore, progressBar };\r\n\r\n// Create app view\r\nconst viewCreate = function viewCreate(termsToCreate) {\r\n\r\n    let viewHTML = \"\";\r\n\r\n    // Create HTML for terms\r\n    for (let value of termsToCreate) {\r\n\r\n        // Get terms and definitions from data\r\n        let termValue = tinyTerms[tinyTerms.pickedList].terms[value].term;\r\n        let definitionValue = tinyTerms[tinyTerms.pickedList].terms[value].definition;\r\n        let supportValue = tinyTerms[tinyTerms.pickedList].terms[value].support;\r\n        let termEncode = makeSafeClass(termValue);\r\n        let revealCounter;\r\n        let viewsCount;\r\n\r\n        // Check storage for revealed count\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealGoal = tinyTerms[tinyTerms.pickedList].storedData.revealGoal || {};\r\n\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.revealGoal[termValue] === undefined) {\r\n            viewsCount = 0;\r\n        }\r\n        else {\r\n            viewsCount = (tinyTerms[tinyTerms.pickedList].storedData.revealGoal[termValue]) || 0;\r\n        }\r\n\r\n        document.querySelector('h1').innerHTML = tinyTerms.pickedList;\r\n        document.querySelector('.list-action').innerHTML = tinyTerms[tinyTerms.pickedList].action + '<span class=\"query-holder\"></span>';\r\n\r\n        // Create terms HTML\r\n        let newHolder =\r\n            `<div class=\"m-term-wrapper ${termEncode}\">\r\n                <p class=\"term-holder\">${termValue}</p>\r\n                <div class=\"theme-holder\"><p class=\"symbol-holder\"></p></div>\r\n                <div class=\"right\">\r\n                    <p class=\"term-views\"><span>Goal:</span> <span class=\"count\">${viewsCount}</span> / ${tinyTerms[tinyTerms.pickedList].ops.revealGoalTarget}</p>\r\n                    <button class=\"reveal\">Reveal</button>\r\n                </div>\r\n                <div class=\"definition-wrapper hidden\">\r\n                    <p class=\"definition-holder\">${definitionValue}</p>\r\n                    <div class=\"helpers\">\r\n                        <a href=\"#\" class=\"lookup\"></a>\r\n                        <a href=\"#\" class=\"colour\"></a>\r\n                        <a href=\"#\" class=\"symbol\"></a>\r\n                    </div>\r\n                    <div class=\"support-wrapper\">${supportValue}</div>\r\n                </div>\r\n            </div>`;\r\n\r\n        viewHTML += newHolder;\r\n    }\r\n    // Add to view\r\n    document.querySelector('.terms-wrapper').innerHTML = viewHTML;\r\n\r\n    // Add theme to previously created terms\r\n    for (let value of termsToCreate) {\r\n        let termValue = tinyTerms[tinyTerms.pickedList].terms[value].term;\r\n        let termEncode = makeSafeClass(termValue);\r\n\r\n        // Check storage for assigned colour\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue] !== undefined && tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].colour !== undefined) {\r\n            let termWrapper = document.querySelector('.' + termEncode + '');\r\n            let pickedColour = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].colour;\r\n            // Add colour to object\r\n            termWrapper.querySelector('.theme-holder').style.background = pickedColour;\r\n            termWrapper.querySelector('.theme-holder').classList.add('bg-active');\r\n            termWrapper.querySelector('.term-holder').style.color = \"#fff\";\r\n        }\r\n        // Check storage for assigned symbol\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue] !== undefined && tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].symbol !== undefined) {\r\n            let termWrapper = document.querySelector('.' + termEncode + '');\r\n            let pickedSymbol = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].symbol;\r\n            // Add symbol to object\r\n            termWrapper.querySelector('.symbol-holder').classList = ('symbol-holder');\r\n            termWrapper.querySelector('.symbol-holder').classList.add(pickedSymbol);\r\n        }\r\n    }\r\n\r\n    // Add countdown timers to term buttons\r\n    for (let value of termsToCreate) {\r\n\r\n        // Check if timer data exists\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns !== undefined) {\r\n\r\n            // Add countdown timers to buttons\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[value] !== undefined) {\r\n\r\n                let revealBtn = document.querySelectorAll('.reveal');\r\n\r\n                // Find button node that matches term in DOM\r\n                for (let i = 0; i < revealBtn.length; i++) {\r\n                    let revealTerm = revealBtn[i].parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n                    if (revealTerm === value) {\r\n                        createRevealTimer(revealBtn[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Add hearts to page\r\nconst addHearts = function addHearts() {\r\n    let heartHolder = document.querySelector('.hearts');\r\n    let heartsHTML = \"\";\r\n\r\n    // If no hearts data exists\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.hearts === undefined) {\r\n        tinyTerms[tinyTerms.pickedList].storedData.hearts = tinyTerms[tinyTerms.pickedList].ops.points.hearts;\r\n    }\r\n    for (let i = 0; i < tinyTerms[tinyTerms.pickedList].storedData.hearts; i++) {\r\n        heartsHTML += '<p></p>';\r\n    }\r\n    // Add to view\r\n    heartHolder.innerHTML = heartsHTML;\r\n\r\n    // Add to storage\r\n    localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n}\r\n\r\n// Sets the score\r\nconst setScore = function setScore() {\r\n\r\n    let scoreHolder = document.querySelector('.score-holder');\r\n\r\n    // Set score if it doesn't exist\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.score === undefined) {\r\n        tinyTerms[tinyTerms.pickedList].storedData.score = 0;\r\n    }\r\n\r\n    let score = tinyTerms[tinyTerms.pickedList].storedData.score;\r\n\r\n    // Add to view\r\n    scoreHolder.innerHTML = score;\r\n}\r\n\r\n// Add progress bar\r\nconst progressBar = function progressBar() {\r\n    // Create correct terms default\r\n    tinyTerms[tinyTerms.pickedList].storedData.learnedTerms = tinyTerms[tinyTerms.pickedList].storedData.learnedTerms || {};\r\n    let completed = Object.keys(tinyTerms[tinyTerms.pickedList].storedData.learnedTerms).length;\r\n    let remaining = Object.keys(tinyTerms[tinyTerms.pickedList].terms).length;\r\n\r\n    // Add to DOM\r\n    document.querySelector('.m-footer').querySelector('.completed').innerHTML = completed;\r\n    document.querySelector('.m-footer').querySelector('.remaining').innerHTML = ' / ' + remaining;\r\n    document.querySelector('.m-footer').querySelector('.progress-bar').style.width = ((completed / remaining) * 100) + \"%\";\r\n}","\r\n// Imports\r\nimport { cl, clv, pickRandom, checkQuery, makeSafeClass } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { addHearts } from 'viewCreation';\r\n\r\n// Exports\r\nexport { createNewQuery };\r\n\r\n// Sets up query\r\nconst createNewQuery = function createNewQuery(bonus) {\r\n\r\n    // Pick a term for query\r\n    let randomTerm;\r\n    let i = 0;\r\n\r\n    // If no stored data for reveal countdowns\r\n    tinyTerms[tinyTerms.pickedList].storedData.queryTerms = tinyTerms[tinyTerms.pickedList].storedData.queryTerms || {};\r\n\r\n    // Set correctTerms storage if not exists\r\n    tinyTerms[tinyTerms.pickedList].storedData.correctTerms = tinyTerms[tinyTerms.pickedList].storedData.correctTerms || {};\r\n\r\n    // Set incorrectTerms storage if not exists\r\n    tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms = tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms || {};\r\n\r\n    let cycledTerms = [];\r\n    // Choose term from viewed terms\r\n    while (i < Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length) {\r\n\r\n        // If no daily term\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.dailyQuery === undefined) {\r\n            // Pick a random term\r\n            randomTerm = pickRandom(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms);\r\n        }\r\n        else {\r\n            randomTerm = tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n        }\r\n        // Make sure not answered correctly before\r\n        if (!tinyTerms[tinyTerms.pickedList].storedData.correctTerms.hasOwnProperty(randomTerm)) {\r\n\r\n            // If query not from daily reminder term\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder !== undefined) {\r\n                if (!tinyTerms[tinyTerms.pickedList].storedData.dailyReminder.hasOwnProperty(randomTerm)) {\r\n                    queryHandler();\r\n                    break;\r\n                }\r\n            }\r\n            // If query not from daily terms\r\n            else if (!tinyTerms[tinyTerms.pickedList].storedData.dailyTerms.hasOwnProperty(randomTerm)) {\r\n                queryHandler();\r\n                break;\r\n            }\r\n        }\r\n        if (!cycledTerms.indexOf(randomTerm)) {\r\n            i++\r\n        }\r\n        // Else look for another\r\n        if (i === Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length) {\r\n            document.querySelector('.result-holder').innerHTML = \"Reveal more terms to get a query\";\r\n            document.querySelector('.result-holder').classList.remove('hidden');\r\n        }\r\n    }\r\n\r\n    // Build the query\r\n    function queryHandler() {\r\n        let queryWrapper = document.querySelector('.query-wrapper');\r\n        let queryHolder = document.querySelector('.query-holder');\r\n        let querySubmit = document.querySelector('.query-submit');\r\n        let resultHolder = document.querySelector('.result-holder');\r\n        let scoreHolder = document.querySelector('.score-holder');\r\n        let heartHolder = document.querySelector('.hearts');\r\n        let score = parseInt(scoreHolder.innerHTML);\r\n        let definition = tinyTerms[tinyTerms.pickedList].terms[randomTerm].definition;\r\n        let count = 0;\r\n\r\n        // Save to storage\r\n        tinyTerms[tinyTerms.pickedList].storedData.dailyQuery = randomTerm;\r\n        tinyTerms[tinyTerms.pickedList].storedData.queryComplete = false;\r\n\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        let termEncode = makeSafeClass(randomTerm);\r\n\r\n        // Hide daily term definition if same\r\n        if (document.querySelector('.' + termEncode + '') !== null) {\r\n            document.querySelector('.' + termEncode + '').querySelector('.definition-wrapper').classList.add('hidden');\r\n        }\r\n\r\n        // Add hearts\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.hearts;\r\n        addHearts();\r\n\r\n        // Show the query wrapper\r\n        queryWrapper.classList.remove('hidden');\r\n\r\n        // Change title if bonus\r\n        if (bonus) {\r\n            queryWrapper.getElementsByTagName('h2')[0].innerHTML = \"Bonus Test\";\r\n        }\r\n\r\n        // Set value of query\r\n        queryHolder.innerHTML = randomTerm;\r\n\r\n        window.addEventListener(\"keypress\", function (e) {\r\n            if (e.keyCode === 13) {\r\n                querySubmit.click();\r\n            }\r\n        });\r\n\r\n        // Query outcomes\r\n        querySubmit.addEventListener(\"click\", (e) => {\r\n            e.preventDefault();\r\n            let queryInput = document.querySelector('.query-input').value;\r\n\r\n            if (checkQuery(queryInput, definition) === true) {\r\n                winCase();\r\n            }\r\n            else if (checkQuery(queryInput, definition) === \"mispelled\") {\r\n                winCase(\"mispelled\", queryInput);\r\n            }\r\n            else if (queryInput === \"\") {\r\n                resultHolder.innerHTML = \"Enter a definition.\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            else {\r\n                loseCase();\r\n            }\r\n        });\r\n\r\n        // If definition is right\r\n        function winCase(spelling, input) {\r\n            // Hide the query input\r\n            document.querySelector('.query-form').classList.add('hidden');\r\n            heartHolder.classList.add('hidden');\r\n            // If mispelled\r\n            if (spelling === \"mispelled\") {\r\n                // Display win message\r\n                resultHolder.innerHTML = \"Well done but check your spelling (\" + input + \"), the definition is <strong>\\\"\" + definition + \"\\\"</strong>\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            else {\r\n                // Display win message\r\n                resultHolder.innerHTML = \"Well done, the definition is <strong>\\\"\" + definition + \"\\\"</strong>\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            // Add to score\r\n            score += tinyTerms[tinyTerms.pickedList].ops.points.correct;\r\n            // Update view\r\n            scoreHolder.innerHTML = score;\r\n            // Add to stored data\r\n            tinyTerms[tinyTerms.pickedList].storedData.score = score;\r\n            tinyTerms[tinyTerms.pickedList].storedData.correctTerms[randomTerm] = definition;\r\n            tinyTerms[tinyTerms.pickedList].storedData.queryComplete = true;\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n            // Save to storage\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n        }\r\n        // If definition is wrong\r\n        function loseCase() {\r\n            let queryInput = document.querySelector('.query-input');\r\n            // Update view\r\n            resultHolder.innerHTML = \"Try again.\";\r\n            resultHolder.classList.remove('hidden');\r\n            // Add placeholder\r\n            queryInput.placeholder = queryInput.value;\r\n            // Remove guess\r\n            queryInput.value = \"\";\r\n            // Lose a heart\r\n            heartHolder.removeChild(heartHolder.getElementsByTagName('p')[0]);\r\n            tinyTerms[tinyTerms.pickedList].storedData.hearts -= 1;\r\n            // If all hearts lost\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.hearts === 0) {\r\n                // Hide query \r\n                document.querySelector('.query-form').classList.add('hidden');\r\n                heartHolder.classList.add('hidden');\r\n                // Update DOM\r\n                queryInput.value = \"\";\r\n                queryInput.placeholder = \"Enter the definition\";\r\n                // Update view\r\n                resultHolder.innerHTML = \"Sorry, you are out of attempts!\";\r\n                resultHolder.classList.remove('hidden');\r\n                // Add to storedDatta \r\n                tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms[randomTerm] = definition;\r\n                tinyTerms[tinyTerms.pickedList].storedData.queryComplete = true;\r\n                delete tinyTerms[tinyTerms.pickedList].storedData.hearts;\r\n            }\r\n            // Save to storage\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n        }\r\n    }\r\n}","\r\n// Imports\r\nimport { cl, clv, clickListener, jsonp, findKeys, makeSafeClass } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { createNewQuery } from 'queryInteraction';\r\nimport { setScore, addHearts, progressBar } from 'viewCreation';\r\n\r\n// Exports\r\nexport { revealedBtnHandler, createRevealTimer, dictionaryLookup, textToSpeech, addColour, hideModal, pickSymbol };\r\n\r\n// Handles functions when reveal button clicked\r\nconst revealedBtnHandler = function revealedBtnHandler() {\r\n\r\n    let revealBtn = document.querySelectorAll('.reveal');\r\n\r\n    clickListener(revealBtn, (i) => {\r\n\r\n        // Disabled button prevention\r\n        if (revealBtn[i].classList.contains('disabled')) {\r\n            return false;\r\n        }\r\n\r\n        let term = [revealBtn[i].parentNode.parentNode.querySelector('.term-holder').innerHTML];\r\n\r\n        // Updates the revealed view counter\r\n        let countHolder = revealBtn[i].parentNode.querySelector('.count');\r\n        let definitionWrapper = revealBtn[i].parentNode.parentNode.querySelector('.definition-wrapper');\r\n        let definitionHolder = revealBtn[i].parentNode.parentNode.querySelector('.definition-holder');\r\n        let count = parseInt(countHolder.innerHTML);\r\n\r\n        // Show definition\r\n        definitionWrapper.classList.remove('hidden');\r\n\r\n        // Animations\r\n        definitionWrapper.classList.add('slideInUp','animated');\r\n        revealBtn[i].parentNode.classList.add('rubberBand','animated');\r\n\r\n        // Set storedData\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term] = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term] || {};\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount || 0;\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount += 1;\r\n        \r\n        // Daily reveal bonus\r\n        let revealGoalCount;\r\n\r\n        // If no existing term bonus\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.revealGoal[term] === undefined) {\r\n            revealGoalCount = 1;\r\n        }\r\n\r\n        // Add one to daily bonus\r\n        else {\r\n            revealGoalCount = tinyTerms[tinyTerms.pickedList].storedData.revealGoal[term];\r\n            revealGoalCount += 1;\r\n        }\r\n\r\n        // Update DOM\r\n        countHolder.innerHTML = revealGoalCount;\r\n\r\n        // If bonus is met\r\n        if (revealGoalCount === tinyTerms[tinyTerms.pickedList].ops.revealGoalTarget) {\r\n\r\n            // Add term to learned terms list\r\n            tinyTerms[tinyTerms.pickedList].storedData.learnedTerms = tinyTerms[tinyTerms.pickedList].storedData.learnedTerms || {};\r\n            tinyTerms[tinyTerms.pickedList].storedData.learnedTerms[term] = true;\r\n\r\n            // Check if whole term list answered correctly\r\n            if (Object.keys(tinyTerms[tinyTerms.pickedList].storedData.learnedTerms).length === Object.keys(tinyTerms[tinyTerms.pickedList].terms).length) {\r\n                tinyTerms[tinyTerms.pickedList].storedData.gameWon = true;\r\n                gameWon();\r\n            }\r\n\r\n            // If game won\r\n            function gameWon() {\r\n                let modal = document.querySelector('.m-modal');\r\n\r\n                // Bring up modal\r\n                modal.classList.remove('hidden');\r\n                document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n                let view = `<header>\r\n                                <h2 class=\"\">Whoop whoop!!</h2>\r\n                            </header>\r\n                            <p>Well done you completed the whole list! You get a bonus 10 points for each term learned.</p>\r\n                            <p>You can keep learning this list, reset it in the options to start from scratch or move on to\r\n                            learn something new entirely.</p>\r\n                            <p><strong>Great job!</strong></p>`;\r\n\r\n                // Add view\r\n                modal.querySelector('.content').innerHTML += view;\r\n\r\n                // Award bonus points\r\n                let completeBonus = Object.keys(tinyTerms[tinyTerms.pickedList].terms).length * 10;\r\n                tinyTerms[tinyTerms.pickedList].storedData.score += completeBonus;\r\n                setScore();\r\n            }\r\n\r\n            // Update progress bar\r\n            progressBar();\r\n\r\n            // If daily bonus not already triggered\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.revealGoal.complete === false) {\r\n\r\n                // Keep query active \r\n                tinyTerms[tinyTerms.pickedList].storedData.queryComplete = false;\r\n                \r\n                // Create a new query\r\n                createNewQuery(true);\r\n            }\r\n            // Set only once a day\r\n            tinyTerms[tinyTerms.pickedList].storedData.revealGoal.complete = true;\r\n            tinyTerms[tinyTerms.pickedList].storedData.score += tinyTerms[tinyTerms.pickedList].ops.points.dailyBonus;\r\n            setScore();\r\n        }\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealGoal[term] = revealGoalCount;\r\n\r\n        // Save to storage\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        // Starts a timer \r\n        createRevealTimer(revealBtn[i]);\r\n    });\r\n}\r\n\r\n// Adds a timer to the reveal button\r\nconst createRevealTimer = function createRevealTimer(revealBtn) {\r\n\r\n    // If no stored data for reveal countdowns\r\n    tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns || {};\r\n\r\n    let term = [revealBtn.parentNode.parentNode.querySelector('.term-holder').innerHTML];\r\n    let minutes = tinyTerms[tinyTerms.pickedList].ops.counterMins;\r\n    let seconds = tinyTerms[tinyTerms.pickedList].ops.counterSecs;\r\n    let remainingMinutes;\r\n    let remainingSeconds;\r\n    let startTime;\r\n    let timerEnded;\r\n\r\n    // New timer\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term] === undefined) {\r\n\r\n        // Get a new time\r\n        startTime = new Date().getTime();\r\n\r\n        // Set storedData\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term] = {\r\n            \"startTime\": startTime,\r\n            \"timerEnded\": false\r\n        };\r\n\r\n        // Start timer\r\n        startTimer();\r\n    }\r\n    // Existing timer\r\n    else {\r\n        // Start timer\r\n        startTimer();\r\n    }\r\n\r\n    function startTimer() {\r\n        let nowTime = new Date().getTime();\r\n        \r\n        // Disable button\r\n        revealBtn.classList.add('disabled');\r\n        revealBtn.setAttribute(\"disabled\", true);\r\n\r\n        // Get terms start time for countdown\r\n        startTime = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].startTime;\r\n        timerEnded = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerEnded;\r\n\r\n        // Get difference in seconds\r\n        let diffSecs = Math.floor((nowTime - startTime) / 1000);\r\n        // Get total in seconds\r\n        let totalSecs = (tinyTerms[tinyTerms.pickedList].ops.counterMins * 60) + seconds;\r\n\r\n        // NowTime overtaken startTime\r\n        if (diffSecs >= totalSecs) {\r\n            timerEnded = true;\r\n            // Stop interval\r\n            clearInterval(tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerUpdate);\r\n            // Clear storage for term timer\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term];\r\n        }\r\n        // Timer stopped, return to normal\r\n        if (timerEnded === true) {\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            return false;\r\n        }\r\n        // Set remaining time \r\n        remainingSeconds = totalSecs - diffSecs;\r\n    }\r\n\r\n    // Set start time to storage\r\n    localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n    let timeout;\r\n    let checkCount = 0;\r\n\r\n    // If timer is active   \r\n    if (timerEnded === false) {\r\n\r\n        // Start timer interval\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerUpdate = setInterval(() => {\r\n            // Resync timer in some devices when off screen\r\n            checkCount += 1;\r\n            if (checkCount % 5 === 0) {\r\n                startTimer();\r\n            }\r\n            // Call UI timer build\r\n            buttonTimer();\r\n        }, 1000)\r\n    }\r\n    else {\r\n        revealBtn.innerHTML = (\"Reveal\");\r\n        revealBtn.classList.remove('disabled');\r\n        revealBtn.disabled = false;\r\n    }\r\n\r\n    // Builds the timer\r\n    function buttonTimer() {\r\n        let displayedMinutes = Math.floor(remainingSeconds / 60);\r\n        let displayedSeconds = remainingSeconds % 60;\r\n        let hiddenZero = '';\r\n\r\n        // Timer end\r\n        if (remainingSeconds <= 0) {\r\n            revealBtn.innerHTML = (\"Reveal\");\r\n            revealBtn.classList.remove('disabled');\r\n            revealBtn.disabled = false;\r\n            return false;\r\n        }\r\n\r\n        // Handle issues like zero index\r\n        if (displayedSeconds < 10 && displayedSeconds >= 0) {\r\n            hiddenZero = '0';\r\n        }\r\n        if (remainingSeconds === 60) {\r\n            displayedSeconds = '00';\r\n        }\r\n        // Update DOM\r\n        revealBtn.innerHTML = (displayedMinutes + ':' + hiddenZero + displayedSeconds);\r\n\r\n        // Decrease timer\r\n        remainingSeconds -= 1;\r\n    }\r\n};\r\n\r\n// Allows for text to speech\r\nconst textToSpeech = function textToSpeech() {\r\n\r\n    let termHolder = document.querySelectorAll('.term-holder');\r\n\r\n    clickListener(termHolder, (i) => {\r\n\r\n        if (TTS === undefined) {\r\n            let speech = new SpeechSynthesisUtterance(termHolder[i].innerHTML);\r\n            speech.lang = tinyTerms[tinyTerms.pickedList].speechLang;\r\n            window.speechSynthesis.speak(speech);\r\n        }\r\n        else {\r\n            TTS\r\n            .speak({\r\n                text: 'hello, world!',\r\n                locale: 'en-GB',\r\n                rate: 0.75\r\n            }, function () {\r\n                alert('success');\r\n            }, function (reason) {\r\n                alert(reason);\r\n            });\r\n        }\r\n    });\r\n    if (tinyTerms[tinyTerms.pickedList].speechLang === \"none\") {\r\n        for (let k = 0; k < termHolder.length; k++){\r\n            termHolder[k].classList.add('no-speak');\r\n        }\r\n    }\r\n}\r\n\r\n// Retrieves dictionary references\r\nconst dictionaryLookup = function dictionaryLookup() {\r\n\r\n    let dictionaryBtn = document.querySelectorAll('.lookup');\r\n    let modal = document.querySelector('.m-modal');\r\n\r\n    clickListener(dictionaryBtn, (i) => {\r\n        let term = dictionaryBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"dictionary\">Dictionary definitions</h2>\r\n                    </header>\r\n                    <p>${term}:</p>\r\n                    <ul class=\"definitions\">\r\n                    </ul>`;\r\n\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        // Make JSONP call to Glosbe API\r\n        let definitionHolder = modal.querySelector('.definitions');\r\n        let dictionaryLookup = encodeURI('https://glosbe.com/gapi/translate?from='+tinyTerms[tinyTerms.pickedList]\r\n        .dictFrom+'&dest='+tinyTerms[tinyTerms.pickedList]\r\n        .dictTo+'&format=json&pretty=true&phrase=' + term.toLowerCase() + '');\r\n\r\n        // Make request to Glosbe\r\n        jsonp(dictionaryLookup)\r\n        .then(function (data) {\r\n            let dictionaryResponses = \"\";\r\n\r\n            try {\r\n                // Search through data for \"meanings\"\r\n                findProp(data, \"text\");\r\n\r\n                function findProp(obj, key, out) {\r\n                    let i;\r\n                    let proto = Object.prototype;\r\n                    let ts = proto.toString;\r\n                    let hasOwn = proto.hasOwnProperty.bind(obj);\r\n\r\n                    for (i in obj) {\r\n                        if (hasOwn(i)) {\r\n                            if (i === key) {\r\n                                dictionaryResponses += '<li>' + obj[i] + '</li>';\r\n                            } else if ('[object Array]' === ts.call(obj[i]) || '[object Object]' === ts.call(obj[i])) {\r\n                                findProp(obj[i], key, out);\r\n                            }\r\n                        }\r\n                    }\r\n                    return out;\r\n                }\r\n                if (data.tuc === undefined || data.tuc.length === 0) {\r\n                    dictionaryResponses = \"(Sorry, no dictionary results found)\"\r\n                }\r\n                // Add to DOM\r\n                definitionHolder.innerHTML = dictionaryResponses;\r\n            }\r\n            catch (err) {\r\n                console.log(err);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// Adds colours to term holders\r\nconst addColour = function addColour() {\r\n\r\n    let modal = document.querySelector('.m-modal');\r\n    let colourBtn = document.querySelectorAll('.colour');\r\n    let picker;\r\n    let colours;\r\n\r\n    clickListener(colourBtn, (i) => {\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let termHolder = colourBtn[i].parentNode.parentNode.parentNode;\r\n        let term = colourBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"colour\">Colour picker</h2>\r\n                    </header>\r\n                    <p>Click below to add a colour for <br>\"<span class=\"colour-term\">${term}</span>\":</p>\r\n                    <ul class=\"colour-wrap\">\r\n                        <li><a href=\"#\" data-colour=\"#1abc9c\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#3498db\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#9b59b6\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#f1c40f\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#e67e22\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#e74c3c\"></a></li>\r\n                    </ul>`;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        let coloursHolder = modal.querySelector('.colour-wrap');\r\n        // Add colour vars\r\n        colours = coloursHolder.getElementsByTagName('a');\r\n        colourListener();\r\n    });\r\n\r\n    // Add colour function\r\n    function colourListener() {\r\n        let term = document.querySelector('.colour-term').innerHTML;\r\n        let termEncode = makeSafeClass(term);\r\n        let termWrapper = document.querySelector('.' + termEncode + '');\r\n\r\n        // Pick a colour\r\n        clickListener(colours, (i) => {\r\n            let pickedColour = colours[i].getAttribute('data-colour');\r\n            // Add colour to object\r\n            termWrapper.querySelector('.theme-holder').style.background = pickedColour;\r\n            termWrapper.querySelector('.theme-holder').classList.add('bg-active');\r\n            termWrapper.querySelector('.term-holder').style.color = \"#fff\";\r\n            // Set storage\r\n            tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].colour = pickedColour;\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            // Hide modal\r\n            hideModal(true);\r\n        });\r\n    }\r\n}\r\n\r\n// Symbol picker\r\nconst pickSymbol = function pickSymbol() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let symbolBtn = document.querySelectorAll('.symbol');\r\n    let symbolHTML = \"<tr>\";\r\n    let symbols = appData.fonts;\r\n    let k = 0;\r\n\r\n    for (let i = 0; i < appData.fonts.feather.length; i++) {\r\n\r\n        if (k % 5 === 0 && k != 0) {\r\n            symbolHTML += '</tr><tr>';\r\n        }\r\n        symbolHTML += '<td><p class='+appData.fonts.feather[i]+'></p></td>';\r\n        k++;\r\n\r\n        if (i === (appData.fonts.feather.length - 1)) {\r\n            symbolHTML += \"</tr>\"\r\n        }\r\n    }\r\n\r\n    /* OLD UNICODE SYMOBLS\r\n    let symbolRanges = [[0x2600,0x26FF]]; //,[0x1200, 0x135A],[0xA000, 0xA48C]\r\n    for (let j = 0; j < symbolRanges.length; j++) {\r\n\r\n        for (let i = symbolRanges[j][0]; i < symbolRanges[j][1]; i++) {\r\n\r\n            if (k % 5 === 0 && k != 0) {\r\n                symbolHTML += '</tr><tr>';\r\n            }\r\n\r\n            let symbol = String.fromCodePoint(i);\r\n            symbolHTML += '<td><p>' + symbol + '&#xFE0E;</p></td>';\r\n            k++;\r\n\r\n            if (i === (symbolRanges[j][1] - 1)) {\r\n                symbolHTML += \"</tr>\"\r\n            }\r\n        }\r\n    }\r\n    */\r\n\r\n    clickListener(symbolBtn, (i) => {\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let termHolder = symbolBtn[i].parentNode.parentNode.parentNode;\r\n        let term = symbolBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"symbol\">Glyph picker</h2>\r\n                    </header>\r\n                    <p>Click below to add a glyph for <br>\"<span class=\"symbol-term\">${term}</span>\":</p>\r\n                    <div class=\"symbol-wrap\">\r\n                        <table>${symbolHTML}</table>\r\n                    </div>`;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        symbolListener();\r\n    });\r\n    // Check for clicked symbol\r\n    function symbolListener() {\r\n        let term = document.querySelector('.symbol-term').innerHTML;\r\n        let termEncode = makeSafeClass(term);\r\n        let termWrapper = document.querySelector('.' + termEncode + '');\r\n        let pickedSymbol = \"\";\r\n\r\n        modal.getElementsByTagName('table')[0].addEventListener('click', function(e) {\r\n            e = e || window.event;\r\n            let target = e.target || e.srcElement;\r\n            pickedSymbol = target.getAttribute(\"class\");   \r\n            // Add symbol to object\r\n            termWrapper.querySelector('.symbol-holder').classList = ('symbol-holder');\r\n            termWrapper.querySelector('.symbol-holder').classList.add(pickedSymbol);\r\n            // Set storage\r\n            tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].symbol = pickedSymbol;\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            // Hide modal\r\n            hideModal(true);\r\n        }, false);\r\n    }\r\n}\r\n\r\n// Hide modal\r\nconst hideModal = function hideModal(trigger) {\r\n    let modal = document.querySelector('.m-modal');\r\n    let modalClose = modal.querySelector('.close');\r\n\r\n    modalClose.addEventListener(\"click\", (e) => {\r\n        e.preventDefault();\r\n        closeModal();\r\n    });\r\n    // Programatically close modal\r\n    if (trigger) {\r\n        closeModal();\r\n    }\r\n    // Hide modal\r\n    function closeModal() {\r\n        document.getElementsByTagName('body')[0].classList.remove('modal-active');\r\n        modal.classList.add('hidden');\r\n        modal.querySelector('.content').innerHTML = \"\";\r\n    }\r\n}\r\n","\r\n// Imports\r\nimport { cl, clv, clickListener, checkURL, makeSafeClass } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\nimport { hideModal } from 'termInteraction';\r\n\r\n// Exports\r\nexport { showHome };\r\n\r\n// Show home screen\r\nconst showHome = function showHome() {\r\n\r\n\t// Once loaded\r\n\tsetTimeout(() => {\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"loading\");\r\n\t\tdocument\r\n\t\t\t.querySelector(\".m-query\")\r\n\t\t\t.classList.add(\"animated\", \"slideInDown\");\r\n\t},\r\n\t\t2500\r\n\t);\r\n\r\n\ttinyTerms.uploadedLists = tinyTerms.uploadedLists || {};\r\n\r\n\tlocalforage.getItem('tinyTerms.uploadedLists', function (err, uploadedLists) {\r\n\r\n\t\ttinyTerms.customListChoices = tinyTerms.customListChoices || {};\r\n\r\n\t\t// Get uploaded lists\r\n\t\tfor (let val in uploadedLists) {\r\n\t\t\tlet listName = uploadedLists[val].name;\r\n\t\t\tlet listURL = uploadedLists[val].sheetURL;\r\n\r\n\t\t\ttinyTerms.customListChoices[listName] = {\r\n\t\t\t\tname: listName,\r\n\t\t\t\tsheetURL: listURL\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Show home screen\r\n\t\tlet homeWrapper = document.querySelector('.m-menu');\r\n\t\thomeWrapper.classList.remove('hidden');\r\n\t\tdocument.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\t\tdocument.getElementsByTagName('body')[0].classList.add('home');\r\n\r\n\t\tlet categoryBtn = document.querySelectorAll('.category');\r\n\r\n\t\tfor (let i = 0; i < categoryBtn.length; i++) {\r\n\t\t\tcategoryBtn[i].addEventListener('click', (e) => {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\thomeWrapper.querySelector('.choose-list').classList.add('animated', 'slideOutLeft');\r\n\t\t\t\tlet categoryType = categoryBtn[i].innerHTML;\r\n\t\t\t\tlet lists = \"\";\r\n\t\t\t\tfor (let val in tinyTerms.listChoices) {\r\n\r\n\t\t\t\t\tif (tinyTerms.listChoices[val].category === categoryType) {\r\n\t\t\t\t\t\tlists += '<a href=\"#\">' + tinyTerms.listChoices[val].name + '</a>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let val in tinyTerms.customListChoices) {\r\n\r\n\t\t\t\t\tif (tinyTerms.listChoices[val].category === categoryType) {\r\n\t\t\t\t\t\tlists += '<div class=\"' + makeSafeClass(tinyTerms.customListChoices[val].name) + '\"><span class=\"custom-list\"></span><a href=\"#\">' + tinyTerms.customListChoices[val].name + '</a></div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\thomeWrapper.querySelector('.choose-list').getElementsByTagName('nav')[0].innerHTML = lists;\r\n\t\t\t\t\thomeWrapper.querySelector('.choose-list').classList.remove('slideOutLeft');\r\n\t\t\t\t\thomeWrapper.querySelector('.choose-list').classList.add('slideInRight');\r\n\t\t\t\t}, 500);\r\n\r\n\t\t\t\t// Set listeners for nav\r\n\t\t\t\tnavListeners();\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tfunction navListeners() {\r\n\t\t// Add listener to nav\r\n\t\tlet listItem = document.querySelector('.choose-list').querySelectorAll('a');\r\n\r\n\t\tfor (var i = 0; i < listItem.length; i++) {\r\n\t\t\tlistItem[i].addEventListener('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\ttinyTerms.pickedList = this.innerHTML;\r\n\t\t\t\tlocalforage.setItem('tinyTermsDefault', tinyTerms.pickedList, () => {\r\n\t\t\t\t\tlocation.reload();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Add listener to remove list\r\n\t\tlet removeList = document.querySelectorAll('.custom-list');\r\n\t\tfor (let i = 0; i < removeList.length; i++) {\r\n\r\n\t\t\tremoveList[i].addEventListener('click', (e) => {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tlet insertPoint = removeList[i].nextSibling;\r\n\t\t\t\tdocument.querySelector('.create-list').classList.add('hidden');\r\n\t\t\t\tremoveList[i].classList.add('hidden');\r\n\t\t\t\tremoveList[i].parentNode.insertBefore(document.createElement(\"div\"), insertPoint.nextSibling);\r\n\t\t\t\tinsertPoint.nextSibling.innerHTML = '<p>Are you sure you want to delete your list? (Can\\'t undo)</p><button class=\"delete-cancel\">Cancel</button><button class=\"delete-confirm\">Confim</button>';\r\n\r\n\t\t\t\tdocument.querySelector('.delete-confirm').addEventListener('click', () => {\r\n\t\t\t\t\tlet listName = removeList[i].parentNode.childNodes[1].innerHTML;\r\n\r\n\t\t\t\t\tdelete tinyTerms.uploadedLists[listName];\r\n\r\n\t\t\t\t\t// Delete list from nav\r\n\t\t\t\t\tlocalforage.setItem('tinyTerms.uploadedLists', tinyTerms.uploadedLists, () => {\r\n\t\t\t\t\t\tremoveList[i].parentNode.removeChild(insertPoint.nextSibling);\r\n\t\t\t\t\t\tremoveList[i].parentNode.parentNode.removeChild(document.querySelector('.' + makeSafeClass(listName)));\r\n\r\n\t\t\t\t\t\t// Delete list references\r\n\t\t\t\t\t\tlocalforage.removeItem(tinyTerms.storedName).then(function () {\r\n\t\t\t\t\t\t\tlocalforage.removeItem(tinyTerms[tinyTerms.pickedList]).then(function () {\r\n\t\t\t\t\t\t\t\tlocalforage.removeItem(\"tinyTermsDefault\");\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tdocument.querySelector('.delete-cancel').addEventListener('click', () => {\r\n\t\t\t\t\tremoveList[i].parentNode.removeChild(insertPoint.nextSibling);\r\n\t\t\t\t\tremoveList[i].classList.remove('hidden');\r\n\t\t\t\t\tdocument.querySelector('.create-list').classList.remove('hidden');\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// Upload list button\r\n\tdocument.querySelector('.upload-info').addEventListener('click', (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tlet modal = document.querySelector('.m-modal');\r\n\r\n\t\t// Bring up modal\r\n\t\tmodal.classList.remove('hidden');\r\n\t\tmodal.style.zIndex = \"101\";\r\n\t\tmodal.querySelector('.close').addEventListener('click', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\thideModal(true);\r\n\t\t});\r\n\r\n\t\tlet view = `<header>\r\n                        <h2 class=\"\">Upload a list</h2>\r\n                    </header>\r\n                    <p>Create your very own list of Tiny Terms! For more info please visit:</p>\r\n                    <a target=\"_blank\" href=\"http://www.tiny-terms.com\">http://www.tiny-terms.com</a>\r\n                    \r\n                    <div class=\"list-uploader\">\r\n                        <label>List Name (max 25 characters)</label>\r\n                        <input class=\"upload-name\" type=\"text\" placeholder=\"Enter list name\">\r\n                        <label>List URL</label>\r\n                        <input class=\"upload-sheet\" type=\"text\" placeholder=\"Paste list URL\">\r\n                        <button class=\"upload-list\">Upload</button>\r\n                    </div>`;\r\n\r\n\t\t// Add view\r\n\t\tmodal.querySelector('.content').innerHTML += view;\r\n\r\n\t\twindow.addEventListener(\"keypress\", function (e) {\r\n\t\t\tlet inputName = document.querySelector('.upload-name').value;\r\n\t\t\tlet inputSheet = document.querySelector('.upload-sheet').value;\r\n\r\n\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\tuploadList(inputName, inputSheet);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.querySelector('.upload-list').addEventListener('click', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tlet inputName = document.querySelector('.upload-name').value;\r\n\t\t\tlet inputSheet = document.querySelector('.upload-sheet').value;\r\n\r\n\t\t\tuploadList(inputName, inputSheet);\r\n\t\t});\r\n\t});\r\n\tfunction uploadList(inputName, inputSheet) {\r\n\t\tinputName = inputName.substring(0, 25);\r\n\r\n\t\tif (inputName.length > 0 && inputSheet.length > 0) {\r\n\r\n\t\t\t// Check valid URL\r\n\t\t\tif (checkURL(inputSheet) === true) {\r\n\t\t\t\tlocalforage.getItem('tinyTerms.uploadedLists', function (err, uploadedLists) {\r\n\t\t\t\t\ttinyTerms.uploadedLists[inputName] = {\r\n\t\t\t\t\t\tname: inputName,\r\n\t\t\t\t\t\tcategory: 'custom',\r\n\t\t\t\t\t\tsheetURL: inputSheet\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlocalforage.setItem('tinyTerms.uploadedLists', tinyTerms.uploadedLists, () => {\r\n\t\t\t\t\t\thideModal(true);\r\n\t\t\t\t\t\tlet customlist = '<div class=\"' + makeSafeClass(inputName) + '\"><span class=\"custom-list\"></span><a href=\"#\">' + inputName + '</a></div>';\r\n\t\t\t\t\t\tlet homeWrapper = document.querySelector('.m-menu');\r\n\t\t\t\t\t\thomeWrapper.querySelector('.choose-list').getElementsByTagName('nav')[0].innerHTML += customlist;\r\n\t\t\t\t\t\tnavListeners();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcl('no valid url');\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcl('no text');\r\n\t\t}\r\n\t}\r\n}\r\n","// Imports\nimport tinyTerms from \"app\";\nimport { showHome } from \"homeScreen\";\n\n// Exports\nexport {\n\tready,\n\tcl,\n\tclv,\n\tbuildData,\n\tcheckSameDay,\n\tarrayCheck,\n\tcheckConnection,\n\tmakeSafeClass,\n\tgetTodaysDate,\n\tcheckURL,\n    errorAlert,\n\talertMsg,\n\tpickRandom,\n\tclickListener,\n\tgetTimeComplete,\n\tcheckQuery,\n\tsortArrayByKey,\n\tappBlur,\n\tjsonp,\n\tfindKeys,\n\tupdateDataCount,\n\tgetCSS\n};\n\n// JS ready\nfunction ready(fn) {\n\tif (document.readyState != \"loading\") {\n\t\tfn();\n\t}\n\telse {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", fn);\n\t}\n}\n\n// Console log -> cl\nfunction cl(log) {\n\tconsole.log(log);\n}\n\n// Console log plus value\nfunction clv(term, log) {\n\tconsole.log(term + \"= \" + log);\n}\n\n// Alert errors\nconst errorAlert = function errorAlert(message, cb) {\n\n    window.onerror = (errorMsg, url, lineNumber, column, errorObj) => {\n        let modal = document.querySelector('.m-modal');\n        modal.classList.remove(\"hidden\");\n        document.getElementsByTagName(\"body\")[0].classList.add(\"modal-active\");\n\n        let view = `<header>\n                        <h2 class=\"\">Uh oh!</h2>\n                    </header>\n                    <br>\n                    <h3>${message}</h3>\n                    <p><strong>Here's the exact problem:</strong></p>\n                    <p>'Error: ${errorMsg}</p> \n                    <p>Script: ${url}</p> \n                    <p>Line: ${lineNumber}</p>\n                    <p>Column: ${column}</p> \n                    <p>StackTrace: ${errorObj}</p>\n\n                    <button class=\"home-btn\">Close</button>\n                    `;\n\n        // Add view\n        modal.querySelector(\".content\").innerHTML += view;\n        modal.classList.add('onboard');\n        cb();\n        document.querySelector(\".home-btn\").addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            showHome()\n        });\n        return false;\n    };\n}\n\n// Alert errors\nconst alertMsg = function alertMsg(message, cb) {\n\t\n\tlet modal = document.querySelector('.m-modal');\n\tmodal.classList.remove(\"hidden\");\n\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"modal-active\");\n\n\tlet view = `<header>\n\t\t\t\t\t<h2 class=\"\">Something's not right</h2>\n\t\t\t\t</header>\n\t\t\t\t<p>${message}</p>\n\n\t\t\t\t<button class=\"home-btn\">Close</button>\n\t\t\t\t`;\n\n\t// Add view\n\tmodal.querySelector(\".content\").innerHTML += view;\n\tmodal.classList.add('onboard');\n\tcb();\n\treturn false;\n}\n\n// Gets data from Google Sheets\nconst buildData = function buildData(data) {\n\tlet columnName = data.Sheet1.columnNames[1];\n\n\ttinyTerms[tinyTerms.pickedList].speechLang = columnName;\n\ttinyTerms[tinyTerms.pickedList].dictFrom = data.Sheet1.elements[0][columnName];\n\ttinyTerms[tinyTerms.pickedList].dictTo = data.Sheet1.elements[1][columnName];\n\ttinyTerms[tinyTerms.pickedList].action = data.Sheet1.elements[2][columnName];\n\ttinyTerms[tinyTerms.pickedList].terms = tinyTerms[tinyTerms.pickedList].terms || {};\n\n\tfor (let i = 0; i < data.Sheet1.elements.length; i++) {\n\t\tlet termContent = data.Sheet1.elements[i].Term;\n\t\tlet definitionContent = data.Sheet1.elements[i].Definition;\n\t\tlet supportContent = data.Sheet1.elements[i].Support;\n\n\t\ttinyTerms[tinyTerms.pickedList].terms[termContent] = {};\n\t\ttinyTerms[tinyTerms.pickedList].terms[termContent].term = termContent;\n\t\ttinyTerms[tinyTerms.pickedList].terms[termContent].definition = definitionContent;\n\t\ttinyTerms[tinyTerms.pickedList].terms[termContent].support = supportContent;\n\t}\n\ttinyTerms.postBuildCallback();\n};\n\n// Check for network connection\nconst checkConnection = function checkConnection() {\n\n\tlet networkState = navigator.connection.type;\n\tlet states = {};\n\n\tstates[Connection.UNKNOWN]  = 'Unknown';\n\tstates[Connection.ETHERNET] = 'Ethernet';\n\tstates[Connection.WIFI]     = 'WiFi';\n\tstates[Connection.CELL_2G]  = '2G';\n\tstates[Connection.CELL_3G]  = '3G';\n\tstates[Connection.CELL_4G]  = '4G';\n\tstates[Connection.CELL]     = 'Cell';\n\tstates[Connection.NONE]     = 'None';\n\n\treturn states[networkState];\n}\n\n// Checks if the same or new day\nfunction checkSameDay() {\n\tlet todaysDate = getTodaysDate();\n\tlet storedDate = [];\n\n\t// Get date last stored\n\tstoredDate = Array.from(\n\t\ttinyTerms[tinyTerms.pickedList].storedData.dateOpened\n\t);\n\n\t// Check if same day\n\tif (arrayCheck(todaysDate, storedDate) === true) {\n\t\tif (tinyTerms[tinyTerms.pickedList].ops.addDay === true) {\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.newDay = true;\n\t\t}\n\t\telse {\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.newDay = false;\n\t\t}\n\t}\n\telse {\n\t\t// Otherwise a new day\n\t\ttinyTerms[tinyTerms.pickedList].storedData.newDay = true;\n\t}\n}\n\n// Creates array of day and month\nfunction getTodaysDate() {\n\t// Get current day + month\n\tlet todayDate = [];\n\tlet day = new Date().getDate();\n\tlet month = new Date().getMonth();\n\n\ttodayDate.push([day, month]);\n\n\treturn todayDate;\n}\n\n// Creates array of day, month, hour, minute, second\nfunction getTimeComplete() {\n\t// Get complete date time value\n\tlet timeComplete = [];\n\tlet day = new Date().getDate();\n\tlet month = new Date().getMonth();\n\tlet hour = new Date().getHours();\n\tlet minute = new Date().getMinutes();\n\tlet second = new Date().getSeconds();\n\n\ttimeComplete.push([day, month, hour, minute, second]);\n\n\treturn timeComplete;\n}\n\n// Validate URL\nconst checkURL = function checkURL(str) {\n\tlet a = document.createElement(\"a\");\n\ta.href = str;\n\treturn a.host && a.host != window.location.host;\n};\n\n// Makes a safe class name\nconst makeSafeClass = function makeSafeClass(name) {\n\treturn name.replace(/[^a-z0-9]/g, function(s) {\n\t\tlet c = s.charCodeAt(0);\n\t\tif (c == 32) return \"-\";\n\t\tif (c >= 65 && c <= 90) return \"_\" + s.toLowerCase();\n\t\treturn \"__\" + (\"000\" + c.toString(16)).slice(-4);\n\t});\n};\n\n// Check if arrays are the same\nfunction arrayCheck(arr1, arr2) {\n\t// If same return true\n\tif (JSON.stringify(arr1) == JSON.stringify(arr2)) {\n\t\treturn true;\n\t}\n\t// Else false\n\treturn false;\n}\n\n// Adds click functionality to selectors\nfunction clickListener(elements, clickFunction) {\n\tfor (let i = 0; i < elements.length; i++) {\n\t\telements[i].addEventListener(\"click\", e => {\n\t\t\te.preventDefault();\n\t\t\tclickFunction(i);\n\t\t});\n\t}\n}\n\n// Get a random term\nfunction pickRandom(objectList) {\n\tlet keys = Object.keys(objectList);\n\tlet pickedTerm = keys[keys.length * Math.random() << 0];\n\treturn pickedTerm;\n}\n\n// Check if two words the same\nfunction checkQuery(item1, item2) {\n\tif (item1 === item2) return true;\n\tif (item1.toUpperCase() === item2.toUpperCase()) return true;\n\n\t// Perform fuzzy comparison\n\tlet getBigrams = function(string) {\n\t\tlet i, j, ref, s, v;\n\t\ts = string.toLowerCase();\n\t\tv = new Array(s.length - 1);\n\t\tfor ((i = (j = 0)), (ref = v.length); j <= ref; i = (j += 1)) {\n\t\t\tv[i] = s.slice(i, i + 2);\n\t\t}\n\t\treturn v;\n\t};\n\tlet stringSimilarity = function(str1, str2) {\n\t\tlet hit_count, j, k, len, len1, pairs1, pairs2, union, x, y;\n\t\tif (str1.length > 0 && str2.length > 0) {\n\t\t\tpairs1 = getBigrams(str1);\n\t\t\tpairs2 = getBigrams(str2);\n\t\t\tunion = pairs1.length + pairs2.length;\n\t\t\thit_count = 0;\n\t\t\tfor ((j = 0), (len = pairs1.length); j < len; j++) {\n\t\t\t\tx = pairs1[j];\n\t\t\t\tfor ((k = 0), (len1 = pairs2.length); k < len1; k++) {\n\t\t\t\t\ty = pairs2[k];\n\t\t\t\t\tif (x === y) {\n\t\t\t\t\t\thit_count++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hit_count > 0) {\n\t\t\t\treturn 2.0 * hit_count / union;\n\t\t\t}\n\t\t}\n\t\treturn 0.0;\n\t};\n\tlet relevance = stringSimilarity(item1, item2);\n\tif (relevance > tinyTerms[tinyTerms.pickedList].ops.wordAccuracy)\n\t\treturn \"mispelled\";\n\n\t// Else false\n\treturn false;\n}\n\n// When user navigates away from page\nconst appBlur = function appBlur() {\n\tlet hidden = \"hidden\";\n\n\t// Standards:\n\tif (hidden in document)\n\t\tdocument.addEventListener(\"visibilitychange\", onchange);\n\telse if ((hidden = \"mozHidden\") in document)\n\t\tdocument.addEventListener(\"mozvisibilitychange\", onchange);\n\telse if ((hidden = \"webkitHidden\") in document)\n\t\tdocument.addEventListener(\"webkitvisibilitychange\", onchange);\n\telse if ((hidden = \"msHidden\") in document)\n\t\tdocument.addEventListener(\"msvisibilitychange\", onchange);\n\telse if (\"onfocusin\" in document)\n\t// IE 9 and lower:\n\t\tdocument.onfocusin = (document.onfocusout = onchange);\n\telse\n\t// All others:\n\t\twindow.onpageshow = (window.onpagehide = (window.onfocus = (window.onblur = onchange)));\n\n\tfunction onchange(evt) {\n\t\tlet v = \"visible\",\n\t\t\th = \"hidden\",\n\t\t\tevtMap = {\n\t\t\t\tfocus: v,\n\t\t\t\tfocusin: v,\n\t\t\t\tpageshow: v,\n\t\t\t\tblur: h,\n\t\t\t\tfocusout: h,\n\t\t\t\tpagehide: h\n\t\t\t};\n\n\t\tevt = evt || window.event;\n\t\tif (evt.type in evtMap) {\n\t\t\t//cl(evtMap[evt.type]);\n\t\t}\n\t\telse {\n\t\t\tlocation.reload();\n\t\t}\n\t}\n\n\t// set the initial state (but only if browser supports the Page Visibility API)\n\tif (document[hidden] !== undefined)\n\t\tonchange({\n\t\t\ttype: document[hidden] ? \"blur\" : \"focus\"\n\t\t});\n};\n\n// Order array based on nested key\nconst sortArrayByKey = function sortArrayByKey(arr, key, reverse) {\n\tlet sortOrder = 1;\n\tif (reverse) {\n\t\tsortOrder = -1;\n\t}\n\treturn arr.sort(function(a, b) {\n\t\tlet x = a[1][key];\n\t\tlet y = b[1][key];\n\t\treturn sortOrder * (x < y ? -1 : x > y ? 1 : 0);\n\t});\n};\n\n// Creates JSONP requests\nconst jsonp = function jsonp(uri) {\n\treturn new Promise(function(resolve, reject) {\n\t\tlet id = \"_\" + Math.round(10000 * Math.random());\n\t\tlet callbackName = \"jsonp_callback_\" + id;\n\t\twindow[callbackName] = function(data) {\n\t\t\tdelete window[callbackName];\n\t\t\tlet ele = document.getElementById(id);\n\t\t\tele.parentNode.removeChild(ele);\n\t\t\tresolve(data);\n\t\t};\n\n\t\tlet src = uri + \"&callback=\" + callbackName;\n\t\tlet script = document.createElement(\"script\");\n\t\tscript.src = src;\n\t\tscript.id = id;\n\t\tscript.addEventListener(\"error\", reject);\n\t\t(document.getElementsByTagName(\"head\")[0] ||\n\t\t\tdocument.body ||\n\t\t\tdocument.documentElement)\n\t\t.appendChild(script);\n\t});\n};\n\n// Find all keys in object ! Potentially cyclicle !\nconst findKeys = function findKeys(obj, key) {\n\tlet val = obj[key];\n\tlet keysList = [];\n\n\tfor (val in obj) {\n\t\tif (obj[val] === key) {\n\t\t\tkeysList.push(obj[val]);\n\t\t}\n\t}\n\treturn keysList;\n};\n\n// Handles count of a type of data\nconst updateDataCount = function updateDataCount(\n\tobjectParent,\n\tnewProps,\n\tbaseValue\n) {\n\t// If no viewed data, create new\n\tif (!objectParent.hasOwnProperty(newProps)) {\n\t\tfor (let value of newProps) {\n\t\t\tobjectParent[value] = baseValue;\n\t\t}\n\t}\n\telse {\n\t\t// If viewed data exists\n\t\t// Update count\n\t\tfor (let value of newProps) {\n\t\t\tif (objectParent.hasOwnProperty(value)) {\n\t\t\t\tobjectParent[value] += 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobjectParent[value] = baseValue;\n\t\t\t}\n\t\t}\n\t}\n\t// Pass back final object\n\treturn objectParent;\n};\n\n// Returns a CSS property for an elements\nconst getCSS = function getCSS(style, selector) {\n\tfor (let i = 0; i < document.styleSheets.length; i++) {\n\t\tlet mysheet = document.styleSheets[i];\n\t\tlet myrules = mysheet.cssRules ? mysheet.cssRules : mysheet.rules;\n\t\tfor (let j = 0; j < myrules.length; j++) {\n\t\t\tif (\n\t\t\t\tmyrules[j].selectorText &&\n\t\t\t\tmyrules[j].selectorText.toLowerCase() === selector\n\t\t\t) {\n\t\t\t\treturn myrules[j].style[style];\n\t\t\t}\n\t\t}\n\t}\n};","\r\n// Imports\r\nimport { cl, clv, pickRandom, sortArrayByKey } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\n\r\n// Exports\r\nexport { getListOfTerms };\r\n\r\n// Creates a list of terms\r\nconst getListOfTerms = function getListOfTerms() {\r\n\tlet i = 0;\r\n\tlet j = 0;\r\n\tlet listOfTerms = [];\r\n\tlet scannedTerms = [];\r\n\tconst dataLength = Object.keys(tinyTerms[tinyTerms.pickedList].terms).length;\r\n\r\n\t// Prevent overflow\r\n\tif (tinyTerms[tinyTerms.pickedList].ops.displayedTerms > dataLength) {\r\n\t\ttinyTerms[tinyTerms.pickedList].ops.displayedTerms = dataLength;\r\n\t}\r\n\r\n\t// First time app opened\r\n\tif (tinyTerms[tinyTerms.pickedList].storedData.firstTime === undefined) {\r\n\r\n\t\twhile (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n\t\t\tlet pickedTerm = pickRandom(tinyTerms[tinyTerms.pickedList].terms);\r\n\r\n\t\t\t// Ensure term hasn't been already scanned\r\n\t\t\tif (!listOfTerms.includes(pickedTerm)) {\r\n\t\t\t\tlistOfTerms.push(pickedTerm);\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// App opened before\r\n\telse {\r\n\r\n\t\t// Add reminder for previous incorrect term\r\n\t\ttinyTerms[tinyTerms.pickedList].storedData.incorrectTerms = tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms || {};\r\n\r\n\t\tif (Object.keys(tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms).length > 0) {\r\n\r\n\t\t\tlet reminderTerm;\r\n\r\n\t\t\t// Add reminded terms list\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.remindedTerms = tinyTerms[tinyTerms.pickedList].storedData.remindedTerms || {};\r\n\r\n\t\t\t// Keep reminded term the same\r\n\t\t\tif (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder === undefined) {\r\n\t\t\t\ttinyTerms[tinyTerms.pickedList].storedData.dailyReminder = {};\r\n\t\t\t\treminderTerm = pickRandom(tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms);\r\n\t\t\t\ttinyTerms[tinyTerms.pickedList].storedData.dailyReminder[reminderTerm] = tinyTerms[tinyTerms.pickedList].terms[reminderTerm].definition;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treminderTerm = tinyTerms[tinyTerms.pickedList].storedData.dailyReminder;\r\n\t\t\t\treminderTerm = Object.getOwnPropertyNames(reminderTerm);\r\n\t\t\t}\r\n\r\n\t\t\t// Add to terms\r\n\t\t\tlistOfTerms.push(reminderTerm);\r\n\r\n\t\t\t// Remove from incorrect terms\r\n\t\t\tdelete tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms[reminderTerm];\r\n\r\n\t\t\t// Add to list of reminded terms\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.remindedTerms[reminderTerm] = tinyTerms[tinyTerms.pickedList].terms[reminderTerm].definition;\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\t// Choose terms to  display\r\n\t\twhile (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n\t\t\tlet viewedLength = Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length;\r\n\r\n\t\t\t// If all terms viewed \r\n\t\t\tif ((viewedLength + i) === dataLength) {\r\n\t\t\t\tlet viewedSorted = [];\r\n\r\n\t\t\t\t// Convert viewed terms to array\r\n\t\t\t\tfor (let term in tinyTerms[tinyTerms.pickedList].storedData.viewedTerms) {\r\n\t\t\t\t\tviewedSorted.push([term, tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term]]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If reminder term picked remove from selection\r\n\t\t\t\tif (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder !== undefined) {\r\n\r\n\t\t\t\t\tfor (let m = viewedSorted.length - 1; m >= 0; m--) {\r\n\r\n\t\t\t\t\t\tif (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder.hasOwnProperty(viewedSorted[m][0])) {\r\n\t\t\t\t\t\t\tviewedSorted.splice(m, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Sort array by view count\r\n\t\t\t\tviewedSorted = sortArrayByKey(viewedSorted, 'viewCount');\r\n\r\n\t\t\t\t// Finish off iterator with lowest viewed terms\r\n\t\t\t\twhile (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n\t\t\t\t\tlistOfTerms.push(viewedSorted[i][0]);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n                \r\n\t\t\t\t// Overflow protection\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\t// Still unviewed terms in data\r\n\t\t\telse {\r\n\t\t\t\tlet pickedTerm = pickRandom(tinyTerms[tinyTerms.pickedList].terms);\r\n\r\n\t\t\t\t// Ensure term hasn't been already scanned\r\n\t\t\t\tif (!scannedTerms.includes(pickedTerm)) {\r\n\t\t\t\t\tscannedTerms.push(pickedTerm);\r\n\r\n\t\t\t\t\t// Ensure term not viewed before\r\n\t\t\t\t\tif (!tinyTerms[tinyTerms.pickedList].storedData.viewedTerms.hasOwnProperty(pickedTerm)) {\r\n\t\t\t\t\t\tlistOfTerms.push(pickedTerm);\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Overflow protection\r\n\t\t\tif (j > 10000) {\r\n\t\t\t\ti = tinyTerms[tinyTerms.pickedList].ops.displayedTerms;\r\n\t\t\t}\r\n\t\t\tj++;\r\n\t\t}\r\n\t}\r\n\t// Return final list of terms\r\n\treturn listOfTerms;\r\n}","\r\n// Imports\r\nimport { cl, clv, clickListener } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\nimport { hideModal } from 'termInteraction';\r\nimport { createNewQuery } from 'queryInteraction';\r\n\r\n// Exports\r\nexport { onboardShow, optionsDisplay };\r\n\r\n// Show home screen\r\nconst onboardShow = function onboardShow() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let onBoardText = document.querySelector('.m-onboarding');\r\n    let topTerm = document.querySelectorAll('.m-term-wrapper')[0];\r\n    let definitionHolder = topTerm.querySelector('.definition-holder');\r\n\tlet topBtn = topTerm.getElementsByTagName('button')[0];\r\n\r\n    tinyTerms.tutComplete = false;\r\n    localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n\r\n    // Onboard - Stage 1\r\n    modal.classList.remove('hidden');\r\n    document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n    let view = `<header>\r\n                    <h2 class=\"icon-child\">Welcome to Tiny Terms!</h2>\r\n                </header>\r\n                <p>Looks like this is your first time here, so let's go over some basics before you get started.</p>\r\n                <button class=\"onboard-1\">Let's go!</button>\r\n                <a href=\"#\" class=\"close-tut\">Skip the tutorial</a>\r\n                `;\r\n    modal.querySelector('.content').innerHTML = view;\r\n    modal.classList.add('onboard');\r\n    document.querySelector('.close-tut').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        hideModal(true);\r\n        modal.classList.remove('onboard');\r\n        tinyTerms.tutComplete = true;\r\n        localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n    });\r\n\r\n    document.querySelector('.onboard-1').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        onboardStage2();\r\n    });\r\n    function onboardStage2() {\r\n        hideModal(true);\r\n        topTerm.style.zIndex = \"100\";\r\n        topTerm.querySelector('.term-holder').classList.add('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.definition-wrapper').classList.add('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n        topBtn.setAttribute('disabled', 'true');\r\n        document.querySelector('.m-modal').style.cssText = \"display: none !important\";\r\n        onBoardText.classList.remove('hidden');\r\n\r\n        let view = `<p>This is one of the terms you will be learning, you get 5 each day.</p>\r\n                    <button class=\"onboard-2\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        let termOffset = topTerm.offsetTop + topTerm.offsetHeight;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        document.querySelector('.onboard-2').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage3();\r\n        });\r\n    }\r\n    function onboardStage3() {\r\n        topTerm.querySelector('.term-holder').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.term-views').classList.add('animated', 'pulse', 'infinite');\r\n        let view = `<p>On the right is the goal meter, fill this and the term is marked as complete.</p>\r\n                    <button class=\"onboard-3\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        onBoardText.classList.add('onboard-right');\r\n\r\n        document.querySelector('.onboard-3').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage4();\r\n        });\r\n    }\r\n    function onboardStage4() {\r\n        topTerm.querySelector('.term-views').classList.remove('animated', 'pulse', 'infinite');\r\n        topBtn.classList.add('animated', 'pulse', 'infinite');\r\n        \r\n\t\tlet timerOveride = setInterval(()=>{\r\n\t\t\ttopBtn.classList.remove('disabled');\r\n        \ttopBtn.removeAttribute('disabled');\r\n\t\t},100);\r\n\r\n        let view = `<p style=\"border:0; margin: 10px 0; padding: 0\">Press the reveal button to continue!</p>\r\n                    `;\r\n        onBoardText.innerHTML = view;\r\n\r\n        topBtn.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n\t\t\tclearInterval(timerOveride);\r\n            onboardStage5();\r\n        });\r\n    }\r\n    function onboardStage5() {\r\n        topBtn.classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.definition-wrapper').classList.remove('hidden');\r\n        topTerm.querySelector('.definition-holder').classList.add('animated', 'pulse', 'infinite');\r\n        topBtn.classList.add('disabled');\r\n\r\n\t\t// Prevent cheating\r\n\t\tlet goal = topTerm.querySelector('.count');\r\n\t\tlet goalCount = parseInt(goal.innerHTML);\r\n\r\n\t\tif (goalCount > 1) {\r\n\t\t\tgoalCount -= 1;\r\n\t\t\tgoal.innerHTML = goalCount;\r\n\t\t\tlet term = topTerm.querySelector('.term-holder').innerHTML;\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount = goalCount;\r\n\t\t\ttinyTerms[tinyTerms.pickedList].storedData.revealGoal[term] = goal.innerHTML = goalCount;\r\n\t\t\t // Save to storage\r\n        \tlocalforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\t\t}\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + definitionHolder.offsetHeight + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>This is the definition you need to learn, helpful information is displayed underneath.</p>\r\n                    <button class=\"onboard-5\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        onBoardText.classList.remove('onboard-right');\r\n\r\n        document.querySelector('.onboard-5').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage6();\r\n        });\r\n    }\r\n    function onboardStage6() {\r\n        topTerm.querySelector('.definition-holder').classList.remove('animated', 'pulse', 'infinite');\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>Tiny Terms uses spaced repetition, check back in an hour to add to the goal.</p>\r\n                    <button class=\"onboard-6\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        onBoardText.classList.add('onboard-right');\r\n\r\n        document.querySelector('.onboard-6').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage7();\r\n        });\r\n    }\r\n    function onboardStage7() {\r\n        topTerm.querySelector('.colour').classList.add('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.symbol').classList.add('animated', 'pulse', 'infinite');\r\n        document.querySelector('.query-holder').setAttribute('disabled', 'true');\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + definitionHolder.offsetHeight + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>You can add a colour and symbol to the term, the visual association will help you rememeber.</p>\r\n                    <button class=\"onboard-7\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        document.querySelector('.onboard-7').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage8();\r\n        });\r\n    }\r\n    function onboardStage8() {\r\n        topTerm.querySelector('.colour').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.symbol').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.style.zIndex = \"50\";\r\n        let queryWrap = document.querySelector('.m-query');\r\n        document.querySelector('.query-submit').setAttribute('disabled', 'true');\r\n        document.querySelector('.m-modal').style.cssText = \"\";\r\n        hideModal(true);\r\n\r\n        createNewQuery(true);\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        let termOffset = queryWrap.offsetTop + queryWrap.offsetHeight;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n        queryWrap.style.zIndex = \"100\";\r\n\r\n        let view = `<p>Each day you get a mini test to see how well you have rememebered, you can also unlock an extra test by completing at least one goal meter in a day.</p>\r\n                    <button class=\"onboard-8\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        document.querySelector('.onboard-8').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage9();\r\n        });\r\n    }\r\n    function onboardStage9() {\r\n        modal.classList.remove('hidden');\r\n        onBoardText.innerHTML = \"\";\r\n        onBoardText.classList.add('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n        let queryWrap = document.querySelector('.m-query');\r\n        document.querySelector('.query-holder').removeAttribute('disabled');\r\n        document.querySelector('.query-submit').removeAttribute('disabled');\r\n        \r\n\r\n        queryWrap.style.zIndex = \"50\";\r\n        queryWrap.classList.add('hidden');\r\n        topTerm.querySelector('.definition-wrapper').classList.remove('hidden');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"\">That's about it</h2>\r\n                    </header>\r\n                    <p>Fill the progress bar by completing the goal meters to finish the list! You get points for answering tests correctly and completing goal meters, use them to unlock cool stuff. <br><br>Good luck!</p>\r\n                    <button class=\"close-tut\">Close the tutorial</button>\r\n                    `;\r\n        modal.querySelector('.content').innerHTML = view;\r\n        modal.classList.add('onboard');\r\n        document.querySelector('.close-tut').addEventListener(\"click\", (e) => {\r\n            e.preventDefault();\r\n            hideModal(true);\r\n            tinyTerms.tutComplete = true;\r\n            localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n            modal.classList.remove('onboard');\r\n        });\r\n    }\r\n}\r\n\r\n// Help screen\r\nconst optionsDisplay = function optionsDisplay() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let settingsBtn = document.querySelector('.settings');\r\n\r\n    settingsBtn.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"icon-cog-outline\">Options</h2>\r\n                    </header>\r\n                    <div class=\"options\">\r\n                        <p>Spend points: (coming soon)</p>\r\n                        <a href=\"#\" class=\"icon-award-empty points-neon-colours\">1000: Unlock neon colours</a>\r\n                        <a href=\"#\" class=\"icon-award points-life-glyphs\">5000: Unlock solid symbols</a>\r\n                        <a href=\"#\" class=\"icon-award-1 points-metal-colours\">10000: Unlock metal colours</a>\r\n                        <p>Help</p>\r\n                        <a href=\"#\" class=\"icon-right-open-big show-tut\">Show the tutorial again</a>\r\n                        <p>More Options</p>\r\n                        <a href=\"#\" class=\"icon-right-open-big reset-list\">Reset list progress</a>\r\n                        <a href=\"#\" class=\"icon-right-open-big reset\">Reset the app</a>\r\n                    </div>\r\n                    `;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n        let resetList = document.querySelector('.reset-list');\r\n        let resetApp = document.querySelector('.reset');\r\n\r\n        document.querySelector('.show-tut').addEventListener('click', (e) => {e.preventDefault(); onboardShow()});\r\n\r\n        function resetMenu() {\r\n            if (document.querySelector('.delete-confirm') !== null) {\r\n                resetList.innerHTML = \"Reset list progress\";\r\n                resetApp.innerHTML = \"Reset the app\";\r\n                document.querySelector('.delete-confirm').parentNode.removeChild(document.querySelector('.delete-cancel'));\r\n                document.querySelector('.delete-confirm').parentNode.removeChild(document.querySelector('.delete-confirm'));\r\n            }\r\n        }\r\n        resetList.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            resetMenu();\r\n            resetList.innerHTML = \"Are you sure you want to delete progress for this list? (Can't undo)\";\r\n            resetList.parentNode.insertBefore(document.createElement(\"div\"), resetList.nextSibling);\r\n            resetList.nextSibling.innerHTML = '<button class=\"delete-cancel\">Cancel</button><button class=\"delete-confirm\">Confim</button>';\r\n\r\n            document.querySelector('.delete-confirm').addEventListener('click', () => { \r\n                delete tinyTerms[tinyTerms.pickedList];\r\n                localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n                location.reload();\r\n            });\r\n            document.querySelector('.delete-cancel').addEventListener('click', () => { \r\n                hideModal(true);\r\n            });\r\n        });\r\n        document.querySelector('.reset').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            resetMenu();\r\n            resetApp.innerHTML = \"Are you sure you want to delete all progress for the app? (Can't undo)\";\r\n            resetApp.parentNode.insertBefore(document.createElement(\"div\"), resetApp.nextSibling);\r\n            resetApp.nextSibling.innerHTML = '<button class=\"delete-cancel\">Cancel</button><button class=\"delete-confirm\">Confim</button>';\r\n\r\n            document.querySelector('.delete-confirm').addEventListener('click', () => { \r\n                localforage.clear().then(()=> {\r\n                    location.reload();\r\n                });\r\n            });\r\n            document.querySelector('.delete-cancel').addEventListener('click', () => { \r\n                hideModal(true);\r\n            });\r\n        });\r\n    });\r\n}\r\n"]}