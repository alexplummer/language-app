{"version":3,"sources":["app.js","helperFunctions.js","termCreation.js","appData.js","viewCreation.js","queryInteraction.js","termInteraction.js","homeScreen.js","introInstructions.js"],"names":["app","ready","fn","document","readyState","addEventListener","cl","log","console","buildData","data","columnName","Sheet1","columnNames","tinyTerms","pickedList","speechLang","dictFrom","elements","dictTo","action","terms","i","length","termContent","Term","definitionContent","Definition","supportContent","Support","term","definition","support","postBuildCallback","checkSameDay","todaysDate","getTodaysDate","storedDate","Array","from","storedData","dateOpened","arrayCheck","ops","addDay","newDay","todayDate","day","Date","getDate","month","getMonth","push","checkURL","str","a","createElement","href","host","window","location","makeSafeClass","name","replace","s","c","charCodeAt","toLowerCase","toString","slice","arr1","arr2","JSON","stringify","clickListener","clickFunction","e","preventDefault","pickRandom","objectList","keys","Object","pickedTerm","Math","random","checkQuery","item1","item2","toUpperCase","getBigrams","string","j","ref","v","stringSimilarity","str1","str2","hit_count","k","len","len1","pairs1","pairs2","union","x","y","relevance","wordAccuracy","appBlur","hidden","onchange","onfocusin","onfocusout","onpageshow","onpagehide","onfocus","onblur","evt","h","evtMap","focus","focusin","pageshow","blur","focusout","pagehide","event","type","reload","undefined","jsonp","uri","Promise","resolve","reject","id","round","callbackName","ele","getElementById","parentNode","removeChild","src","script","getElementsByTagName","body","documentElement","appendChild","getListOfTerms","listOfTerms","scannedTerms","dataLength","displayedTerms","firstTime","includes","incorrectTerms","reminderTerm","remindedTerms","dailyReminder","getOwnPropertyNames","viewedTerms","viewedLength","viewedSorted","m","hasOwnProperty","splice","sort","b","appData","fonts","feather","viewCreate","termsToCreate","viewHTML","value","termValue","definitionValue","supportValue","termEncode","revealCounter","viewsCount","viewCount","querySelector","innerHTML","newHolder","revealDailyBonusTarget","colour","termWrapper","pickedColour","style","background","classList","add","color","border","symbol","pickedSymbol","revealCountdowns","revealBtn","querySelectorAll","revealTerm","createRevealTimer","addHearts","heartHolder","heartsHTML","hearts","points","localforage","setItem","storedName","setScore","scoreHolder","score","progressBar","learnedTerms","completed","remaining","width","createNewQuery","bonus","randomTerm","queryTerms","correctTerms","cycledTerms","dailyQuery","queryHandler","dailyTerms","indexOf","remove","queryWrapper","queryHolder","querySubmit","resultHolder","parseInt","count","queryComplete","keyCode","click","queryInput","winCase","loseCase","spelling","input","correct","gameWon","placeholder","revealedBtnHandler","contains","countHolder","definitionWrapper","definitionHolder","revealBonusCount","revealDailyBonus","complete","dailyBonus","minutes","counterMins","seconds","counterSecs","remainingMinutes","remainingSeconds","startTime","timerEnded","getTime","startTimer","nowTime","setAttribute","diffSecs","floor","totalSecs","clearInterval","timerUpdate","timeout","checkCount","setInterval","buttonTimer","disabled","displayedMinutes","displayedSeconds","hiddenZero","textToSpeech","termHolder","speech","SpeechSynthesisUtterance","lang","speechSynthesis","speak","dictionaryLookup","dictionaryBtn","modal","view","then","dictionaryResponses","findProp","obj","key","out","proto","prototype","ts","hasOwn","bind","call","err","addColour","colourBtn","picker","colours","coloursHolder","colourListener","getAttribute","hideModal","pickSymbol","symbolBtn","symbolHTML","symbols","symbolListener","target","srcElement","trigger","modalClose","closeModal","showHome","uploadedLists","getItem","customListChoices","val","listName","listURL","sheetURL","homeWrapper","lists","listChoices","listItem","removeList","childNodes","zIndex","inputName","inputSheet","uploadList","substring","customlist","onboardShow","onBoardText","topTerm","tutComplete","onboardStage2","termOffset","offsetTop","offsetHeight","top","onboardStage3","onboardStage4","removeAttribute","onboardStage5","onboardStage6","onboardStage7","onboardStage8","queryWrap","onboardStage9","optionsDisplay","settingsBtn","resetList","resetApp","resetMenu","insertBefore","nextSibling","clear","debug","loadDelay","setTimeout","pickList","skipDefaultCheck","tinyTermsDefault","tutStatus","checkDefault","normalLoad","firstLoad","defaultlist","initialise","fetchData","Tabletop","init","callback","simpleSheet","appBuildHandler","pickedTerms","revealedTermCount","menuTrigger","tinyTerms$1"],"mappings":"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","file":"app.js","sourcesContent":["\r\n// Imports\r\nimport { ready, cl, clv, buildData, checkSameDay,arrayCheck, getTodaysDate, appBlur } from 'helperFunctions';\r\nimport { getListOfTerms } from 'termCreation';\r\nimport { revealedBtnHandler, dictionaryLookup, textToSpeech, addColour, hideModal, pickSymbol } from 'termInteraction';\r\nimport { viewCreate, addHearts, setScore, progressBar } from 'viewCreation';\r\nimport { createNewQuery } from 'queryInteraction';\r\nimport { showHome } from 'homeScreen';\r\nimport { onboardShow, optionsDisplay } from 'introInstructions';\r\nimport appData from 'appData';\r\n\r\n// Exports\r\nexport default tinyTerms;\r\n\r\n// App namespace\r\nlet tinyTerms = tinyTerms || {};\r\n\r\n// Global options\r\nlet ops = {\r\n    displayedTerms: 5,\r\n    counterMins: 60,\r\n    counterSecs: 0,\r\n    revealDailyBonusTarget: 5,\r\n    wordAccuracy: 0.7,\r\n    addDay: false,\r\n    debug: true,\r\n    loadDelay: 2500,\r\n    points: {\r\n        correct: 50,\r\n        dailyBonus: 10,\r\n        hearts: 3\r\n    }\r\n}\r\n\r\n// Default list choices\r\ntinyTerms.listChoices = {\r\n    \"Italian Verbs (ENG)\": {\r\n        name: \"Italian Verbs (ENG)\",\r\n        sheetURL: \"https://docs.google.com/spreadsheets/d/1Q1pmDXybg_GDB6bSXknuBET2Nm8L-Roi2Kj01SHm_WI/pubhtml\"\r\n    },\r\n    \"Computer Components\": {\r\n        name: \"Computer Components\",\r\n        sheetURL: \"https://docs.google.com/spreadsheets/d/1Ho5Viqg71mIBlbyAIjLIqHEWRr4znDCLZSBtwVTtZk0/edit\"\r\n    },\r\n    \"Periodic Elements\": {\r\n        name: \"Periodic Elements\",\r\n        sheetURL: \"https://docs.google.com/spreadsheets/d/1sL3kTrZq3Hdb_iBo7hC8x9oGXXownlxmmdmmvALAPlU/edit#gid=0\"\r\n    }\r\n}\r\n\r\n// Crash protection\r\nsetTimeout(() => {\r\n    document.getElementsByTagName('body')[0].classList.remove('loading');\r\n}, 10000);\r\n\r\n// Initialise modules on load\r\nready(function () {\r\n    'use strict';\r\n    pickList();\r\n});\r\n\r\n// Pick a list\r\nconst pickList = function pickList(skipDefaultCheck) {    \r\n    let tinyTermsDefault;\r\n\r\n    localforage.getItem('tinyTerms.tutComplete', function(err, tutStatus) {\r\n        tinyTerms.tutComplete = tutStatus;\r\n\r\n        // Check for default list, used on very first load\r\n        localforage.getItem('tinyTermsDefault', function(err, value) {\r\n            tinyTermsDefault = value;\r\n\r\n            if (tinyTermsDefault === null) {\r\n                showHome();\r\n            }\r\n            else {\r\n                checkDefault();\r\n            }\r\n        });\r\n    });\r\n    function checkDefault() {\r\n        // Check for existing data of newly picked list\r\n        localforage.getItem('tinyTerms'+tinyTermsDefault, function(err, value) {\r\n\r\n            if (value !== null) {\r\n                tinyTerms.pickedList = tinyTermsDefault;\r\n                normalLoad(tinyTerms.pickedList);\r\n            }\r\n            else {\r\n                firstLoad();\r\n            }\r\n        });\r\n    }\r\n    function normalLoad(defaultlist) {\r\n\r\n        tinyTerms.storedName = \"tinyTerms\"+defaultlist;\r\n\r\n        localforage.getItem('tinyTerms'+defaultlist, function(err, value) {\r\n            // Set session storage to stored\r\n            tinyTerms[tinyTerms.pickedList] = value;\r\n            // Update stored ops\r\n            tinyTerms[tinyTerms.pickedList].ops = ops;\r\n            initialise();\r\n        });\r\n    }\r\n}\r\n\r\n// Sets up new list, gets data\r\nconst firstLoad = function firstLoad() {\r\n    localforage.getItem('tinyTermsDefault', function(err, value) {\r\n        // Set session storage to stored\r\n        tinyTerms.pickedList = value;\r\n        // Set picked list and create data object for it\r\n        tinyTerms[tinyTerms.pickedList] = {};\r\n        tinyTerms[tinyTerms.pickedList].storedData = {};\r\n        tinyTerms[tinyTerms.pickedList].ops = ops;\r\n        tinyTerms.storedName = \"tinyTerms\"+tinyTerms.pickedList;\r\n        // Set new list to storage, add as default\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n        // Add default lists to uploadedLists, same place as user upload\r\n        localforage.getItem('tinyTerms.uploadedLists', function(err, uploadedLists) {\r\n            \r\n            // Get uploaded lists\r\n            for (let val in uploadedLists) {\r\n                let listName = uploadedLists[val].name;\r\n                let listURL = uploadedLists[val].sheetURL;\r\n                \r\n                tinyTerms.listChoices[listName] = {\r\n                    name: listName,\r\n                    sheetURL: listURL\r\n                }\r\n            }\r\n            // Fetch data for list\r\n            fetchData(tinyTerms.listChoices[tinyTerms.pickedList].sheetURL, firstTime);\r\n        });\r\n    });\r\n}\r\n\r\n// Fetches list data\r\nconst fetchData = function fetchData(sheetURL, postBuildCallback) {\r\n    // Add a callback method\r\n    tinyTerms.postBuildCallback = postBuildCallback;\r\n    \r\n    // Get data from sheets\r\n    Tabletop.init({\r\n        key: sheetURL,\r\n        callback: buildData,\r\n        simpleSheet: false\r\n    });\r\n}\r\n\r\n// Runs if first time app has run\r\nconst firstTime = function firstTime() {\r\n    // Create terms\r\n    appBuildHandler();\r\n    // Show intro onboarding\r\n    if (tinyTerms.tutComplete === null) {\r\n        onboardShow();\r\n    }\r\n    // Then set first time to false\r\n    tinyTerms[tinyTerms.pickedList].storedData.firstTime = false;\r\n    // Add to storage\r\n    localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n}\r\n\r\n// Initialises data and app\r\nconst initialise = function initialise() {\r\n    // Check if a new day\r\n    checkSameDay();\r\n    // Start build\r\n    appBuildHandler();\r\n}\r\n\r\n// Calls functions to handle app creation and running\r\nconst appBuildHandler = function appBuildHandler() {\r\n\r\n    // Get initial terms\r\n    let pickedTerms;\r\n    \r\n    // If same day, used daily terms\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.newDay === false) {\r\n        pickedTerms = tinyTerms[tinyTerms.pickedList].storedData.dailyTerms;\r\n    }\r\n    // Else get new  \r\n    else {\r\n        pickedTerms = getListOfTerms();\r\n\r\n        // Clear daily goals\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.revealedTermCount;\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.revealDailyBonus;\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns;\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.dailyReminder;\r\n\r\n        // Set daily limit\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealDailyBonus = {};\r\n        // Reset daily reveal bonus\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealDailyBonus.complete = false;\r\n        \r\n        // Create query if revealed terms\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms !== undefined) {\r\n            createNewQuery();\r\n        }\r\n\r\n        // Create reminded terms default\r\n        tinyTerms[tinyTerms.pickedList].storedData.remindedTerms = tinyTerms[tinyTerms.pickedList].storedData.remindedTerms || {}\r\n    }\r\n    \r\n    // Create initial view\r\n    viewCreate(pickedTerms);\r\n    setScore();\r\n\r\n    // Create opened date, daily terms, viewed terms\r\n    tinyTerms[tinyTerms.pickedList].storedData.dateOpened = getTodaysDate();\r\n    tinyTerms[tinyTerms.pickedList].storedData.dailyTerms = pickedTerms;\r\n\r\n    // Add to storage\r\n    localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n    // Keep query active each day\r\n    tinyTerms[tinyTerms.pickedList].storedData.queryComplete = tinyTerms[tinyTerms.pickedList].storedData.queryComplete || {};\r\n\r\n    // Load query if it exists already\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.dailyQuery !== undefined && tinyTerms[tinyTerms.pickedList].storedData.queryComplete !== true) {\r\n        createNewQuery();\r\n    }\r\n\r\n    // Handles events for revealed terms\r\n    revealedBtnHandler();\r\n    dictionaryLookup();\r\n    textToSpeech();\r\n    addColour();\r\n    pickSymbol();\r\n    hideModal();\r\n    progressBar();\r\n\r\n    // Shows options menu\r\n    optionsDisplay();\r\n    \r\n    // Refresh window on blur\r\n    appBlur();\r\n\r\n    // Once loaded\r\n    setTimeout(() => {\r\n        document.getElementsByTagName('body')[0].classList.remove('loading');\r\n        document.querySelector('.m-query').classList.add('animated', 'slideInDown');\r\n    }, tinyTerms[tinyTerms.pickedList].ops.loadDelay);\r\n\r\n     // Set menu button listener\r\n    let menuTrigger = document.getElementsByTagName('h1');\r\n\r\n    menuTrigger[0].addEventListener('click', (e)=>{\r\n        e.preventDefault();\r\n        showHome();\r\n    });\r\n\r\n    // Show onboard if incomplete\r\n    if (tinyTerms.tutComplete === false) {\r\n        onboardShow();\r\n    }\r\n\r\n    // Debug code\r\n    if (tinyTerms[tinyTerms.pickedList].ops.debug === true) {\r\n        cl(tinyTerms);\r\n        //cl('Revealed terms count:');\r\n        //cl(tinyTerms[tinyTerms.pickedList].storedData.revealedTermCount);\r\n        //cl('Viewed terms count:');\r\n        //cl(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms);\r\n        //cl('Revealed terms timer:');\r\n        //cl(tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns);\r\n    };\r\n}\r\n\r\n","\r\n// Imports\r\nimport tinyTerms from 'app';\r\n\r\n// Exports\r\nexport {\r\n    ready,\r\n    cl,\r\n    clv,\r\n    buildData,\r\n    checkSameDay,\r\n    arrayCheck,\r\n    makeSafeClass,\r\n    getTodaysDate,\r\n    checkURL,\r\n    pickRandom,\r\n    clickListener,\r\n    getTimeComplete,\r\n    checkQuery,\r\n    appBlur,\r\n    jsonp,\r\n    findKeys,\r\n    updateDataCount,\r\n    getCSS\r\n};\r\n\r\n// JS ready\r\nfunction ready(fn) {\r\n    if (document.readyState != 'loading') {\r\n        fn();\r\n    } else {\r\n        document.addEventListener('DOMContentLoaded', fn);\r\n    }\r\n}\r\n\r\n// Console log -> cl\r\nfunction cl(log) {\r\n    console.log(log);\r\n}\r\n\r\n// Console log plus value\r\nfunction clv(term, log) {\r\n    console.log(term + '= ' + log);\r\n}\r\n\r\n// Gets data from Google Sheets\r\nconst buildData = function buildData(data) {\r\n    let columnName = data.Sheet1.columnNames[1];\r\n\r\n    tinyTerms[tinyTerms.pickedList].speechLang = columnName;\r\n    tinyTerms[tinyTerms.pickedList].dictFrom = data.Sheet1.elements[0][columnName];\r\n    tinyTerms[tinyTerms.pickedList].dictTo = data.Sheet1.elements[1][columnName];\r\n    tinyTerms[tinyTerms.pickedList].action = data.Sheet1.elements[2][columnName];\r\n    tinyTerms[tinyTerms.pickedList].terms = tinyTerms[tinyTerms.pickedList].terms || {};\r\n\r\n    for (let i = 1; i < data.Sheet1.elements.length; i++) {\r\n        let termContent = data.Sheet1.elements[i].Term;\r\n        let definitionContent = data.Sheet1.elements[i].Definition;\r\n        let supportContent = data.Sheet1.elements[i].Support;\r\n\r\n        tinyTerms[tinyTerms.pickedList].terms[termContent] = {};\r\n        tinyTerms[tinyTerms.pickedList].terms[termContent].term = termContent;\r\n        tinyTerms[tinyTerms.pickedList].terms[termContent].definition = definitionContent;\r\n        tinyTerms[tinyTerms.pickedList].terms[termContent].support = supportContent;\r\n    }\r\n    tinyTerms.postBuildCallback();\r\n}\r\n\r\n// Checks if the same or new day\r\nfunction checkSameDay() {\r\n\r\n    let todaysDate = getTodaysDate();\r\n    let storedDate = [];\r\n\r\n    // Get date last stored\r\n    storedDate = Array.from(tinyTerms[tinyTerms.pickedList].storedData.dateOpened);\r\n\r\n    // Check if same day\r\n    if (arrayCheck(todaysDate, storedDate) === true) {\r\n        if (tinyTerms[tinyTerms.pickedList].ops.addDay === true) { tinyTerms[tinyTerms.pickedList].storedData.newDay = true }\r\n        else { tinyTerms[tinyTerms.pickedList].storedData.newDay = false }\r\n    }\r\n    // Otherwise a new day\r\n    else {\r\n        tinyTerms[tinyTerms.pickedList].storedData.newDay = true;\r\n    }\r\n}\r\n\r\n// Creates array of day and month\r\nfunction getTodaysDate() {\r\n\r\n    // Get current day + month\r\n    let todayDate = [];\r\n    let day = new Date().getDate()\r\n    let month = new Date().getMonth();\r\n\r\n    todayDate.push([day, month]);\r\n\r\n    return todayDate;\r\n}\r\n\r\n// Creates array of day, month, hour, minute, second\r\nfunction getTimeComplete() {\r\n\r\n    // Get complete date time value \r\n    let timeComplete = [];\r\n    let day = new Date().getDate();\r\n    let month = new Date().getMonth();\r\n    let hour = new Date().getHours();\r\n    let minute = new Date().getMinutes();\r\n    let second = new Date().getSeconds();\r\n\r\n    timeComplete.push([day, month, hour, minute, second]);\r\n\r\n    return timeComplete;\r\n}\r\n\r\n// Validate URL\r\nconst checkURL = function checkURL(str) {\r\n    let a  = document.createElement('a');\r\n    a.href = str;\r\n    return (a.host && a.host != window.location.host);\r\n}\r\n\r\n// Makes a safe class name\r\nconst makeSafeClass = function makeSafeClass(name) {\r\n    return name.replace(/[^a-z0-9]/g, function(s) {\r\n        var c = s.charCodeAt(0);\r\n        if (c == 32) return '-';\r\n        if (c >= 65 && c <= 90) return '_' + s.toLowerCase();\r\n        return '__' + ('000' + c.toString(16)).slice(-4);\r\n    });\r\n}\r\n\r\n\r\n// Check if arrays are the same\r\nfunction arrayCheck(arr1, arr2) {\r\n\r\n    // If same return true\r\n    if (JSON.stringify(arr1) == JSON.stringify(arr2)) {\r\n        return true;\r\n    }\r\n    // Else false\r\n    return false;\r\n}\r\n\r\n// Adds click functionality to selectors\r\nfunction clickListener(elements, clickFunction) {\r\n\r\n    for (let i = 0; i < elements.length; i++) {\r\n        elements[i].addEventListener(\"click\", (e) => { e.preventDefault(); clickFunction(i) });\r\n    }\r\n}\r\n\r\n// Get a random term\r\nfunction pickRandom(objectList) {\r\n    let keys = Object.keys(objectList),\r\n        pickedTerm = keys[keys.length * Math.random() << 0];\r\n\r\n    return pickedTerm;\r\n}\r\n\r\n// Check if two words the same\r\nfunction checkQuery(item1, item2) {\r\n\r\n    if (item1 === item2) return true;\r\n    if (item1.toUpperCase() === item2.toUpperCase()) return true;\r\n\r\n    // Perform fuzzy comparison\r\n    let getBigrams = function (string) {\r\n        let i, j, ref, s, v;\r\n        s = string.toLowerCase();\r\n        v = new Array(s.length - 1);\r\n        for (i = j = 0, ref = v.length; j <= ref; i = j += 1) {\r\n            v[i] = s.slice(i, i + 2);\r\n        }\r\n        return v;\r\n    };\r\n    let stringSimilarity = function (str1, str2) {\r\n        let hit_count, j, k, len, len1, pairs1, pairs2, union, x, y;\r\n        if (str1.length > 0 && str2.length > 0) {\r\n            pairs1 = getBigrams(str1);\r\n            pairs2 = getBigrams(str2);\r\n            union = pairs1.length + pairs2.length;\r\n            hit_count = 0;\r\n            for (j = 0, len = pairs1.length; j < len; j++) {\r\n                x = pairs1[j];\r\n                for (k = 0, len1 = pairs2.length; k < len1; k++) {\r\n                    y = pairs2[k];\r\n                    if (x === y) {\r\n                        hit_count++;\r\n                    }\r\n                }\r\n            }\r\n            if (hit_count > 0) {\r\n                return (2.0 * hit_count) / union;\r\n            }\r\n        }\r\n        return 0.0;\r\n    };\r\n    let relevance = stringSimilarity(item1, item2);\r\n    if (relevance > tinyTerms[tinyTerms.pickedList].ops.wordAccuracy) return \"mispelled\";\r\n    \r\n    // Else false\r\n    return false;\r\n}\r\n\r\n// When user navigates away from page\r\nconst appBlur = function appBlur() {\r\n  var hidden = \"hidden\";\r\n\r\n  // Standards:\r\n  if (hidden in document)\r\n    document.addEventListener(\"visibilitychange\", onchange);\r\n  else if ((hidden = \"mozHidden\") in document)\r\n    document.addEventListener(\"mozvisibilitychange\", onchange);\r\n  else if ((hidden = \"webkitHidden\") in document)\r\n    document.addEventListener(\"webkitvisibilitychange\", onchange);\r\n  else if ((hidden = \"msHidden\") in document)\r\n    document.addEventListener(\"msvisibilitychange\", onchange);\r\n  // IE 9 and lower:\r\n  else if (\"onfocusin\" in document)\r\n    document.onfocusin = document.onfocusout = onchange;\r\n  // All others:\r\n  else\r\n    window.onpageshow = window.onpagehide\r\n    = window.onfocus = window.onblur = onchange;\r\n\r\n  function onchange (evt) {\r\n    var v = \"visible\", h = \"hidden\",\r\n        evtMap = {\r\n          focus:v, focusin:v, pageshow:v, blur:h, focusout:h, pagehide:h\r\n        };\r\n\r\n    evt = evt || window.event;\r\n    if (evt.type in evtMap) {\r\n        //cl(evtMap[evt.type]);\r\n    }\r\n    else {\r\n        location.reload();\r\n    } \r\n  }\r\n\r\n  // set the initial state (but only if browser supports the Page Visibility API)\r\n  if( document[hidden] !== undefined )\r\n    onchange({type: document[hidden] ? \"blur\" : \"focus\"});\r\n}\r\n\r\n// Creates JSONP requests\r\nconst jsonp = function jsonp(uri){\r\n    return new Promise(function(resolve, reject){\r\n        var id = '_' + Math.round(10000 * Math.random());\r\n        var callbackName = 'jsonp_callback_' + id;\r\n        window[callbackName] = function(data){\r\n            delete window[callbackName];\r\n            var ele = document.getElementById(id);\r\n            ele.parentNode.removeChild(ele);\r\n            resolve(data);\r\n        }\r\n\r\n        var src = uri + '&callback=' + callbackName;\r\n        var script = document.createElement('script');\r\n        script.src = src;\r\n        script.id = id;\r\n        script.addEventListener('error', reject);\r\n        (document.getElementsByTagName('head')[0] || document.body || document.documentElement).appendChild(script);\r\n    });\r\n}\r\n\r\n// Find all keys in object ! Potentially cyclicle !\r\nconst findKeys = function findKeys(obj, key) {\r\n    let val = obj[key];\r\n    let keysList = [];\r\n\r\n    for (val in obj){\r\n        if (obj[val] === key){\r\n            keysList.push(obj[val]);\r\n        }\r\n    }\r\n    return keysList;\r\n}\r\n\r\n// Handles count of a type of data\r\nconst updateDataCount = function updateDataCount(objectParent, newProps, baseValue) {\r\n\r\n    // If no viewed data, create new \r\n    if (!objectParent.hasOwnProperty(newProps)) {\r\n\r\n        for (let value of newProps) {\r\n            objectParent[value] = baseValue;\r\n        }\r\n    }\r\n    // If viewed data exists\r\n    else {\r\n        // Update count\r\n        for (let value of newProps) {\r\n\r\n            if (objectParent.hasOwnProperty(value)) {\r\n                objectParent[value] += 1;\r\n            }\r\n            else {\r\n                objectParent[value] = baseValue;\r\n            }\r\n        }\r\n    }\r\n    // Pass back final object\r\n    return objectParent;\r\n}\r\n\r\n// Returns a CSS property for an elements\r\nconst getCSS = function getCSS(style, selector) {\r\n\r\n    for (let i = 0; i < document.styleSheets.length; i++) {\r\n        let mysheet = document.styleSheets[i];\r\n        let myrules = mysheet.cssRules ? mysheet.cssRules : mysheet.rules;\r\n        for (let j = 0; j < myrules.length; j++) {\r\n            if (myrules[j].selectorText && myrules[j].selectorText.toLowerCase() === selector) {\r\n                return myrules[j].style[style];\r\n            }\r\n        }\r\n    }\r\n}","\r\n// Imports\r\nimport { cl, clv, pickRandom } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\n\r\n// Exports\r\nexport { getListOfTerms };\r\n\r\n// Creates a list of terms\r\nconst getListOfTerms = function getListOfTerms() {\r\n\r\n    let i = 0;\r\n    let j = 0;\r\n    let listOfTerms = [];\r\n    let scannedTerms = [];\r\n    const dataLength = Object.keys(tinyTerms[tinyTerms.pickedList].terms).length;\r\n\r\n    // Prevent overflow\r\n    if (tinyTerms[tinyTerms.pickedList].ops.displayedTerms > dataLength) {\r\n        tinyTerms[tinyTerms.pickedList].ops.displayedTerms = dataLength;\r\n    }\r\n\r\n    // First time app opened\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.firstTime === undefined) {\r\n\r\n        while (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n            let pickedTerm = pickRandom(tinyTerms[tinyTerms.pickedList].terms);\r\n\r\n            // Ensure term hasn't been already scanned\r\n            if (!listOfTerms.includes(pickedTerm)) {\r\n                listOfTerms.push(pickedTerm);\r\n                i++;\r\n            }\r\n        }\r\n    }\r\n    // App opened before\r\n    else {\r\n\r\n        // Add reminder for previous incorrect term\r\n        tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms = tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms || {};\r\n\r\n        if (Object.keys(tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms).length > 0) {\r\n            \r\n            let reminderTerm;\r\n\r\n            // Add reminded terms list\r\n            tinyTerms[tinyTerms.pickedList].storedData.remindedTerms = tinyTerms[tinyTerms.pickedList].storedData.remindedTerms || {};\r\n\r\n            // Keep reminded term the same\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder === undefined) {\r\n                tinyTerms[tinyTerms.pickedList].storedData.dailyReminder = {};\r\n                reminderTerm = pickRandom(tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms);\r\n                tinyTerms[tinyTerms.pickedList].storedData.dailyReminder[reminderTerm] = tinyTerms[tinyTerms.pickedList].terms[reminderTerm].definition; \r\n            }\r\n            else { \r\n                reminderTerm = tinyTerms[tinyTerms.pickedList].storedData.dailyReminder;\r\n                reminderTerm = Object.getOwnPropertyNames(reminderTerm);\r\n            }\r\n            // Add to terms\r\n            listOfTerms.push(reminderTerm);\r\n            // Remove from incorrect terms\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms[reminderTerm];\r\n            // Add to list of reminded terms\r\n            tinyTerms[tinyTerms.pickedList].storedData.remindedTerms[reminderTerm] = tinyTerms[tinyTerms.pickedList].terms[reminderTerm].definition;\r\n            i++;\r\n        }\r\n        // Choose terms to  display\r\n        while (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n            tinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n            let viewedLength = Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length;\r\n\r\n            // If all terms viewed\r\n            if (viewedLength === dataLength) {\r\n\r\n                let viewedSorted = [];\r\n\r\n                // Convert viewed terms to array\r\n                for (let term in tinyTerms[tinyTerms.pickedList].storedData.viewedTerms) {\r\n                    viewedSorted.push([term, tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term]]);\r\n                }\r\n                // If reminder term picked remove from selection\r\n                if (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder !== undefined) {\r\n                    for (let m=viewedSorted.length-1; m>=0; m--) {\r\n                        if (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder.hasOwnProperty(viewedSorted[m][0])) { \r\n                            viewedSorted.splice(m, 1);\r\n                        }\r\n                    }\r\n                }\r\n                // Sort array by view count\r\n                viewedSorted.sort((a, b) => {\r\n                    return a[1] - b[1]\r\n                })\r\n                // Finish off iterator with lowest viewed terms\r\n                while (i < tinyTerms[tinyTerms.pickedList].ops.displayedTerms) {\r\n                    listOfTerms.push(viewedSorted[i][0]);\r\n                    i++;\r\n                }\r\n                // Overflow protection\r\n                i++;\r\n            }\r\n            // Still unviewed terms in data\r\n            else {\r\n                let pickedTerm = pickRandom(tinyTerms[tinyTerms.pickedList].terms);\r\n\r\n                // Ensure term hasn't been already scanned\r\n                if (!scannedTerms.includes(pickedTerm)) {\r\n                    scannedTerms.push(pickedTerm);\r\n\r\n                    // Ensure term not viewed before\r\n                    if (!tinyTerms[tinyTerms.pickedList].storedData.viewedTerms.hasOwnProperty(pickedTerm)) {\r\n                        listOfTerms.push(pickedTerm);\r\n                        i++;\r\n                    }\r\n                }\r\n            }\r\n            // Overflow protection\r\n            if (j > 10000) {\r\n                i = tinyTerms[tinyTerms.pickedList].ops.displayedTerms;\r\n            }\r\n            j++;\r\n        }\r\n    }\r\n    // Return final list of terms\r\n    return listOfTerms;\r\n}","// App data\r\n\r\nexport default {\r\n    fonts: {\r\n        feather: [\r\n            \"icon-lines-and-angles_accommodate\",\r\n            \"icon-lines-and-angles_adapt\",\r\n            \"icon-lines-and-angles_add\",\r\n            \"icon-lines-and-angles_adjust\",\r\n            \"icon-lines-and-angles_agitate\",\r\n            \"icon-lines-and-angles_agree\",\r\n            \"icon-lines-and-angles_aid\",\r\n            \"icon-lines-and-angles_alarm\",\r\n            \"icon-lines-and-angles_alert\",\r\n            \"icon-lines-and-angles_amaze\",\r\n            \"icon-lines-and-angles_amplify\",\r\n            \"icon-lines-and-angles_analyze\",\r\n            \"icon-lines-and-angles_announce\",\r\n            \"icon-lines-and-angles_arrest\",\r\n            \"icon-lines-and-angles_ascend\",\r\n            \"icon-lines-and-angles_ask\",\r\n            \"icon-lines-and-angles_assist\",\r\n            \"icon-lines-and-angles_attract\",\r\n            \"icon-lines-and-angles_augment\",\r\n            \"icon-lines-and-angles_bake\",\r\n            \"icon-lines-and-angles_balance\",\r\n            \"icon-lines-and-angles_battle\",\r\n            \"icon-lines-and-angles_be\",\r\n            \"icon-lines-and-angles_believe\",\r\n            \"icon-lines-and-angles_birth\",\r\n            \"icon-lines-and-angles_blaze\",\r\n            \"icon-lines-and-angles_blend\",\r\n            \"icon-lines-and-angles_bloom\",\r\n            \"icon-lines-and-angles_blow\",\r\n            \"icon-lines-and-angles_bookmark\",\r\n            \"icon-lines-and-angles_bootleg\",\r\n            \"icon-lines-and-angles_bounce\",\r\n            \"icon-lines-and-angles_break\",\r\n            \"icon-lines-and-angles_brew\",\r\n            \"icon-lines-and-angles_broadcast\",\r\n            \"icon-lines-and-angles_browse\",\r\n            \"icon-lines-and-angles_build\",\r\n            \"icon-lines-and-angles_burn\",\r\n            \"icon-lines-and-angles_bury\",\r\n            \"icon-lines-and-angles_buy\",\r\n            \"icon-lines-and-angles_caffeinate\",\r\n            \"icon-lines-and-angles_calculate\",\r\n            \"icon-lines-and-angles_calibrate\",\r\n            \"icon-lines-and-angles_carry\",\r\n            \"icon-lines-and-angles_carve\",\r\n            \"icon-lines-and-angles_cast\",\r\n            \"icon-lines-and-angles_catch\",\r\n            \"icon-lines-and-angles_cease\",\r\n            \"icon-lines-and-angles_celebrate\",\r\n            \"icon-lines-and-angles_challenge\",\r\n            \"icon-lines-and-angles_charge\",\r\n            \"icon-lines-and-angles_charm\",\r\n            \"icon-lines-and-angles_chart\",\r\n            \"icon-lines-and-angles_chat\",\r\n            \"icon-lines-and-angles_choose\",\r\n            \"icon-lines-and-angles_chop\",\r\n            \"icon-lines-and-angles_clean\",\r\n            \"icon-lines-and-angles_cleanse\",\r\n            \"icon-lines-and-angles_climb\",\r\n            \"icon-lines-and-angles_drum\",\r\n            \"icon-lines-and-angles_eat\",\r\n            \"icon-lines-and-angles_edit\",\r\n            \"icon-lines-and-angles_enhance\",\r\n            \"icon-lines-and-angles_enlarge\",\r\n            \"icon-lines-and-angles_enter\",\r\n            \"icon-lines-and-angles_equal\",\r\n            \"icon-lines-and-angles_erase\",\r\n            \"icon-lines-and-angles_examine\",\r\n            \"icon-lines-and-angles_experiment\",\r\n            \"icon-lines-and-angles_explore\",\r\n            \"icon-lines-and-angles_extrude\",\r\n            \"icon-lines-and-angles_feed\",\r\n            \"icon-lines-and-angles_fight\",\r\n            \"icon-lines-and-angles_fill\",\r\n            \"icon-lines-and-angles_film\",\r\n            \"icon-lines-and-angles_filter\",\r\n            \"icon-lines-and-angles_find\",\r\n            \"icon-lines-and-angles_finish\",\r\n            \"icon-lines-and-angles_fix\",\r\n            \"icon-lines-and-angles_flag\",\r\n            \"icon-lines-and-angles_float\",\r\n            \"icon-lines-and-angles_flow\",\r\n            \"icon-lines-and-angles_fly\",\r\n            \"icon-lines-and-angles_focus\",\r\n            \"icon-lines-and-angles_fold\",\r\n            \"icon-lines-and-angles_forbid\",\r\n            \"icon-lines-and-angles_forebode\",\r\n            \"icon-lines-and-angles_fork\",\r\n            \"icon-lines-and-angles_format\",\r\n            \"icon-lines-and-angles_game\",\r\n            \"icon-lines-and-angles_give\",\r\n            \"icon-lines-and-angles_glance\",\r\n            \"icon-lines-and-angles_grill\",\r\n            \"icon-lines-and-angles_grow\",\r\n            \"icon-lines-and-angles_guide\",\r\n            \"icon-lines-and-angles_hang\",\r\n            \"icon-lines-and-angles_harvest\",\r\n            \"icon-lines-and-angles_haunt\",\r\n            \"icon-lines-and-angles_heal\",\r\n            \"icon-lines-and-angles_hear\",\r\n            \"icon-lines-and-angles_hide\",\r\n            \"icon-lines-and-angles_hold\",\r\n            \"icon-lines-and-angles_home\",\r\n            \"icon-lines-and-angles_identify\",\r\n            \"icon-lines-and-angles_imagine\",\r\n            \"icon-lines-and-angles_influence\",\r\n            \"icon-lines-and-angles_inject\",\r\n            \"icon-lines-and-angles_invade\",\r\n            \"icon-lines-and-angles_iron\",\r\n            \"icon-lines-and-angles_jam\",\r\n            \"icon-lines-and-angles_join\",\r\n            \"icon-lines-and-angles_judge\",\r\n            \"icon-lines-and-angles_keep\",\r\n            \"icon-lines-and-angles_kick\",\r\n            \"icon-lines-and-angles_pitch\",\r\n            \"icon-lines-and-angles_plan\",\r\n            \"icon-lines-and-angles_plant\",\r\n            \"icon-lines-and-angles_play\",\r\n            \"icon-lines-and-angles_push\",\r\n            \"icon-lines-and-angles_rain\",\r\n            \"icon-lines-and-angles_read\",\r\n            \"icon-lines-and-angles_record\",\r\n            \"icon-lines-and-angles_redo\",\r\n            \"icon-lines-and-angles_reheat\",\r\n            \"icon-lines-and-angles_remind\",\r\n            \"icon-lines-and-angles_repeat\",\r\n            \"icon-lines-and-angles_report\",\r\n            \"icon-lines-and-angles_resurrect\",\r\n            \"icon-lines-and-angles_rewind\",\r\n            \"icon-lines-and-angles_ride\",\r\n            \"icon-lines-and-angles_ring\",\r\n            \"icon-lines-and-angles_rise\",\r\n            \"icon-lines-and-angles_rock\",\r\n            \"icon-lines-and-angles_roll\",\r\n            \"icon-lines-and-angles_rule\",\r\n            \"icon-lines-and-angles_run\",\r\n            \"icon-lines-and-angles_save\",\r\n            \"icon-lines-and-angles_schedule\",\r\n            \"icon-lines-and-angles_screw\",\r\n            \"icon-lines-and-angles_scroll\",\r\n            \"icon-lines-and-angles_search\",\r\n            \"icon-lines-and-angles_see\",\r\n            \"icon-lines-and-angles_select\",\r\n            \"icon-lines-and-angles_sell\",\r\n            \"icon-lines-and-angles_send\",\r\n            \"icon-lines-and-angles_sew\",\r\n            \"icon-lines-and-angles_shade\",\r\n            \"icon-lines-and-angles_shake\",\r\n            \"icon-lines-and-angles_share\",\r\n            \"icon-lines-and-angles_shine\",\r\n            \"icon-lines-and-angles_shop\",\r\n            \"icon-lines-and-angles_shower\",\r\n            \"icon-lines-and-angles_shuffle\",\r\n            \"icon-lines-and-angles_sing\",\r\n            \"icon-lines-and-angles_sit\",\r\n            \"icon-lines-and-angles_skip\",\r\n            \"icon-lines-and-angles_sleep\",\r\n            \"icon-lines-and-angles_slice\",\r\n            \"icon-lines-and-angles_slide\",\r\n            \"icon-lines-and-angles_smell\",\r\n            \"icon-lines-and-angles_smuggle\",\r\n            \"icon-lines-and-angles_snow\",\r\n            \"icon-lines-and-angles_solve\",\r\n            \"icon-lines-and-angles_sound\",\r\n            \"icon-lines-and-angles_sparkle\",\r\n            \"icon-lines-and-angles_speak\",\r\n            \"icon-lines-and-angles_spin\",\r\n            \"icon-lines-and-angles_spy\",\r\n            \"icon-lines-and-angles_stack\",\r\n            \"icon-lines-and-angles_stamp\",\r\n            \"icon-lines-and-angles_steam\",\r\n            \"icon-lines-and-angles_stomp\",\r\n            \"icon-lines-and-angles_stop\",\r\n            \"icon-lines-and-angles_strum\",\r\n            \"icon-lines-and-angles_study\",\r\n            \"icon-lines-and-angles_submerge\",\r\n            \"icon-lines-and-angles_succeed\",\r\n            \"icon-lines-and-angles_sweep\",\r\n            \"icon-lines-and-angles_swim\",\r\n            \"icon-lines-and-angles_sync\",\r\n            \"icon-lines-and-angles_tag\",\r\n            \"icon-lines-and-angles_target\",\r\n            \"icon-lines-and-angles_teach\",\r\n            \"icon-lines-and-angles_think\",\r\n            \"icon-lines-and-angles_thunder\",\r\n            \"icon-lines-and-angles_tie\",\r\n            \"icon-lines-and-angles_tower\",\r\n            \"icon-lines-and-angles_transport\",\r\n            \"icon-lines-and-angles_trash\",\r\n            \"icon-lines-and-angles_travel\",\r\n            \"icon-lines-and-angles_trend\",\r\n            \"icon-lines-and-angles_turn\",\r\n            \"icon-lines-and-angles_type\",\r\n            \"icon-lines-and-angles_undo\",\r\n            \"icon-lines-and-angles_unlock\",\r\n            \"icon-lines-and-angles_upload\",\r\n            \"icon-lines-and-angles_use\",\r\n            \"icon-lines-and-angles_wait\",\r\n            \"icon-lines-and-angles_wash\",\r\n            \"icon-lines-and-angles_watch\",\r\n            \"icon-lines-and-angles_wear\",\r\n            \"icon-lines-and-angles_weigh\",\r\n            \"icon-lines-and-angles_win\",\r\n            \"icon-lines-and-angles_work\",\r\n            \"icon-lines-and-angles_worship\",\r\n            \"icon-lines-and-angles_write\",\r\n            \"icon-lines-and-angles_yell\",\r\n            \"icon-lines-and-angles_clip\",\r\n            \"icon-lines-and-angles_close\",\r\n            \"icon-lines-and-angles_code\",\r\n            \"icon-lines-and-angles_collect\",\r\n            \"icon-lines-and-angles_commit\",\r\n            \"icon-lines-and-angles_connect\",\r\n            \"icon-lines-and-angles_contact\",\r\n            \"icon-lines-and-angles_contain\",\r\n            \"icon-lines-and-angles_control\",\r\n            \"icon-lines-and-angles_cook\",\r\n            \"icon-lines-and-angles_cool\",\r\n            \"icon-lines-and-angles_copy\",\r\n            \"icon-lines-and-angles_crave\",\r\n            \"icon-lines-and-angles_create\",\r\n            \"icon-lines-and-angles_creep\",\r\n            \"icon-lines-and-angles_crop\",\r\n            \"icon-lines-and-angles_cry\",\r\n            \"icon-lines-and-angles_curdle\",\r\n            \"icon-lines-and-angles_cut\",\r\n            \"icon-lines-and-angles_dance\",\r\n            \"icon-lines-and-angles_dazzle\",\r\n            \"icon-lines-and-angles_decide\",\r\n            \"icon-lines-and-angles_defend\",\r\n            \"icon-lines-and-angles_deliver\",\r\n            \"icon-lines-and-angles_design\",\r\n            \"icon-lines-and-angles_destroy\",\r\n            \"icon-lines-and-angles_develop\",\r\n            \"icon-lines-and-angles_die\",\r\n            \"icon-lines-and-angles_disappear\",\r\n            \"icon-lines-and-angles_discard\",\r\n            \"icon-lines-and-angles_discover\",\r\n            \"icon-lines-and-angles_disguise\",\r\n            \"icon-lines-and-angles_divide\",\r\n            \"icon-lines-and-angles_download\",\r\n            \"icon-lines-and-angles_draw\",\r\n            \"icon-lines-and-angles_drill\",\r\n            \"icon-lines-and-angles_drink\",\r\n            \"icon-lines-and-angles_drive\",\r\n            \"icon-lines-and-angles_drop\",\r\n            \"icon-lines-and-angles_kiss\",\r\n            \"icon-lines-and-angles_launch\",\r\n            \"icon-lines-and-angles_lick\",\r\n            \"icon-lines-and-angles_lift\",\r\n            \"icon-lines-and-angles_light\",\r\n            \"icon-lines-and-angles_like\",\r\n            \"icon-lines-and-angles_link\",\r\n            \"icon-lines-and-angles_live\",\r\n            \"icon-lines-and-angles_load\",\r\n            \"icon-lines-and-angles_locate\",\r\n            \"icon-lines-and-angles_lock\",\r\n            \"icon-lines-and-angles_madho\",\r\n            \"icon-lines-and-angles_manufacture\",\r\n            \"icon-lines-and-angles_mark\",\r\n            \"icon-lines-and-angles_measure\",\r\n            \"icon-lines-and-angles_medicate\",\r\n            \"icon-lines-and-angles_melt\",\r\n            \"icon-lines-and-angles_merge\",\r\n            \"icon-lines-and-angles_mill\",\r\n            \"icon-lines-and-angles_move\",\r\n            \"icon-lines-and-angles_multiply\",\r\n            \"icon-lines-and-angles_mute\",\r\n            \"icon-lines-and-angles_navigate\",\r\n            \"icon-lines-and-angles_open\",\r\n            \"icon-lines-and-angles_pack\",\r\n            \"icon-lines-and-angles_paint\",\r\n            \"icon-lines-and-angles_park\",\r\n            \"icon-lines-and-angles_paste\",\r\n            \"icon-lines-and-angles_pause\",\r\n            \"icon-lines-and-angles_pay\",\r\n            \"icon-lines-and-angles_perform\",\r\n            \"icon-lines-and-angles_photograph\",\r\n            \"icon-lines-and-angles_pick\",\r\n            \"icon-lines-and-angles_pin\",\r\n            \"icon-lines-and-angles_plot\",\r\n            \"icon-lines-and-angles_point\",\r\n            \"icon-lines-and-angles_poison\",\r\n            \"icon-lines-and-angles_present\",\r\n            \"icon-lines-and-angles_press\",\r\n            \"icon-lines-and-angles_primp\",\r\n            \"icon-lines-and-angles_print\",\r\n            \"icon-lines-and-angles_pucker\"\r\n            ]\r\n    }\r\n}\r\n","\r\n// Imports\r\nimport { cl, clv, makeSafeClass } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { createRevealTimer } from 'termInteraction';\r\n\r\n// Exports\r\nexport { viewCreate, addHearts, setScore, progressBar };\r\n\r\n// Create app view\r\nconst viewCreate = function viewCreate(termsToCreate) {\r\n\r\n    let viewHTML = \"\";\r\n\r\n    // Create HTML for terms\r\n    for (let value of termsToCreate) {\r\n\r\n        // Get terms and definitions from data\r\n        let termValue = tinyTerms[tinyTerms.pickedList].terms[value].term;\r\n        let definitionValue = tinyTerms[tinyTerms.pickedList].terms[value].definition;\r\n        let supportValue = tinyTerms[tinyTerms.pickedList].terms[value].support;\r\n        let termEncode = makeSafeClass(termValue);\r\n        let revealCounter;\r\n        let viewsCount;\r\n\r\n        // Check storage for revealed count\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue] === undefined) {\r\n            viewsCount = 0;\r\n        }\r\n        else {\r\n            viewsCount = (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].viewCount + 1) || 0;\r\n        }\r\n\r\n        document.querySelector('h1').innerHTML = tinyTerms.pickedList;\r\n        document.querySelector('.list-action').innerHTML = tinyTerms[tinyTerms.pickedList].action + '<span class=\"query-holder\"></span>';\r\n\r\n        // Create terms HTML\r\n        let newHolder =\r\n            `<div class=\"m-term-wrapper ${termEncode}\">\r\n                <p class=\"term-holder\">${termValue}</p>\r\n                <div class=\"theme-holder\"><p class=\"symbol-holder\"></p></div>\r\n                <div class=\"right\">\r\n                    <p class=\"term-views\"><span>Goal:</span> <span class=\"count\">${viewsCount}</span> / ${tinyTerms[tinyTerms.pickedList].ops.revealDailyBonusTarget}</p>\r\n                    <button class=\"reveal\">Reveal</button>\r\n                </div>\r\n                <div class=\"definition-wrapper hidden\">\r\n                    <p class=\"definition-holder\">${definitionValue}</p>\r\n                    <div class=\"helpers\">\r\n                        <a href=\"#\" class=\"lookup\"></a>\r\n                        <a href=\"#\" class=\"colour\"></a>\r\n                        <a href=\"#\" class=\"symbol\"></a>\r\n                    </div>\r\n                    <div class=\"support-wrapper\">${supportValue}</div>\r\n                </div>\r\n            </div>`;\r\n\r\n        viewHTML += newHolder;\r\n    }\r\n    // Add to view\r\n    document.querySelector('.terms-wrapper').innerHTML = viewHTML;\r\n\r\n    // Add theme to previously created terms\r\n    for (let value of termsToCreate) {\r\n        let termValue = tinyTerms[tinyTerms.pickedList].terms[value].term;\r\n        let termEncode = makeSafeClass(termValue);\r\n\r\n        // Check storage for assigned colour\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue] !== undefined && tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].colour !== undefined) {\r\n            let termWrapper = document.querySelector('.' + termEncode + '');\r\n            let pickedColour = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].colour;\r\n            // Add colour to object\r\n            termWrapper.querySelector('.theme-holder').style.background = pickedColour;\r\n            termWrapper.querySelector('.theme-holder').classList.add('bg-active');\r\n            termWrapper.querySelector('.term-holder').style.color = \"#fff\";\r\n            termWrapper.querySelector('.right').style.border = \"0\";\r\n        }\r\n        // Check storage for assigned symbol\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue] !== undefined && tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].symbol !== undefined) {\r\n            let termWrapper = document.querySelector('.' + termEncode + '');\r\n            let pickedSymbol = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[termValue].symbol;\r\n            // Add symbol to object\r\n            termWrapper.querySelector('.symbol-holder').classList = ('symbol-holder');\r\n            termWrapper.querySelector('.symbol-holder').classList.add(pickedSymbol);\r\n        }\r\n    }\r\n\r\n    // Add countdown timers to term buttons\r\n    for (let value of termsToCreate) {\r\n\r\n        // Check if timer data exists\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns !== undefined) {\r\n\r\n            // Add countdown timers to buttons\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[value] !== undefined) {\r\n\r\n                let revealBtn = document.querySelectorAll('.reveal');\r\n\r\n                // Find button node that matches term in DOM\r\n                for (let i = 0; i < revealBtn.length; i++) {\r\n                    let revealTerm = revealBtn[i].parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n                    if (revealTerm === value) {\r\n                        createRevealTimer(revealBtn[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Add hearts to page\r\nconst addHearts = function addHearts() {\r\n    let heartHolder = document.querySelector('.hearts');\r\n    let heartsHTML = \"\";\r\n\r\n    // If no hearts data exists\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.hearts === undefined) {\r\n        tinyTerms[tinyTerms.pickedList].storedData.hearts = tinyTerms[tinyTerms.pickedList].ops.points.hearts;\r\n    }\r\n    for (let i = 0; i < tinyTerms[tinyTerms.pickedList].storedData.hearts; i++) {\r\n        heartsHTML += '<p></p>';\r\n    }\r\n    // Add to view\r\n    heartHolder.innerHTML = heartsHTML;\r\n\r\n    // Add to storage\r\n    localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n}\r\n\r\n// Sets the score\r\nconst setScore = function setScore() {\r\n\r\n    let scoreHolder = document.querySelector('.score-holder');\r\n\r\n    // Set score if it doesn't exist\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.score === undefined) {\r\n        tinyTerms[tinyTerms.pickedList].storedData.score = 0;\r\n    }\r\n\r\n    let score = tinyTerms[tinyTerms.pickedList].storedData.score;\r\n\r\n    // Add to view\r\n    scoreHolder.innerHTML = score;\r\n}\r\n\r\n// Add progress bar\r\nconst progressBar = function progressBar() {\r\n    // Create correct terms default\r\n    tinyTerms[tinyTerms.pickedList].storedData.learnedTerms = tinyTerms[tinyTerms.pickedList].storedData.learnedTerms || {};\r\n    let completed = Object.keys(tinyTerms[tinyTerms.pickedList].storedData.learnedTerms).length;\r\n    let remaining = Object.keys(tinyTerms[tinyTerms.pickedList].terms).length + 1;\r\n\r\n    // Add to DOM\r\n    document.querySelector('.m-footer').querySelector('.completed').innerHTML = completed;\r\n    document.querySelector('.m-footer').querySelector('.remaining').innerHTML = ' / ' + remaining;\r\n    document.querySelector('.m-footer').querySelector('.progress-bar').style.width = ((completed / remaining) * 100) + \"%\";\r\n}","\r\n// Imports\r\nimport { cl, clv, pickRandom, checkQuery, makeSafeClass } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { addHearts } from 'viewCreation';\r\n\r\n// Exports\r\nexport { createNewQuery };\r\n\r\n// Sets up query\r\nconst createNewQuery = function createNewQuery(bonus) {\r\n\r\n    // Pick a term for query\r\n    let randomTerm;\r\n    let i = 0;\r\n\r\n    // If no stored data for reveal countdowns\r\n    tinyTerms[tinyTerms.pickedList].storedData.queryTerms = tinyTerms[tinyTerms.pickedList].storedData.queryTerms || {};\r\n\r\n    // Set correctTerms storage if not exists\r\n    tinyTerms[tinyTerms.pickedList].storedData.correctTerms = tinyTerms[tinyTerms.pickedList].storedData.correctTerms || {};\r\n\r\n    // Set incorrectTerms storage if not exists\r\n    tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms = tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms || {};\r\n\r\n    let cycledTerms = [];\r\n    // Choose term from viewed terms\r\n    while (i < Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length) {\r\n\r\n        // If no daily term\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.dailyQuery === undefined) {\r\n            // Pick a random term\r\n            randomTerm = pickRandom(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms);\r\n        }\r\n        else {\r\n            randomTerm = tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n        }\r\n        // Make sure not answered correctly before\r\n        if (!tinyTerms[tinyTerms.pickedList].storedData.correctTerms.hasOwnProperty(randomTerm)) {\r\n\r\n            // If query not from daily reminder term\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.dailyReminder !== undefined) {\r\n                if (!tinyTerms[tinyTerms.pickedList].storedData.dailyReminder.hasOwnProperty(randomTerm)) {\r\n                    queryHandler();\r\n                    break;\r\n                }\r\n            }\r\n            // If query not from daily terms\r\n            else if (!tinyTerms[tinyTerms.pickedList].storedData.dailyTerms.hasOwnProperty(randomTerm)) {\r\n                queryHandler();\r\n                break;\r\n            }\r\n        }\r\n        if (!cycledTerms.indexOf(randomTerm)) {\r\n            i++\r\n        }\r\n        // Else look for another\r\n        if (i === Object.keys(tinyTerms[tinyTerms.pickedList].storedData.viewedTerms).length) {\r\n            document.querySelector('.result-holder').innerHTML = \"Reveal more terms to get a query\";\r\n            document.querySelector('.result-holder').classList.remove('hidden');\r\n        }\r\n    }\r\n\r\n    // Build the query\r\n    function queryHandler() {\r\n        let queryWrapper = document.querySelector('.query-wrapper');\r\n        let queryHolder = document.querySelector('.query-holder');\r\n        let querySubmit = document.querySelector('.query-submit');\r\n        let resultHolder = document.querySelector('.result-holder');\r\n        let scoreHolder = document.querySelector('.score-holder');\r\n        let heartHolder = document.querySelector('.hearts');\r\n        let score = parseInt(scoreHolder.innerHTML);\r\n        let definition = tinyTerms[tinyTerms.pickedList].terms[randomTerm].definition;\r\n        let count = 0;\r\n\r\n        // Save to storage\r\n        tinyTerms[tinyTerms.pickedList].storedData.dailyQuery = randomTerm;\r\n        tinyTerms[tinyTerms.pickedList].storedData.queryComplete = false;\r\n\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        let termEncode = makeSafeClass(randomTerm);\r\n\r\n        // Hide daily term definition if same\r\n        if (document.querySelector('.' + termEncode + '') !== null) {\r\n            document.querySelector('.' + termEncode + '').querySelector('.definition-wrapper').classList.add('hidden');\r\n        }\r\n\r\n        // Add hearts\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.hearts;\r\n        addHearts();\r\n\r\n        // Show the query wrapper\r\n        queryWrapper.classList.remove('hidden');\r\n\r\n        // Change title if bonus\r\n        if (bonus) {\r\n            queryWrapper.getElementsByTagName('h2')[0].innerHTML = \"Bonus Test\";\r\n        }\r\n\r\n        // Set value of query\r\n        queryHolder.innerHTML = randomTerm;\r\n\r\n        window.addEventListener(\"keypress\", function (e) {\r\n            if (e.keyCode === 13) {\r\n                querySubmit.click();\r\n            }\r\n        });\r\n\r\n        // Query outcomes\r\n        querySubmit.addEventListener(\"click\", () => {\r\n            let queryInput = document.querySelector('.query-input').value;\r\n\r\n            if (checkQuery(queryInput, definition) === true) {\r\n                winCase();\r\n            }\r\n            else if (checkQuery(queryInput, definition) === \"mispelled\") {\r\n                winCase(\"mispelled\", queryInput);\r\n            }\r\n            else if (queryInput === \"\") {\r\n                resultHolder.innerHTML = \"Enter a definition.\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            else {\r\n                loseCase();\r\n            }\r\n        });\r\n\r\n        // If definition is right\r\n        function winCase(spelling, input) {\r\n            // Hide the query input\r\n            document.querySelector('.query-form').classList.add('hidden');\r\n            heartHolder.classList.add('hidden');\r\n            // If mispelled\r\n            if (spelling === \"mispelled\") {\r\n                // Display win message\r\n                resultHolder.innerHTML = \"Well done but check your spelling (\" + input + \"), the definition is <strong>\\\"\" + definition + \"\\\"</strong>\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            else {\r\n                // Display win message\r\n                resultHolder.innerHTML = \"Well done, the definition is <strong>\\\"\" + definition + \"\\\"</strong>\";\r\n                resultHolder.classList.remove('hidden');\r\n            }\r\n            // Add to score\r\n            score += tinyTerms[tinyTerms.pickedList].ops.points.correct;\r\n            // Update view\r\n            scoreHolder.innerHTML = score;\r\n            // Add to stored data\r\n            tinyTerms[tinyTerms.pickedList].storedData.score = score;\r\n            tinyTerms[tinyTerms.pickedList].storedData.correctTerms[randomTerm] = definition;\r\n            tinyTerms[tinyTerms.pickedList].storedData.queryComplete = true;\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n            // Check if whole term list answered correctly\r\n            if (Object.keys(tinyTerms[tinyTerms.pickedList].storedData.correctTerms).length === Object.keys(tinyTerms[tinyTerms.pickedList].terms).length) {\r\n                tinyTerms[tinyTerms.pickedList].storedData.gameWon = true;\r\n                gameWon();\r\n            }\r\n            // Save to storage\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n        }\r\n        // If definition is wrong\r\n        function loseCase() {\r\n            let queryInput = document.querySelector('.query-input');\r\n            // Update view\r\n            resultHolder.innerHTML = \"Try again.\";\r\n            resultHolder.classList.remove('hidden');\r\n            // Add placeholder\r\n            queryInput.placeholder = queryInput.value;\r\n            // Remove guess\r\n            queryInput.value = \"\";\r\n            // Lose a heart\r\n            heartHolder.removeChild(heartHolder.getElementsByTagName('p')[0]);\r\n            tinyTerms[tinyTerms.pickedList].storedData.hearts -= 1;\r\n            // If all hearts lost\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.hearts === 0) {\r\n                // Hide query \r\n                document.querySelector('.query-form').classList.add('hidden');\r\n                heartHolder.classList.add('hidden');\r\n                // Update DOM\r\n                queryInput.value = \"\";\r\n                queryInput.placeholder = \"Enter the definition\";\r\n                // Update view\r\n                resultHolder.innerHTML = \"Sorry, you are out of attempts!\";\r\n                resultHolder.classList.remove('hidden');\r\n                // Add to storedDatta \r\n                tinyTerms[tinyTerms.pickedList].storedData.incorrectTerms[randomTerm] = definition;\r\n                tinyTerms[tinyTerms.pickedList].storedData.queryComplete = true;\r\n                delete tinyTerms[tinyTerms.pickedList].storedData.hearts;\r\n            }\r\n            // Save to storage\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n        }\r\n        // If game won\r\n        function gameWon() {\r\n            cl('game won');\r\n        }\r\n    }\r\n}","\r\n// Imports\r\nimport { cl, clv, clickListener, jsonp, findKeys, makeSafeClass } from 'helperFunctions';\r\nimport appData from 'appData';\r\nimport tinyTerms from 'app';\r\nimport { createNewQuery } from 'queryInteraction';\r\nimport { setScore, addHearts, progressBar } from 'viewCreation';\r\n\r\n// Exports\r\nexport { revealedBtnHandler, createRevealTimer, dictionaryLookup, textToSpeech, addColour, hideModal, pickSymbol };\r\n\r\n// Handles functions when reveal button clicked\r\nconst revealedBtnHandler = function revealedBtnHandler() {\r\n\r\n    let revealBtn = document.querySelectorAll('.reveal');\r\n\r\n    clickListener(revealBtn, (i) => {\r\n\r\n        // Disabled button prevention\r\n        if (revealBtn[i].classList.contains('disabled')) {\r\n            return false;\r\n        }\r\n\r\n        let term = [revealBtn[i].parentNode.parentNode.querySelector('.term-holder').innerHTML];\r\n\r\n        // Updates the revealed view counter\r\n        let countHolder = revealBtn[i].parentNode.querySelector('.count');\r\n        let definitionWrapper = revealBtn[i].parentNode.parentNode.querySelector('.definition-wrapper');\r\n        let definitionHolder = revealBtn[i].parentNode.parentNode.querySelector('.definition-holder');\r\n        let count = parseInt(countHolder.innerHTML);\r\n\r\n        // Show definition\r\n        definitionWrapper.classList.remove('hidden');\r\n\r\n        // Animations\r\n        definitionWrapper.classList.add('slideInUp','animated');\r\n        revealBtn[i].parentNode.classList.add('rubberBand','animated');\r\n\r\n        // Set storedData\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms || {};\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term] = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term] || {};\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount = tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount || -1;\r\n        tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].viewCount += 1;\r\n\r\n        // Daily reveal bonus\r\n        let revealBonusCount;\r\n\r\n        // If no existing term bonus\r\n        if (tinyTerms[tinyTerms.pickedList].storedData.revealDailyBonus[term] === undefined) {\r\n            revealBonusCount = 1;\r\n        }\r\n        // Add one to daily bonus\r\n        else {\r\n            revealBonusCount = tinyTerms[tinyTerms.pickedList].storedData.revealDailyBonus[term];\r\n            revealBonusCount += 1;\r\n        }\r\n        // Update DOM\r\n        countHolder.innerHTML = revealBonusCount;\r\n        // If bonus is met\r\n        if (revealBonusCount === tinyTerms[tinyTerms.pickedList].ops.revealDailyBonusTarget) {\r\n            // Add term to learned terms list\r\n            tinyTerms[tinyTerms.pickedList].storedData.learnedTerms = tinyTerms[tinyTerms.pickedList].storedData.learnedTerms || {};\r\n            tinyTerms[tinyTerms.pickedList].storedData.learnedTerms[term] = true;\r\n            // Update progress bar\r\n            progressBar();\r\n            // If daily bonus not already triggered\r\n            if (tinyTerms[tinyTerms.pickedList].storedData.revealDailyBonus.complete === false) {\r\n                // Keep query active \r\n                tinyTerms[tinyTerms.pickedList].storedData.queryComplete = false;\r\n                // Create a new query\r\n                createNewQuery(true);\r\n            }\r\n            // Set only once a day\r\n            tinyTerms[tinyTerms.pickedList].storedData.revealDailyBonus.complete = true;\r\n            tinyTerms[tinyTerms.pickedList].storedData.score += tinyTerms[tinyTerms.pickedList].ops.points.dailyBonus;\r\n            setScore();\r\n        }\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealDailyBonus[term] = revealBonusCount;\r\n\r\n        // Save to storage\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        // Starts a timer \r\n        createRevealTimer(revealBtn[i]);\r\n    });\r\n}\r\n\r\n// Adds a timer to the reveal button\r\nconst createRevealTimer = function createRevealTimer(revealBtn) {\r\n\r\n    // If no stored data for reveal countdowns\r\n    tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns || {};\r\n\r\n    let term = [revealBtn.parentNode.parentNode.querySelector('.term-holder').innerHTML];\r\n    let minutes = tinyTerms[tinyTerms.pickedList].ops.counterMins;\r\n    let seconds = tinyTerms[tinyTerms.pickedList].ops.counterSecs;\r\n    let remainingMinutes;\r\n    let remainingSeconds;\r\n    let startTime;\r\n    let timerEnded;\r\n\r\n    // New timer\r\n    if (tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term] === undefined) {\r\n\r\n        // Get a new time\r\n        startTime = new Date().getTime();\r\n\r\n        // Set storedData\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term] = {\r\n            \"startTime\": startTime,\r\n            \"timerEnded\": false\r\n        };\r\n\r\n        // Start timer\r\n        startTimer();\r\n    }\r\n    // Existing timer\r\n    else {\r\n        // Start timer\r\n        startTimer();\r\n    }\r\n\r\n    function startTimer() {\r\n        let nowTime = new Date().getTime();\r\n        \r\n        // Disable button\r\n        revealBtn.classList.add('disabled');\r\n        revealBtn.setAttribute(\"disabled\", true);\r\n\r\n        // Get terms start time for countdown\r\n        startTime = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].startTime;\r\n        timerEnded = tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerEnded;\r\n\r\n        // Get difference in seconds\r\n        let diffSecs = Math.floor((nowTime - startTime) / 1000);\r\n        // Get total in seconds\r\n        let totalSecs = (tinyTerms[tinyTerms.pickedList].ops.counterMins * 60) + seconds;\r\n\r\n        // NowTime overtaken startTime\r\n        if (diffSecs >= totalSecs) {\r\n            timerEnded = true;\r\n            // Stop interval\r\n            clearInterval(tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerUpdate);\r\n            // Clear storage for term timer\r\n            delete tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term];\r\n        }\r\n        // Timer stopped, return to normal\r\n        if (timerEnded === true) {\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            return false;\r\n        }\r\n        // Set remaining time \r\n        remainingSeconds = totalSecs - diffSecs;\r\n    }\r\n\r\n    // Set start time to storage\r\n    localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n    let timeout;\r\n    let checkCount = 0;\r\n\r\n    // If timer is active   \r\n    if (timerEnded === false) {\r\n\r\n        // Start timer interval\r\n        tinyTerms[tinyTerms.pickedList].storedData.revealCountdowns[term].timerUpdate = setInterval(() => {\r\n            // Resync timer in some devices when off screen\r\n            checkCount += 1;\r\n            if (checkCount % 5 === 0) {\r\n                startTimer();\r\n            }\r\n            // Call UI timer build\r\n            buttonTimer();\r\n        }, 1000)\r\n    }\r\n    else {\r\n        revealBtn.innerHTML = (\"Reveal\");\r\n        revealBtn.classList.remove('disabled');\r\n        revealBtn.disabled = false;\r\n    }\r\n\r\n    // Builds the timer\r\n    function buttonTimer() {\r\n        let displayedMinutes = Math.floor(remainingSeconds / 60);\r\n        let displayedSeconds = remainingSeconds % 60;\r\n        let hiddenZero = '';\r\n\r\n        // Timer end\r\n        if (remainingSeconds <= 0) {\r\n            revealBtn.innerHTML = (\"Reveal\");\r\n            revealBtn.classList.remove('disabled');\r\n            revealBtn.disabled = false;\r\n            return false;\r\n        }\r\n\r\n        // Handle issues like zero index\r\n        if (displayedSeconds < 10 && displayedSeconds >= 0) {\r\n            hiddenZero = '0';\r\n        }\r\n        if (remainingSeconds === 60) {\r\n            displayedSeconds = '00';\r\n        }\r\n        // Update DOM\r\n        revealBtn.innerHTML = (displayedMinutes + ':' + hiddenZero + displayedSeconds);\r\n\r\n        // Decrease timer\r\n        remainingSeconds -= 1;\r\n    }\r\n};\r\n\r\n// Allows for text to speech\r\nconst textToSpeech = function textToSpeech() {\r\n\r\n    let termHolder = document.querySelectorAll('.term-holder');\r\n\r\n    clickListener(termHolder, (i) => {\r\n        let speech = new SpeechSynthesisUtterance(termHolder[i].innerHTML);\r\n        speech.lang = tinyTerms[tinyTerms.pickedList].speechLang;\r\n        window.speechSynthesis.speak(speech);\r\n    });\r\n    if (tinyTerms[tinyTerms.pickedList].speechLang === \"none\") {\r\n        for (let k = 0; k < termHolder.length; k++){\r\n            termHolder[k].classList.add('no-speak');\r\n        }\r\n    }\r\n}\r\n\r\n// Retrieves dictionary references\r\nconst dictionaryLookup = function dictionaryLookup() {\r\n\r\n    let dictionaryBtn = document.querySelectorAll('.lookup');\r\n    let modal = document.querySelector('.m-modal');\r\n\r\n    clickListener(dictionaryBtn, (i) => {\r\n        let term = dictionaryBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"dictionary\">Dictionary definitions</h2>\r\n                    </header>\r\n                    <p>${term}:</p>\r\n                    <ul class=\"definitions\">\r\n                    </ul>`;\r\n\r\n        modal.querySelector('.content').innerHTML += view;\r\n        let definitionHolder = modal.querySelector('.definitions');\r\n\r\n        // Make request to Glosbe\r\n        jsonp('https://glosbe.com/gapi/translate?from='+tinyTerms[tinyTerms.pickedList]\r\n        .dictFrom+'a&dest='+tinyTerms[tinyTerms.pickedList]\r\n        .dictTo+'g&format=json&pretty=true&phrase=' + term.toLowerCase() + '')\r\n        .then(function (data) {\r\n            \r\n            let dictionaryResponses = \"\";\r\n\r\n            try {\r\n                // Search through data for \"meanings\"\r\n                findProp(data, \"text\");\r\n\r\n                function findProp(obj, key, out) {\r\n                    let i;\r\n                    let proto = Object.prototype;\r\n                    let ts = proto.toString;\r\n                    let hasOwn = proto.hasOwnProperty.bind(obj);\r\n\r\n                    for (i in obj) {\r\n                        if (hasOwn(i)) {\r\n                            if (i === key) {\r\n                                dictionaryResponses += '<li>' + obj[i] + '</li>';\r\n                            } else if ('[object Array]' === ts.call(obj[i]) || '[object Object]' === ts.call(obj[i])) {\r\n                                findProp(obj[i], key, out);\r\n                            }\r\n                        }\r\n                    }\r\n                    return out;\r\n                }\r\n                // Add to DOM\r\n                definitionHolder.innerHTML = dictionaryResponses;\r\n            }\r\n            catch (err) {\r\n                console.log('error');\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// Adds colours to term holders\r\nconst addColour = function addColour() {\r\n\r\n    let modal = document.querySelector('.m-modal');\r\n    let colourBtn = document.querySelectorAll('.colour');\r\n    let picker;\r\n    let colours;\r\n\r\n    clickListener(colourBtn, (i) => {\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let termHolder = colourBtn[i].parentNode.parentNode.parentNode;\r\n        let term = colourBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"colour\">Colour picker</h2>\r\n                    </header>\r\n                    <p>Click below to add a colour for <br>\"<span class=\"colour-term\">${term}</span>\":</p>\r\n                    <ul class=\"colour-wrap\">\r\n                        <li><a href=\"#\" data-colour=\"#1abc9c\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#3498db\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#9b59b6\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#f1c40f\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#e67e22\"></a></li>\r\n\t\t\t\t\t\t<li><a href=\"#\" data-colour=\"#e74c3c\"></a></li>\r\n                    </ul>`;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        let coloursHolder = modal.querySelector('.colour-wrap');\r\n        // Add colour vars\r\n        colours = coloursHolder.getElementsByTagName('a');\r\n        colourListener();\r\n    });\r\n\r\n    // Add colour function\r\n    function colourListener() {\r\n        let term = document.querySelector('.colour-term').innerHTML;\r\n        let termEncode = makeSafeClass(term);\r\n        let termWrapper = document.querySelector('.' + termEncode + '');\r\n\r\n        // Pick a colour\r\n        clickListener(colours, (i) => {\r\n            let pickedColour = colours[i].getAttribute('data-colour');\r\n            // Add colour to object\r\n            termWrapper.querySelector('.theme-holder').style.background = pickedColour;\r\n            termWrapper.querySelector('.theme-holder').classList.add('bg-active');\r\n            termWrapper.querySelector('.term-holder').style.color = \"#fff\";\r\n            termWrapper.querySelector('.right').style.border = \"0\";\r\n            // Set storage\r\n            tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].colour = pickedColour;\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            // Hide modal\r\n            hideModal(true);\r\n        });\r\n    }\r\n}\r\n\r\n// Symbol picker\r\nconst pickSymbol = function pickSymbol() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let symbolBtn = document.querySelectorAll('.symbol');\r\n    let symbolHTML = \"<tr>\";\r\n    let symbols = appData.fonts;\r\n    let k = 0;\r\n\r\n    for (let i = 0; i < appData.fonts.feather.length; i++) {\r\n\r\n        if (k % 5 === 0 && k != 0) {\r\n            symbolHTML += '</tr><tr>';\r\n        }\r\n        symbolHTML += '<td><p class='+appData.fonts.feather[i]+'></p></td>';\r\n        k++;\r\n\r\n        if (i === (appData.fonts.feather.length - 1)) {\r\n            symbolHTML += \"</tr>\"\r\n        }\r\n    }\r\n\r\n    /* OLD UNICODE SYMOBLS\r\n    let symbolRanges = [[0x2600,0x26FF]]; //,[0x1200, 0x135A],[0xA000, 0xA48C]\r\n    for (let j = 0; j < symbolRanges.length; j++) {\r\n\r\n        for (let i = symbolRanges[j][0]; i < symbolRanges[j][1]; i++) {\r\n\r\n            if (k % 5 === 0 && k != 0) {\r\n                symbolHTML += '</tr><tr>';\r\n            }\r\n\r\n            let symbol = String.fromCodePoint(i);\r\n            symbolHTML += '<td><p>' + symbol + '&#xFE0E;</p></td>';\r\n            k++;\r\n\r\n            if (i === (symbolRanges[j][1] - 1)) {\r\n                symbolHTML += \"</tr>\"\r\n            }\r\n        }\r\n    }\r\n    */\r\n\r\n    clickListener(symbolBtn, (i) => {\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let termHolder = symbolBtn[i].parentNode.parentNode.parentNode;\r\n        let term = symbolBtn[i].parentNode.parentNode.parentNode.querySelector('.term-holder').innerHTML;\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"symbol\">Glyph picker</h2>\r\n                    </header>\r\n                    <p>Click below to add a glyph for <br>\"<span class=\"symbol-term\">${term}</span>\":</p>\r\n                    <div class=\"symbol-wrap\">\r\n                        <table>${symbolHTML}</table>\r\n                    </div>`;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        symbolListener();\r\n    });\r\n    // Check for clicked symbol\r\n    function symbolListener() {\r\n        let term = document.querySelector('.symbol-term').innerHTML;\r\n        let termEncode = makeSafeClass(term);\r\n        let termWrapper = document.querySelector('.' + termEncode + '');\r\n        let pickedSymbol = \"\";\r\n\r\n        modal.getElementsByTagName('table')[0].addEventListener('click', function(e) {\r\n            e = e || window.event;\r\n            let target = e.target || e.srcElement;\r\n            pickedSymbol = target.getAttribute(\"class\");   \r\n            // Add symbol to object\r\n            termWrapper.querySelector('.symbol-holder').classList = ('symbol-holder');\r\n            termWrapper.querySelector('.symbol-holder').classList.add(pickedSymbol);\r\n            // Set storage\r\n            tinyTerms[tinyTerms.pickedList].storedData.viewedTerms[term].symbol = pickedSymbol;\r\n            localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n            // Hide modal\r\n            hideModal(true);\r\n        }, false);\r\n    }\r\n}\r\n\r\n// Hide modal\r\nconst hideModal = function hideModal(trigger) {\r\n    let modal = document.querySelector('.m-modal');\r\n    let modalClose = modal.querySelector('.close');\r\n\r\n    modalClose.addEventListener(\"click\", (e) => {\r\n        e.preventDefault();\r\n        closeModal();\r\n    });\r\n    // Programatically close modal\r\n    if (trigger) {\r\n        closeModal();\r\n    }\r\n    // Hide modal\r\n    function closeModal() {\r\n        document.getElementsByTagName('body')[0].classList.remove('modal-active');\r\n        modal.classList.add('hidden');\r\n        modal.querySelector('.content').innerHTML = \"\";\r\n    }\r\n}\r\n","\r\n// Imports\r\nimport { cl, clv, clickListener, checkURL } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\nimport { hideModal } from 'termInteraction';\r\n\r\n// Exports\r\nexport { showHome };\r\n\r\n// Show home screen\r\nconst showHome = function showHome() {\r\n\r\n    tinyTerms.uploadedLists = tinyTerms.uploadedLists || {};\r\n\r\n    localforage.getItem('tinyTerms.uploadedLists', function (err, uploadedLists) {\r\n\r\n        tinyTerms.customListChoices = tinyTerms.customListChoices || {};\r\n\r\n        // Get uploaded lists\r\n        for (let val in uploadedLists) {\r\n            let listName = uploadedLists[val].name;\r\n            let listURL = uploadedLists[val].sheetURL;\r\n\r\n            tinyTerms.customListChoices[listName] = {\r\n                name: listName,\r\n                sheetURL: listURL\r\n            }\r\n        }\r\n\r\n        // Show home screen\r\n        let homeWrapper = document.querySelector('.m-menu');\r\n        homeWrapper.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n        document.getElementsByTagName('body')[0].classList.add('home');\r\n\r\n        // Show list of stored list\r\n        let lists = \"\";\r\n\r\n        for (let val in tinyTerms.listChoices) {\r\n            lists += '<a href=\"#\">' + tinyTerms.listChoices[val].name + '</a>';\r\n        }\r\n        for (let val in tinyTerms.customListChoices) {\r\n            lists += '<div class=\"' + tinyTerms.customListChoices[val].name + '\"><span class=\"custom-list\"></span><a href=\"#\">' + tinyTerms.customListChoices[val].name + '</a></div>';\r\n        }\r\n\r\n        homeWrapper.querySelector('.choose-list').getElementsByTagName('nav')[0].innerHTML = lists;\r\n\r\n        // Add listener to nav\r\n        let listItem = document.querySelector('.choose-list').querySelectorAll('a');\r\n\r\n        for (var i = 0; i < listItem.length; i++) {\r\n            listItem[i].addEventListener('click', function (e) {\r\n                e.preventDefault();\r\n                tinyTerms.pickedList = this.innerHTML;\r\n                localforage.setItem('tinyTermsDefault', tinyTerms.pickedList);\r\n                location.reload();\r\n            });\r\n        }\r\n\r\n        // Add listener to remove list\r\n        let removeList = document.querySelectorAll('.custom-list');\r\n        for (let i = 0; i < removeList.length; i++) {\r\n\r\n            removeList[i].addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                let listName = removeList[i].parentNode.childNodes[1].innerHTML;\r\n\r\n                delete tinyTerms.uploadedLists[listName];\r\n\r\n                localforage.setItem('tinyTerms.uploadedLists', tinyTerms.uploadedLists, () => {\r\n                    removeList[i].parentNode.parentNode.removeChild(document.querySelector('.'+listName));\r\n                });\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    // Upload list button\r\n    document.querySelector('.upload-info').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n\r\n        let modal = document.querySelector('.m-modal');\r\n\r\n        // Bring up modal\r\n        modal.classList.remove('hidden');\r\n        modal.style.zIndex = \"101\";\r\n        modal.querySelector('.close').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            hideModal(true);\r\n        });\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"\">Upload a list</h2>\r\n                    </header>\r\n                    <p>Create your very own list of Tiny Terms! For more info please visit:</p>\r\n                    <a target=\"_blank\" href=\"http://www.tiny-terms.com\">http://www.tiny-terms.com</a>\r\n                    \r\n                    <div class=\"list-uploader\">\r\n                        <label>List Name (max 25 characters)</label>\r\n                        <input class=\"upload-name\" type=\"text\" placeholder=\"Enter list name\">\r\n                        <label>List URL</label>\r\n                        <input class=\"upload-sheet\" type=\"text\" placeholder=\"Paste list URL\">\r\n                        <button class=\"upload-list\">Upload</button>\r\n                    </div>`;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n\r\n        window.addEventListener(\"keypress\", function (e) {\r\n            let inputName = document.querySelector('.upload-name').value;\r\n            let inputSheet = document.querySelector('.upload-sheet').value;\r\n\r\n            if (e.keyCode === 13) {\r\n                uploadList(inputName, inputSheet);\r\n            }\r\n        });\r\n\r\n        document.querySelector('.upload-list').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            let inputName = document.querySelector('.upload-name').value;\r\n            let inputSheet = document.querySelector('.upload-sheet').value;\r\n\r\n            uploadList(inputName, inputSheet);\r\n        });\r\n    });\r\n    function uploadList(inputName, inputSheet) {\r\n        inputName = inputName.substring(0, 25);\r\n\r\n        if (inputName.length > 0 && inputSheet.length > 0) {\r\n\r\n            // Check valid URL\r\n            if (checkURL(inputSheet) === true) {\r\n                localforage.getItem('tinyTerms.uploadedLists', function (err, uploadedLists) {\r\n                    // Get uploaded lists\r\n                    for (let val in uploadedLists) {\r\n                        let listName = uploadedLists[val].name;\r\n                        let listURL = uploadedLists[val].sheetURL;\r\n\r\n                        tinyTerms.listChoices[listName] = {\r\n                            name: listName,\r\n                            sheetURL: listURL\r\n                        }\r\n                    }\r\n                    tinyTerms.uploadedLists[inputName] = {\r\n                        name: inputName,\r\n                        sheetURL: inputSheet\r\n                    };\r\n                    localforage.setItem('tinyTerms.uploadedLists', tinyTerms.uploadedLists, () => {\r\n                        hideModal(true);\r\n                        let customlist = '<div class=\"' + inputName + '\"><span class=\"custom-list\"></span><a href=\"#\">' + inputName + '</a></div>';\r\n                        let homeWrapper = document.querySelector('.m-menu');\r\n                        homeWrapper.querySelector('.choose-list').getElementsByTagName('nav')[0].innerHTML += customlist;\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                cl('no valid url');\r\n            }\r\n        }\r\n        else {\r\n            cl('no text');\r\n        }\r\n    }\r\n}\r\n","\r\n// Imports\r\nimport { cl, clv, clickListener } from 'helperFunctions';\r\nimport tinyTerms from 'app';\r\nimport { hideModal } from 'termInteraction';\r\nimport { createNewQuery } from 'queryInteraction';\r\n\r\n// Exports\r\nexport { onboardShow, optionsDisplay };\r\n\r\n// Show home screen\r\nconst onboardShow = function onboardShow() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let onBoardText = document.querySelector('.m-onboarding');\r\n    let topTerm = document.querySelectorAll('.m-term-wrapper')[0];\r\n    let definitionHolder = topTerm.querySelector('.definition-holder');\r\n\r\n    tinyTerms.tutComplete = false;\r\n    localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n\r\n    // Onboard - Stage 1\r\n    modal.classList.remove('hidden');\r\n    document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n    let view = `<header>\r\n                    <h2 class=\"icon-child\">Welcome to Tiny Terms!</h2>\r\n                </header>\r\n                <p>Looks like this is your first time here, so let's go over some basics before you get started.</p>\r\n                <button class=\"onboard-1\">Let's go!</button>\r\n                <a href=\"#\" class=\"close-tut\">Skip the tutorial</a>\r\n                `;\r\n    modal.querySelector('.content').innerHTML = view;\r\n    modal.classList.add('onboard');\r\n    document.querySelector('.close-tut').addEventListener(\"click\", () => {\r\n        hideModal(true);\r\n        modal.classList.remove('onboard');\r\n        tinyTerms.tutComplete = true;\r\n        localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n    });\r\n\r\n    document.querySelector('.onboard-1').addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        onboardStage2();\r\n    });\r\n    function onboardStage2() {\r\n        hideModal(true);\r\n        topTerm.style.zIndex = \"100\";\r\n        topTerm.querySelector('.term-holder').classList.add('animated', 'pulse', 'infinite');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n        topTerm.getElementsByTagName('button')[0].setAttribute('disabled', 'true');\r\n        onBoardText.classList.remove('hidden');\r\n\r\n        let view = `<p>This is one of the terms you will be learning, you get 5 each day.</p>\r\n                    <button class=\"onboard-2\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        let termOffset = topTerm.offsetTop + topTerm.offsetHeight;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        document.querySelector('.onboard-2').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage3();\r\n        });\r\n    }\r\n    function onboardStage3() {\r\n        topTerm.querySelector('.term-holder').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.term-views').classList.add('animated', 'pulse', 'infinite');\r\n        let view = `<p>On the right is the goal meter, fill this and the term is marked as complete.</p>\r\n                    <button class=\"onboard-3\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        onBoardText.classList.add('onboard-right');\r\n\r\n        document.querySelector('.onboard-3').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage4();\r\n        });\r\n    }\r\n    function onboardStage4() {\r\n        topTerm.querySelector('.term-views').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.getElementsByTagName('button')[0].classList.add('animated', 'pulse', 'infinite');\r\n        topTerm.getElementsByTagName('button')[0].removeAttribute('disabled');\r\n        let view = `<p style=\"border:0; margin: 10px 0; padding: 0\">Press the reveal button to continue!</p>\r\n                    `;\r\n        onBoardText.innerHTML = view;\r\n\r\n        topTerm.getElementsByTagName('button')[0].addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage5();\r\n        });\r\n    }\r\n    function onboardStage5() {\r\n        topTerm.getElementsByTagName('button')[0].classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.definition-wrapper').classList.remove('hidden');\r\n        topTerm.querySelector('.definition-holder').classList.add('animated', 'pulse', 'infinite');\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + definitionHolder.offsetHeight + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>This is the definition you need to learn, helpful information is displayed underneath.</p>\r\n                    <button class=\"onboard-5\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        onBoardText.classList.remove('onboard-right');\r\n\r\n        document.querySelector('.onboard-5').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage6();\r\n        });\r\n    }\r\n    function onboardStage6() {\r\n        topTerm.querySelector('.definition-holder').classList.remove('animated', 'pulse', 'infinite');\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>Tiny Terms uses spaced repetition, check back in an hour to add to the goal.</p>\r\n                    <button class=\"onboard-6\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n        onBoardText.classList.add('onboard-right');\r\n\r\n        document.querySelector('.onboard-6').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage7();\r\n        });\r\n    }\r\n    function onboardStage7() {\r\n        topTerm.querySelector('.colour').classList.add('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.symbol').classList.add('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.colour').setAttribute('disabled', 'true');\r\n        topTerm.querySelector('.symbol').setAttribute('disabled', 'true');\r\n\r\n        let termOffset = topTerm.offsetTop + definitionHolder.offsetTop + definitionHolder.offsetHeight + 95;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n\r\n        let view = `<p>You can add a colour and symbol to the term, the visual association will help you rememeber.</p>\r\n                    <button class=\"onboard-7\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        document.querySelector('.onboard-7').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage8();\r\n        });\r\n    }\r\n    function onboardStage8() {\r\n        topTerm.querySelector('.colour').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.symbol').classList.remove('animated', 'pulse', 'infinite');\r\n        topTerm.querySelector('.colour').removeAttribute('disabled');\r\n        topTerm.querySelector('.symbol').removeAttribute('disabled');\r\n        topTerm.style.zIndex = \"50\";\r\n        let queryWrap = document.querySelector('.m-query');\r\n        document.querySelector('.query-submit').setAttribute('disabled', 'true');\r\n\r\n        createNewQuery(true);\r\n        delete tinyTerms[tinyTerms.pickedList].storedData.dailyQuery;\r\n        localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n\r\n        let termOffset = queryWrap.offsetTop + queryWrap.offsetHeight;\r\n        onBoardText.style.top = termOffset + \"px\";\r\n        queryWrap.style.zIndex = \"100\";\r\n\r\n        let view = `<p>Each day you get a mini test to see how well you have rememebered, you can also unlock an extra test by completing at least one goal meter in a day.</p>\r\n                    <button class=\"onboard-8\">Next</button>`;\r\n        onBoardText.innerHTML = view;\r\n\r\n        document.querySelector('.onboard-8').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            onboardStage9();\r\n        });\r\n    }\r\n    function onboardStage9() {\r\n        modal.classList.remove('hidden');\r\n        onBoardText.innerHTML = \"\";\r\n        onBoardText.classList.add('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n        let queryWrap = document.querySelector('.m-query');\r\n        document.querySelector('.query-submit').removeAttribute('disabled');\r\n\r\n        queryWrap.style.zIndex = \"50\";\r\n        queryWrap.classList.add('hidden');\r\n        topTerm.querySelector('.definition-wrapper').classList.remove('hidden');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"\">That's about it</h2>\r\n                    </header>\r\n                    <p>Fill the progress bar by completing the goal meters to finish the list! You get points for answering tests correctly and completing goal meters, use them to unlock cool stuff. <br><br>Good luck!</p>\r\n                    <button class=\"close-tut\">Close the tutorial</button>\r\n                    `;\r\n        modal.querySelector('.content').innerHTML = view;\r\n        modal.classList.add('onboard');\r\n        document.querySelector('.close-tut').addEventListener(\"click\", (e) => {\r\n            e.preventDefault();\r\n            hideModal(true);\r\n            tinyTerms.tutComplete = true;\r\n            localforage.setItem(\"tinyTerms.tutComplete\", tinyTerms.tutComplete);\r\n            modal.classList.remove('onboard');\r\n        });\r\n    }\r\n}\r\n\r\n// Help screen\r\nconst optionsDisplay = function optionsDisplay() {\r\n    let modal = document.querySelector('.m-modal');\r\n    let settingsBtn = document.querySelector('.settings');\r\n\r\n    settingsBtn.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        modal.classList.remove('hidden');\r\n        document.getElementsByTagName('body')[0].classList.add('modal-active');\r\n\r\n        let view = `<header>\r\n                        <h2 class=\"icon-cog-outline\">Options</h2>\r\n                    </header>\r\n                    <div class=\"options\">\r\n                        <p>Spend points: (coming soon)</p>\r\n                        <a href=\"#\" class=\"icon-award-empty points-neon-colours\">1000: Unlock neon colours</a>\r\n                        <a href=\"#\" class=\"icon-award points-life-glyphs\">5000: Unlock solid symbols</a>\r\n                        <a href=\"#\" class=\"icon-award-1 points-metal-colours\">10000: Unlock metal colours</a>\r\n                        <p>Help</p>\r\n                        <a href=\"#\" class=\"icon-right-open-big show-tut\">Show the tutorial again</a>\r\n                        <p>More Options</p>\r\n                        <a href=\"#\" class=\"icon-right-open-big reset-list\">Reset list progress</a>\r\n                        <a href=\"#\" class=\"icon-right-open-big reset\">Reset the app</a>\r\n                    </div>\r\n                    `;\r\n\r\n        // Add view\r\n        modal.querySelector('.content').innerHTML += view;\r\n        let resetList = document.querySelector('.reset-list');\r\n        let resetApp = document.querySelector('.reset');\r\n\r\n        document.querySelector('.show-tut').addEventListener('click', (e) => {e.preventDefault(); onboardShow()});\r\n\r\n        function resetMenu() {\r\n            if (document.querySelector('.delete-confirm') !== null) {\r\n                resetList.innerHTML = \"Reset list progress\";\r\n                resetApp.innerHTML = \"Reset the app\";\r\n                document.querySelector('.delete-confirm').parentNode.removeChild(document.querySelector('.delete-cancel'));\r\n                document.querySelector('.delete-confirm').parentNode.removeChild(document.querySelector('.delete-confirm'));\r\n            }\r\n        }\r\n        resetList.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            resetMenu();\r\n            resetList.innerHTML = \"Are you sure you want to delete progress for this list? (Can't undo)\";\r\n            resetList.parentNode.insertBefore(document.createElement(\"div\"), resetList.nextSibling);\r\n            resetList.nextSibling.innerHTML = '<button class=\"delete-cancel\">Cancel</button><button class=\"delete-confirm\">Confim</button>';\r\n\r\n            document.querySelector('.delete-confirm').addEventListener('click', () => { \r\n                delete tinyTerms[tinyTerms.pickedList];\r\n                localforage.setItem(tinyTerms.storedName, tinyTerms[tinyTerms.pickedList]);\r\n                location.reload();\r\n            });\r\n            document.querySelector('.delete-cancel').addEventListener('click', () => { \r\n                hideModal(true);\r\n            });\r\n        });\r\n        document.querySelector('.reset').addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            resetMenu();\r\n            resetApp.innerHTML = \"Are you sure you want to delete all progress for the app? (Can't undo)\";\r\n            resetApp.parentNode.insertBefore(document.createElement(\"div\"), resetApp.nextSibling);\r\n            resetApp.nextSibling.innerHTML = '<button class=\"delete-cancel\">Cancel</button><button class=\"delete-confirm\">Confim</button>';\r\n\r\n            document.querySelector('.delete-confirm').addEventListener('click', () => { \r\n                localforage.clear();\r\n                location.reload();\r\n            });\r\n        });\r\n    });\r\n}\r\n"]}